(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[72],{1072:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Cart:()=>ve});var r=a(6610),n=a(5991),i=a(3349),o=a(379),s=a(6070),d=a(7608),c=a(6156),l=a(2122),m=a(1253),p=a(7294),h=a(1749),u=a(282),v=a(4837),y=a(7812),E=a(2318),f=a(7625),Z=a(1436),g=a(2613),P=a(9895),_=a(4741),C=a(5517),w=a(2692),T=a(5477),S=a(5037),I=a(2663),A=a(6856),b=a(9525),N=a(7212),D=a(6083),k=a(5697),x=a.n(k),B=a(5258),O=a(65),M=a(1423),G=a(6394),R=a(6209),j=a(5639),U=a(8286),z=a(6718),K=a(3901),q=a(2822),H=a(998),W=a(6353),V=a(5757),F=a(74),J=a(2541),L=a(553),Q=a(4436),X=a(6019),Y=a(7708),$=a(743),ee=a(1201),te=a(8799),ae=a(5007),re=a(6282),ne=a(8949),ie=a(4593),oe=a(9669),se=a.n(oe);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.Z)(e);if(t){var n=(0,d.Z)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.Z)(this,a)}}var ce=a(7563);function le(e){return p.createElement("svg",{width:e.width?e.width:50,height:"20",viewBox:e.viewBox?e.viewBox:"0 0 1400 200",xmlns:"http://www.w3.org/2000/svg"},p.createElement("g",null,p.createElement("path",{id:"svg_1",d:"m219.27,252.76c63.98,-2.85 99.22,-39.48 99.22,-103.13c0,-37.42 -12.62,-65.49 -37.52,-83.44c-22.29,-16.07 -48.63,-19.21 -62.35,-19.65c-28.61,-0.92 -107.02,-0.04 -110.34,0c-5.75,0.07 -10.38,4.75 -10.38,10.5l0,174.95c-9.23,-0.11 -15.07,-0.2 -15.31,-0.21c-0.06,0 -0.11,0 -0.17,0c-5.72,0 -10.41,4.59 -10.5,10.34c-0.09,5.8 4.54,10.57 10.34,10.66c0.95,0.01 6.78,0.1 15.64,0.21l0,26.12l-15.48,0c-5.8,0 -10.5,4.7 -10.5,10.5s4.7,10.5 10.5,10.5l15.48,0l0,74.89c0,5.8 4.7,10.5 10.5,10.5s10.5,-4.7 10.5,-10.5l0,-74.9l109.39,0c5.8,0 10.5,-4.7 10.5,-10.5s-4.7,-10.5 -10.5,-10.5l-109.39,0l0,-25.88c32.67,0.31 78.53,0.51 100.37,-0.46zm-100.37,-185.33c22.81,-0.21 76.99,-0.61 99.05,0.1c23.92,0.77 79.55,10.31 79.55,82.1c0,52.17 -26.63,79.82 -79.16,82.16c-21.17,0.94 -66.91,0.74 -99.44,0.43l0,-164.79z"})))}function me(e){var t=e.children,a=e.value,r=e.index,n=(0,m.Z)(e,["children","value","index"]);return p.createElement("div",(0,l.Z)({role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},n),a===r&&p.createElement("div",null,t))}function pe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}me.propTypes={children:x().node,index:x().any.isRequired,value:x().any.isRequired};var he=function(e){(0,o.Z)(a,e);var t=de(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,c.Z)((0,i.Z)(n),"_isMounted",!1),n.state={item:n.props.item,type:n.props.type,count:0,onePrice:0,new_onePrice:-1,allPrice:0},n}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=re.Z.getItems(),a=(re.Z.getItemsPromo(),t.find((function(t){return t.item_id==e.state.item.id})));a&&this.setState({count:a.count,onePrice:a.one_price,allPrice:a.all_price}),(0,ne.EH)((function(){if(!0===e._isMounted){var t=re.Z.getItems(),a=re.Z.getItemsPromo();if(a&&a.length>0){var r=a.find((function(t){return t.item_id==e.state.item.id}));r&&e.setState({count:r.count,onePrice:r.one_price,allPrice:r.all_price})}var n=t.find((function(t){return t.item_id==e.state.item.id}));"promo"!=e.state.type&&(n?e.setState({count:n.count,onePrice:n.one_price,allPrice:n.all_price,new_onePrice:n.new_one_price?n.new_one_price:-1}):e.setState({count:0,onePrice:0,allPrice:0,new_onePrice:-1}))}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"add",value:function(e){re.Z.AddItem(e)}},{key:"minus",value:function(e){re.Z.MinusItem(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.count!==t.count||this.state.onePrice!==t.onePrice||this.state.allPrice!==t.allPrice||this.state.item.name!==e.item.name}},{key:"render",value:function(){return parseInt(this.state.count)>0||7==parseInt(this.state.item.cat_id)?p.createElement("tr",null,p.createElement("td",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"}},p.createElement("picture",null,p.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+this.state.item.img+"300х200.webp?"+this.state.item.imgUpdate,type:"image/webp"}),p.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.item.img+"300х200.jpg?"+this.state.item.imgUpdate,alt:this.state.item.name,title:this.state.item.name})),"promo"==this.state.type?p.createElement(f.G,{icon:Z.Cly,className:"promoIcon"}):null,p.createElement("div",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"nameItem"},this.state.item.name),p.createElement(E.Z,{variant:"h5",component:"span",className:"descItem"},this.state.item.desc))),p.createElement("td",null,"promo"!=this.state.type?p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count"},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this,this.state.item.id)},p.createElement(f.G,{icon:Z.Kl4,style:{fontSize:"1rem"}})),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(E.Z,{component:"span",className:"CardCountItem"},this.state.count)),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this,this.state.item.id)},p.createElement(f.G,{icon:Z.r8p,style:{fontSize:"1rem"}}))):p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count promo"},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(f.G,{icon:Z.Kl4,style:{fontSize:"1rem"}})),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(E.Z,{component:"span",className:"CardCountItem"},this.state.count)),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(f.G,{icon:Z.r8p,style:{fontSize:"1rem"}})))),p.createElement("td",null,-1!=this.state.new_onePrice?p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePriceOld"},parseInt(this.state.count)*parseInt(this.state.onePrice)):null,p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.allPrice," ",p.createElement(le,{width:"20",viewBox:"0 20 500 200"})))):null}}]),a}(p.Component),ue=function(e){(0,o.Z)(a,e);var t=de(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,c.Z)((0,i.Z)(n),"_isMounted",!1),n.state={item:n.props.item,type:n.props.type,count:0,onePrice:0,allPrice:0,new_onePrice:-1},n}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=re.Z.getItems().find((function(t){return t.item_id==e.state.item.id}));t&&this.setState({count:t.count,onePrice:t.one_price,allPrice:t.all_price}),(0,ne.EH)((function(){if(!0===e._isMounted){var t=re.Z.getItems(),a=re.Z.getItemsPromo();if(a&&a.length>0){var r=a.find((function(t){return t.item_id==e.state.item.id}));r&&e.setState({count:r.count,onePrice:r.one_price,allPrice:r.all_price})}var n=t.find((function(t){return t.item_id==e.state.item.id}));"promo"!=e.state.type&&(n?e.setState({count:n.count,onePrice:n.one_price,allPrice:n.all_price,new_onePrice:n.new_one_price?n.new_one_price:-1}):e.setState({count:0,onePrice:0,allPrice:0,new_onePrice:-1}))}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"add",value:function(e){re.Z.AddItem(e)}},{key:"minus",value:function(e){re.Z.MinusItem(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.count!==t.count||this.state.onePrice!==t.onePrice||this.state.allPrice!==t.allPrice||this.state.item.name!==e.item.name}},{key:"render",value:function(){return this.state.count>0||7==parseInt(this.state.item.cat_id)?p.createElement("div",{className:"boxItem"},p.createElement("picture",{style:{width:"40%"}},p.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+this.state.item.img+"300х200.webp?"+this.state.item.imgUpdate,type:"image/webp"}),p.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.item.img+"300х200.jpg?"+this.state.item.imgUpdate,alt:this.state.item.name,title:this.state.item.name})),"promo"==this.state.type?p.createElement(f.G,{icon:Z.Cly,className:"promoIcon"}):null,p.createElement("div",{style:{width:"60%"}},p.createElement(E.Z,{variant:"h5",component:"span"},this.state.item.name),p.createElement("div",null,"promo"!=this.state.type?p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count"},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this,this.state.item.id)},p.createElement(f.G,{icon:Z.Kl4,style:{fontSize:"1rem"}})),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(E.Z,{component:"span",className:"CardCountItem"},this.state.count)),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this,this.state.item.id)},p.createElement(f.G,{icon:Z.r8p,style:{fontSize:"1rem"}}))):p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count promo"},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(f.G,{icon:Z.Kl4,style:{fontSize:"1rem"}})),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(E.Z,{component:"span",className:"CardCountItem"},this.state.count)),p.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},p.createElement(f.G,{icon:Z.r8p,style:{fontSize:"1rem"}}))),-1!=this.state.new_onePrice?p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePriceOld"},parseInt(this.state.count)*parseInt(this.state.onePrice)):null,p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice"},this.state.allPrice," ",p.createElement(le,{width:"20",viewBox:"10 0 600 200"}))))):null}}]),a}(p.Component),ve=function(e){(0,o.Z)(a,e);var t=de(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,c.Z)((0,i.Z)(n),"_isMounted",!1),(0,c.Z)((0,i.Z)(n),"clickOrderStart",!1),(0,c.Z)((0,i.Z)(n),"startOrderInterval",90),(0,c.Z)((0,i.Z)(n),"startOrderIntervalTimer",null),(0,c.Z)((0,i.Z)(n),"componentDidMount",(function(){n._isMounted=!0,document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),re.Z.setPage("cart"),re.Z.getToken()||n.props.history.push("/"+n.state.city_name+"/"),n.loadData(),a.fetchData("/"+n.state.city_name).then((function(e){n.setState({title:e.page.title,description:e.page.description})}));var e=re.Z.getItems(),t=re.Z.getAllItems(),r=(re.Z.getItemsPromo(),[]);if(e.length>0&&t.length>0){e.map((function(e){var a=t.filter((function(t){return t.id==e.item_id}))[0];a&&r.push({id:e.item_id,cat_id:a.cat_id,name:e.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img_new,imgUpdate:a.img_new_update})}));var i=r.filter((function(e){return 7!==parseInt(e.cat_id)})),o=r.filter((function(e){return 7==parseInt(e.cat_id)})),s=re.Z.check_need_dops();n.setState({cartItems_main:i,cartItems_dop:o,cartItems_need_dop:s,sumDiv:re.Z.getSumDiv(),allPrice:re.Z.getAllPrice()})}(0,ne.EH)((function(){if(!0===n._isMounted){var e=re.Z.getItems(),t=re.Z.getAllItems(),a=re.Z.check_need_dops(),r=re.Z.getItemsPromo(),i=[],o=[];e.map((function(e){var a=t.find((function(t){return t.id==e.item_id}));a&&i.push({id:e.item_id,cat_id:a.cat_id,name:e.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img_new,imgUpdate:a.img_new_update})}));var s=i.filter((function(e){return 7!==parseInt(e.cat_id)})),d=(i.filter((function(e){return 7==parseInt(e.cat_id)})),[]);a.map((function(e){var a=i.find((function(t){return parseInt(t.id)==parseInt(e.id)})),r=t.find((function(t){return parseInt(t.id)==parseInt(e.id)}));a?d.push({id:e.id,cat_id:e.cat_id,name:e.name,desc:e.tmp_desc,count:a.count,allPrice:a.allPrice,img:r.img_new,imgUpdate:r.img_new_update}):d.push({id:e.id,cat_id:e.cat_id,name:e.name,desc:e.tmp_desc,count:0,allPrice:0,img:r.img_new,imgUpdate:r.img_new_update})})),r.map((function(e){var a=t.find((function(t){return t.id==e.item_id}));a&&o.push({id:e.item_id,cat_id:a.cat_id,name:a.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img_new,imgUpdate:a.img_new_update})})),n.setState({cartItems_dop:[]}),n.setState({cartItems_dop:d}),n.setState({cartItems_main:s,cartItems_need_dop:a,cartItems_promo:o,sumDiv:re.Z.getSumDiv(),allPrice:re.Z.getAllPrice()})}}))})),(0,c.Z)((0,i.Z)(n),"changeTab",(function(e,t){n.setState({orderType:t});var a=n.state.orderAddr;if(0==t){var r=re.Z.getAllPrice();a?1==parseInt(a.free_drive)?parseInt(r)>0?re.Z.setSumDiv(0):re.Z.setSumDiv(1):re.Z.setSumDiv(parseInt(a.sum_div)):re.Z.setSumDiv(0)}else re.Z.setSumDiv(0),setTimeout((function(){n.state.pic_point.length>0&&n.choosePic(n.state.orderPic)}),300);var i=n.state.orderTimes,o="cash";0==t?1==i?(n.setState({renderPay:a&&1==parseInt(a.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}),o="cash"):(n.setState({renderPay:n.state.pays.dev_mini}),o="cash"):(n.setState({renderPay:n.state.pays.pic}),o="in"),n.setState({orderPay:o}),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changeAddr",(function(e){var t=n.state.my_addr.find((function(t){return t.id==e.target.value})),a=re.Z.getAllPrice();1==parseInt(t.free_drive)?parseInt(a)>0?re.Z.setSumDiv(0):re.Z.setSumDiv(1):re.Z.setSumDiv(parseInt(t.sum_div));var r=n.state.orderTimes;0==n.state.orderType?1==r?n.setState({renderPay:t&&1==parseInt(t.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.pic}),n.setState({orderAddr:t,chooseAddr:!1,newAddrInfo:null,newAddrPD:"",newAddrET:"",newAddrKV:""}),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changeComment",(function(e){e.target.value.length<=50&&n.setState({orderComment:e.target.value}),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changePay",(function(e){n.setState({orderPay:e.target.value}),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changeTimes",(function(e){var t=e.target.value,a="cash";0==n.state.orderType?1==t?(n.setState({renderPay:n.state.orderAddr&&1==parseInt(n.state.orderAddr.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}),a="cash"):(n.setState({renderPay:n.state.pays.dev_mini}),a="cash"):(n.setState({renderPay:n.state.pays.pic}),a="in"),n.setState({orderTimes:t,orderPay:a}),n.loadTimePred(),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changeSdacha",(function(e){n.setState({orderSdacha:e.target.value}),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changePredDay",(function(e){0!==e.target.value?(n.setState({orderPredDay:e.target.value,orderTimes:"2"}),0==n.state.orderType?n.setState({renderPay:n.state.pays.dev_mini,orderPay:"cash"}):n.setState({renderPay:n.state.pays.pic,orderPay:"in"}),setTimeout((function(){n.loadTimePred()}),300)):(n.setState({orderPredDay:0,orderTimes:"1"}),0==n.state.orderType?n.setState({renderPay:n.state.orderAddr&&1==parseInt(n.state.orderAddr.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.pic,orderPay:"in"})),n.saveData()})),(0,c.Z)((0,i.Z)(n),"changePredTime",(function(e){n.setState({orderPredTime:e.target.value}),n.saveData()})),n.state={is_load:!1,city_name:e.match.params.cityName,spiner:!1,title:"",description:"",chooseAddr:!1,choosePicDialog:!1,chooseTimeDialog:!1,choosePayDialog:!1,chooseNewAddr:!1,orderCheckDop:!1,sumDiv:0,allPrice:0,pic_point:[],my_addr:[],all_addr:[],date_pred:[],picPointInfo:null,pays:{dev:[{type:"cash",title:"Наличными курьеру"},{type:"card",title:"Онлайн"}],dev_mini:[{type:"cash",title:"Наличными курьеру"}],pic:[{type:"in",title:"В кафе"}]},renderPay:[{type:"cash",title:"Наличными курьеру"},{type:"card",title:"Онлайн"}],cartItems_main:[],cartItems_dop:[],cartItems_need_dop:[],cartItems_promo:[],timePred:[],error:{title:"",text:""},errorOpen:!1,orderCheck:!1,newAddrInfo:null,newAddrPD:"",newAddrET:"",newAddrKV:"",newAddrHome:"",newAddrDom:!1,orderType:0,orderAddr:null,orderPic:0,orderComment:"",orderPay:"cash",orderTimes:"1",orderPredDay:"",orderPredTime:"",orderSdacha:"",orderPromo:"",orderPromoText:"",newOrderData:null},re.Z.setCity(e.match.params.cityName),n}return(0,n.Z)(a,[{key:"loadData",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"get_by_mi_web",city_id:this.state.city_name,user_id:re.Z.getToken()})}).then((function(e){return e.json()})).then((function(t){e.setState({pic_point:t.get_addr_pic.points,my_addr:t.get_my_addr,all_addr:t.get_addr,date_pred:t.date_pred}),setTimeout((function(){var t=re.Z.getCartData();if(t.orderType||0==t.orderType){if(e.setState({orderType:t.orderType,orderAddr:t.orderAddr&&-1==t.orderAddr.id?null:t.orderAddr,orderPic:t.orderPic,orderComment:t.orderComment,orderTimes:t.orderTimes,orderPredDay:t.orderPredDay,orderPredTime:t.orderPredTime,orderPay:t.orderPay,orderSdacha:t.orderSdacha}),2==parseInt(t.orderTimes)&&""!=t.orderPredDay&&(t.orderAddr&&-1!==t.orderAddr.id||parseInt(t.orderPic)>0))setTimeout((function(){e.loadTimePred()}),300);else{var a={orderType:t.orderType,orderAddr:"",orderPic:t.orderPic,orderComment:t.orderComment,orderTimes:t.orderTimes,orderPredDay:"",orderPredTime:"",orderPay:t.orderPay,orderSdacha:t.orderSdacha};re.Z.saveCartData(a)}if(setTimeout((function(){1==parseInt(t.orderType)&&parseInt(t.orderPic)>0&&e.choosePic(t.orderPic)}),300),0==t.orderType&&t.orderAddr&&t.orderAddr.id&&-1!==t.orderAddr.id){var r=re.Z.getAllPrice();1==parseInt(t.orderAddr.free_drive)?parseInt(r)>0?re.Z.setSumDiv(0):re.Z.setSumDiv(1):re.Z.setSumDiv(parseInt(t.orderAddr.sum_div))}setTimeout((function(){var a=t.orderTimes;0==t.orderType?1==a?e.setState({renderPay:t.orderAddr&&1==parseInt(t.orderAddr.pay_active)?e.state.pays.dev:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.pic})}),300)}else e.state.pic_point.length>0&&e.choosePic(e.state.pic_point[0].id),e.state.my_addr.length>0&&e.changeAddr({target:{value:e.state.my_addr[0].id}});"undefined"!=typeof window&&setTimeout((function(){localStorage.getItem("promo_name")&&(e.setState({orderPromo:localStorage.getItem("promo_name")}),setTimeout((function(){e.checkPromo()}),300))}),1e3)}),300)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"choosePic",value:function(e){document.querySelector(".boxPic.active")&&document.querySelector(".boxPic.active").classList.remove("active"),document.querySelector("#pic_"+e)&&document.querySelector("#pic_"+e).classList.add("active");var t=this.state.pic_point.find((function(t){return t.id==e}));this.setState({orderPic:e,picPointInfo:t,choosePicDialog:!1}),this.saveData()}},{key:"changePayMobile",value:function(e){this.setState({orderPay:e,choosePayDialog:!1}),this.saveData()}},{key:"checkPromo",value:function(){var e=this;0==this.state.orderPromo.length?this.setState({orderPromoText:""}):fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"get_promo_web",city_id:re.Z.getCity(),promo_name:this.state.orderPromo})}).then((function(e){return e.json()})).then((function(t){re.Z.setPromo(JSON.stringify(t),e.state.orderPromo);var a=re.Z.checkPromo();!1===a.st&&localStorage.removeItem("promo_name"),e.setState({orderPromoText:a.text})}))}},{key:"saveData",value:function(){var e=this;setTimeout((function(){var t={orderType:e.state.orderType,orderAddr:e.state.orderAddr,orderPic:e.state.orderPic,orderComment:e.state.orderComment,orderTimes:e.state.orderTimes,orderPredDay:e.state.orderPredDay,orderPredTime:e.state.orderPredTime,orderPay:e.state.orderPay,orderSdacha:e.state.orderSdacha};re.Z.saveCartData(t)}),500)}},{key:"saveDataCustomAddr",value:function(){var e=this;setTimeout((function(){var t={orderType:e.state.orderType,orderAddr:{id:-1,city_name:re.Z.getCityRU(),street:e.state.newAddrInfo?e.state.newAddrInfo.street:"",home:e.state.newAddrInfo?e.state.newAddrInfo.home:"",kv:e.state.newAddrKV,pd:e.state.newAddrPD,et:e.state.newAddrET,dom_true:e.state.newAddrDom?0:1,free_drive:e.state.newAddrInfo?e.state.newAddrInfo.free_drive:0,sum_div:e.state.newAddrInfo?e.state.newAddrInfo.sum_div:0,point_id:e.state.newAddrInfo?e.state.newAddrInfo.point_id:0,xy:e.state.newAddrInfo?e.state.newAddrInfo.xy:"",pay_active:e.state.newAddrInfo?e.state.newAddrInfo.pay_active:0},orderPic:e.state.orderPic,orderComment:e.state.orderComment,orderTimes:e.state.orderTimes,orderPredDay:e.state.orderPredDay,orderPredTime:e.state.orderPredTime,orderPay:e.state.orderPay,orderSdacha:e.state.orderSdacha};t.orderAddr.street.length>0&&t.orderAddr.home.length>0&&e.setState({orderAddr:t.orderAddr}),re.Z.saveCartData(t);var a=re.Z.getAllPrice();1==parseInt(e.state.newAddrInfo?e.state.newAddrInfo.free_drive:0)?parseInt(a)>0?re.Z.setSumDiv(0):re.Z.setSumDiv(1):re.Z.setSumDiv(parseInt(e.state.newAddrInfo?e.state.newAddrInfo.sum_div:0));var r=e.state.orderTimes;0==e.state.orderType?1==r?e.setState({renderPay:e.state.newAddrInfo&&1==parseInt(e.state.newAddrInfo.pay_active)?e.state.pays.dev:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.pic})}),500)}},{key:"loadTimePred",value:function(){var e,t,a=this,r=[],n=re.Z.getItems();this.state.orderType+1!=1||1!=parseInt(this.state.orderTimes)||this.state.orderAddr&&this.state.orderAddr.point_id?(n.forEach((function(e){r.push({item_id:e.item_id,count:e.count})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"get_times_pred_web",point_id:this.state.orderType+1==1?null!==(e=this.state.orderAddr.point_id)&&void 0!==e?e:0:null!==(t=this.state.orderPic)&&void 0!==t?t:0,type_order:this.state.orderType+1,date:this.state.orderPredDay,cart:JSON.stringify(r)})}).then((function(e){return e.json()})).then((function(e){e.st?a.setState({timePred:e.data}):a.setState({error:{title:"Предупреждение",text:e.text},errorOpen:!0})}))):this.setState({error:{title:"Предупреждение",text:"Адрес доставки или точка самовывоза не выбрана"},errorOpen:!0,orderTimes:"1"})}},{key:"startOrder",value:function(){var e=this;if(0==this.clickOrderStart){this.clickOrderStart=!0,this.setState({spiner:!0});var t=[],a=re.Z.getItems(),r=re.Z.getAllItems();a.forEach((function(e){e.count>0&&t.push({name:e.name,count:e.count,price:e.all_price,item_id:e.item_id,cat_id:r.find((function(t){return t.id==e.item_id})).cat_id})}));var n=!1,i=!1,o=!1;if(t.forEach((function(e){(3==parseInt(e.cat_id)||4==parseInt(e.cat_id)||9==parseInt(e.cat_id)||10==parseInt(e.cat_id)||12==parseInt(e.cat_id)||13==parseInt(e.cat_id))&&parseInt(e.count)>0&&(n=!0),17==parseInt(e.item_id)&&parseInt(e.count)>0&&(i=!0),19==parseInt(e.item_id)&&parseInt(e.count)>0&&(o=!0)})),n&&0==i||n&&0==o)return this.setState({orderCheckDop:!0,spiner:!1}),void setTimeout((function(){e.clickOrderStart=!1}),300);this.clickOrderStart=!1,this.startOrderNext()}}},{key:"startOrderNext",value:function(){var e=this;if(0==this.clickOrderStart){this.clickOrderStart=!0,clearTimeout(this.startOrderIntervalTimer),this.setState({orderCheckDop:!1,spiner:!0});var t=this.state.renderPay.find((function(t){return t.type==e.state.orderPay})),a=[];re.Z.getItems().forEach((function(e){e.count>0&&a.push({name:e.name,count:e.count,price:e.all_price,id:e.item_id})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"createOrder_web",city_id:this.state.city_name,user_id:re.Z.getToken(),timePred:JSON.stringify({value:1==parseInt(this.state.orderTimes)?0:this.state.orderPredDay+" "+this.state.orderPredTime}),typeOrder:this.state.orderType,addrPic:this.state.orderPic,comment:this.state.orderComment,addrDev:this.state.orderAddr?JSON.stringify(this.state.orderAddr):"",pay:t.title,payFull:JSON.stringify(t),cart:JSON.stringify(a),promo_name:this.state.orderPromo})}).then((function(e){return e.json()})).then((function(t){setTimeout((function(){e.clickOrderStart=!1}),300),setTimeout((function(){e.setState({spiner:!1}),t.st?(e.setState({orderCheck:!0,newOrderData:t}),e.startOrderIntervalTimer=setTimeout((function(){e.setState({orderCheck:!1,newOrderData:null})}),1e3*e.startOrderInterval)):e.setState({error:{title:"Предупреждение",text:t.text_err},errorOpen:!0})}),1e3)}))}}},{key:"checkNewAddr",value:function(){var e=this,t=document.querySelector("#newAddrStreet").value;t.length>0&&this.state.newAddrHome.length>0&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"save_new_addr_web",city_id:this.state.city_name,user_id:re.Z.getToken(),street:t+" "+this.state.newAddrHome})}).then((function(e){return e.json()})).then((function(t){t.st?""==t.data.home?e.setState({error:{title:"Предупреждение",text:"Номер дома не указан или указан не верно"},errorOpen:!0}):(e.setState({newAddrInfo:t.data}),e.saveDataCustomAddr()):e.setState({error:{title:"Предупреждение",text:t.text},errorOpen:!0})}))}},{key:"trueOrder",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"trueOrder",city_id:this.state.city_name,user_id:re.Z.getToken(),order_id:this.state.newOrderData.order_id,point_id:this.state.newOrderData.point_id})}).then((function(e){return e.json()})).then((function(t){0==t.st?e.setState({error:{title:"При подтверждении оплаты произошла ошибка",text:t.text_err},errorOpen:!0}):(re.Z.setItems([]),re.Z.saveCartData({orderType:"0",orderAddr:"",orderPic:0,orderComment:"",orderTimes:"1",orderPredDay:"",orderPredTime:"",orderPay:"",orderSdacha:""}),setTimeout((function(){window.location.pathname="/"+e.state.city_name+"/profile"}),300))}))}},{key:"delAddr",value:function(e){var t=this;confirm("Удалить сохраненный адрес ?")&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce.stringify({type:"del_addr_web",city_id:this.state.city_name,user_id:re.Z.getToken(),id_addr:e})}).then((function(e){return e.json()})).then((function(e){t.setState({my_addr:e})}))}},{key:"changeDomTrue",value:function(e){this.setState({newAddrDom:e})}},{key:"closeTimeDialog",value:function(){""==this.state.orderPredTime?(this.changePredDay({target:{value:0}}),this.setState({chooseTimeDialog:!1})):this.setState({chooseTimeDialog:!1})}},{key:"render",value:function(){var e=this,t=this.state.renderPay.find((function(t){return t.type==e.state.orderPay}));return p.createElement(h.Z,{container:!0,className:"Cart mainContainer MuiGrid-spacing-xs-3"},p.createElement(ie.q,null,p.createElement("title",null,this.state.title),p.createElement("meta",{name:"description",content:this.state.description})),p.createElement(w.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},p.createElement(T.Z,{color:"inherit"})),p.createElement(h.Z,{item:!0,xs:12},p.createElement(E.Z,{variant:"h5",component:"h1"},"Корзина")),p.createElement(g.Z,{xsDown:!0},p.createElement(h.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer",style:{paddingTop:0}},p.createElement(B.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},p.createElement(O.Z,{value:this.state.orderType,onChange:this.changeTab.bind(this),"aria-label":"simple tabs example",style:{justifyContent:"center"}},p.createElement(M.Z,(0,l.Z)({label:"Доставка"},pe(0),{disableRipple:!0})),p.createElement(M.Z,(0,l.Z)({label:"Самовывоз"},pe(1),{disableRipple:!0})))),p.createElement(me,{value:this.state.orderType,index:0,style:{width:"100%"}},p.createElement(Q.Z,{component:"fieldset"},p.createElement(J.Z,{name:"addrs",value:this.state.orderAddr?this.state.orderAddr.id:0,onChange:this.changeAddr},this.state.my_addr.map((function(t,a){return p.createElement("div",{key:a,className:"boxAddr"},p.createElement(L.Z,{value:t.id,control:p.createElement(F.Z,null),label:t.city_name+", "+t.street+" "+t.home+(0==parseInt(t.pd)?"":", Пд. "+t.pd)+(0==parseInt(t.et)?"":", Эт. "+t.et)+(0==parseInt(t.kv)?"":", Кв. "+t.kv)}),p.createElement(f.G,{onClick:e.delAddr.bind(e,t.id),icon:Z.NBC}))})))),p.createElement(Y.Z,null,p.createElement($.Z,{"aria-controls":"panel1a-content",id:"panel1a-header"},p.createElement(E.Z,{variant:"h5",component:"span",className:"newAddr"},"Новый адрес")),p.createElement(ee.Z,{className:"newAddr"},p.createElement("div",null,p.createElement(ae.ZP,{freeSolo:!0,id:"newAddrStreet",onBlur:this.checkNewAddr.bind(this),options:this.state.all_addr.map((function(e){return e.value})),renderInput:function(e){return p.createElement(U.Z,(0,l.Z)({},e,{label:"Улица",margin:"normal",variant:"outlined"}))}}),p.createElement(U.Z,{label:"Дом",variant:"outlined",value:this.state.newAddrHome,onChange:function(t){return e.setState({newAddrHome:t.target.value})},onBlur:this.checkNewAddr.bind(this)})),p.createElement("div",null,p.createElement(U.Z,{label:"Подъезд",variant:"outlined",value:this.state.newAddrPD,onChange:function(t){return e.setState({newAddrPD:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),p.createElement(U.Z,{label:"Этаж",variant:"outlined",value:this.state.newAddrET,onChange:function(t){return e.setState({newAddrET:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),p.createElement(U.Z,{label:"Квартира",variant:"outlined",value:this.state.newAddrKV,onChange:function(t){return e.setState({newAddrKV:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)})),p.createElement("div",null,p.createElement(v.Z,{disableElevation:!0,variant:"contained",className:"chooseDomTrue"},p.createElement(u.Z,{className:!0===this.state.newAddrDom?"active":"",onClick:this.changeDomTrue.bind(this,!0)},"Домофон работает"),p.createElement(u.Z,{className:!1===this.state.newAddrDom?"active":"",onClick:this.changeDomTrue.bind(this,!1)},"Домофон не работает")))))),p.createElement(me,{value:this.state.orderType,index:1},p.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},this.state.pic_point.map((function(t,a){return p.createElement("div",{className:"boxPic",id:"pic_"+t.id,key:a,onClick:e.choosePic.bind(e,t.id)},p.createElement(E.Z,{variant:"h5",component:"span"},t.raion),p.createElement(E.Z,{variant:"h5",component:"span"},t.addr,", c 10:00 до 21:30"))})))),0==this.state.orderType?p.createElement("div",null,p.createElement("form",{noValidate:!0,autoComplete:"off"},p.createElement(U.Z,{style:{width:"100%"},id:"outlined-multiline-flexible",label:"Комментарий курьеру",multiline:!0,rowsMax:2,value:this.state.orderComment,onChange:this.changeComment,variant:"outlined"}))):null,p.createElement("div",null,p.createElement(Q.Z,{component:"fieldset"},p.createElement(X.Z,{component:"legend"},"Оплата"),p.createElement(J.Z,{"aria-label":"pays",name:"pays",value:this.state.orderPay,onChange:this.changePay},this.state.renderPay.map((function(e,t){return p.createElement(L.Z,{key:t,value:e.type,control:p.createElement(F.Z,null),label:e.title})}))))),p.createElement("div",null,p.createElement(Q.Z,{component:"fieldset"},p.createElement(X.Z,{component:"legend"},"Когда приготовить?"),p.createElement(J.Z,{"aria-label":"times",name:"times",value:this.state.orderTimes,onChange:this.changeTimes},p.createElement(L.Z,{value:"1",control:p.createElement(F.Z,null),label:"Как можно быстрее"}),p.createElement(L.Z,{value:"2",control:p.createElement(F.Z,null),label:"Предзаказ"})))),2==this.state.orderTimes?p.createElement("div",null,p.createElement(Q.Z,{style:{width:"30%"}},p.createElement(G.Z,{htmlFor:"age-native-simple"},"День"),p.createElement(R.Z,{displayEmpty:!0,value:this.state.orderPredDay,onChange:this.changePredDay,inputProps:{id:"age-native-simple"}},this.state.date_pred.map((function(e,t){return p.createElement(j.Z,{key:t,value:e.date},e.text)})))),p.createElement(Q.Z,{style:{width:"20%"}},p.createElement(G.Z,{htmlFor:"age-native-simple1"},"Время"),p.createElement(R.Z,{displayEmpty:!0,value:this.state.orderPredTime,onChange:this.changePredTime,inputProps:{id:"age-native-simple1"}},this.state.timePred.map((function(e,t){return p.createElement(j.Z,{key:t,value:e.value},e.text)}))))):null,p.createElement("div",null,p.createElement(E.Z,{variant:"h5",component:"h2"},"Моя корзина")),p.createElement("div",null,p.createElement("table",{className:"tableCart"},p.createElement("tbody",null,this.state.cartItems_main.map((function(e,t){return p.createElement(he,{key:t,item:e,type:"item"})})),this.state.cartItems_promo.map((function(e,t){return p.createElement(he,{key:t,item:e,type:"promo"})})),p.createElement("tr",{className:"rowAboutDop"},p.createElement("td",{colSpan:"3"},p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Соевый соус, имбирь и васаби приобретаются отдельно!"),p.createElement("br",null),p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Не забудь добавить нужные позиции в корзину."))),this.state.cartItems_dop.map((function(e,t){return p.createElement(he,{key:t,item:e,type:"dop"})}))),p.createElement("tfoot",null,p.createElement("tr",null,p.createElement("td",{colSpan:"2"},p.createElement(E.Z,{component:"span"},"Доставка:")),p.createElement("td",null,p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv," ",p.createElement(le,{width:"20",viewBox:"0 20 500 200"})))),p.createElement("tr",null,p.createElement("td",{colSpan:"2"},p.createElement(E.Z,{component:"span"},"Итого:")),p.createElement("td",null,p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv+this.state.allPrice," ",p.createElement(le,{width:"20",viewBox:"0 20 500 200"}))))))),0==this.state.orderType?p.createElement("div",{className:"orderSdacha"},p.createElement("div",null,p.createElement(Q.Z,null,p.createElement(G.Z,{htmlFor:"standard-adornment-weight"},"Подготовить сдачу с"),p.createElement(te.Z,{type:"number",id:"standard-adornment-weight",value:this.state.orderSdacha,onChange:this.changeSdacha,endAdornment:p.createElement(le,{viewBox:"-400 0 1200 300"})})))):null,p.createElement("div",{className:"promoOrder"},p.createElement("div",null,p.createElement(P.Z,{component:"div",className:"SpacePromo"},p.createElement(_.Z,{onBlur:this.checkPromo.bind(this),value:this.state.orderPromo,onChange:function(t){return e.setState({orderPromo:t.target.value})},placeholder:"Промокод"}),p.createElement(C.Z,{orientation:"vertical"}),p.createElement(y.Z,{color:"primary","aria-label":"directions",onClick:this.checkPromo.bind(this)},p.createElement(S.Z,null))),this.state.orderPromoText.length>0?p.createElement("div",{className:"DescPromo"},p.createElement(E.Z,{variant:"h5",component:"span"},"Промокод дает: ",this.state.orderPromoText)):null),p.createElement("div",null,p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:this.startOrder.bind(this)},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Оформить заказ")))))),p.createElement(g.Z,{smUp:!0},p.createElement(h.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer mobile"},p.createElement(B.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},p.createElement(O.Z,{value:this.state.orderType,onChange:this.changeTab.bind(this),"aria-label":"simple tabs example",style:{justifyContent:"center"}},p.createElement(M.Z,(0,l.Z)({label:"Доставка"},pe(0),{style:{width:"50%"},disableRipple:!0})),p.createElement(M.Z,(0,l.Z)({label:"Самовывоз"},pe(1),{style:{width:"50%"},disableRipple:!0})))),p.createElement(me,{value:this.state.orderType,index:0,style:{width:"100%"}},p.createElement("div",{className:"boxMobile",onClick:function(){return e.setState({chooseAddr:!0})}},p.createElement(E.Z,{variant:"h5",component:"span"},"Адрес: ",this.state.orderAddr?this.state.orderAddr.city_name+", "+this.state.orderAddr.street+" "+this.state.orderAddr.home+(0==parseInt(this.state.orderAddr.pd)?"":", Пд. "+this.state.orderAddr.pd)+(0==parseInt(this.state.orderAddr.et)?"":", Эт. "+this.state.orderAddr.et)+(0==parseInt(this.state.orderAddr.kv)?"":", Кв. "+this.state.orderAddr.kv):""))),p.createElement(me,{value:this.state.orderType,index:1,style:{width:"100%"}},p.createElement("div",{className:"boxMobile",onClick:function(){return e.setState({choosePicDialog:!0})}},p.createElement(E.Z,{variant:"h5",component:"span"},"Адрес: ",this.state.orderPic>0?this.state.pic_point.find((function(t){return t.id==e.state.orderPic})).addr:""))),p.createElement("div",{className:"boxMobile",onClick:function(){return e.setState({chooseTimeDialog:!0})}},p.createElement(E.Z,{variant:"h5",component:"span"},"Приготовим: ",1==this.state.orderTimes?"как можно быстрее":this.state.orderPredDay+" "+this.state.orderPredTime)),p.createElement("div",{className:"boxMobile",onClick:function(){return e.setState({choosePayDialog:!0})}},p.createElement(E.Z,{variant:"h5",component:"span"},"Оплачу: ",t?t.title:"")),p.createElement("div",{style:{marginTop:15}},p.createElement(P.Z,{component:"div",className:"SpacePromo"},p.createElement(_.Z,{onBlur:this.checkPromo.bind(this),value:this.state.orderPromo,onChange:function(t){return e.setState({orderPromo:t.target.value})},placeholder:"Промокод"}),p.createElement(C.Z,{orientation:"vertical"}),p.createElement(y.Z,{color:"primary","aria-label":"directions",onClick:this.checkPromo.bind(this)},p.createElement(S.Z,null))),this.state.orderPromoText.length>0?p.createElement("div",{className:"DescPromo"},p.createElement(E.Z,{variant:"h5",component:"span"},"Промокод дает: ",this.state.orderPromoText)):null),0==this.state.orderType?p.createElement("div",{className:"boxMobile_ area",style:{paddingTop:20}},p.createElement("form",{noValidate:!0,autoComplete:"off"},p.createElement(U.Z,{style:{width:"100%"},id:"outlined-multiline-flexible",label:"Комментарий курьеру",multiline:!0,rowsMax:2,value:this.state.orderComment,onChange:this.changeComment,variant:"outlined"}))):null,0==this.state.orderType&&"cash"==this.state.orderPay?p.createElement("div",{className:"boxMobile_ area",style:{paddingTop:20}},p.createElement(Q.Z,{variant:"outlined",style:{width:"100%"}},p.createElement(G.Z,{htmlFor:"outlined-adornment-password"},"Подготовить сдачу с"),p.createElement(z.Z,{id:"outlined-adornment-password",type:"number",style:{width:"100%"},value:this.state.orderSdacha,onChange:this.changeSdacha,endAdornment:p.createElement(le,{viewBox:"-600 80 1000 300"}),label:"Подготовить сдачу с"}))):null,p.createElement("div",null,p.createElement("div",{className:"tableMobile"},this.state.cartItems_main.map((function(e,t){return p.createElement(ue,{key:t,item:e,type:"item"})})),this.state.cartItems_promo.map((function(e,t){return p.createElement(ue,{key:t,item:e,type:"promo"})})),p.createElement("div",{className:"boxItem rowAboutDop"},p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Соевый соус, имбирь и васаби приобретаются отдельно!"),p.createElement("br",null),p.createElement(E.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Не забудьте добавить нужные позиции в корзину.")),this.state.cartItems_dop.map((function(e,t){return p.createElement(ue,{key:t,item:e,type:"dop"})})))),p.createElement("div",{className:"bottomOrder",style:{paddingTop:0}},p.createElement("div",{style:{padding:"5px 0px"}},p.createElement(E.Z,{variant:"h5",component:"span"},"Доставка"),p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv," ",p.createElement(le,{width:"20",viewBox:"0 0 600 200"}))),p.createElement("div",{style:{paddingBottom:5}},p.createElement(E.Z,{variant:"h5",component:"span"},"К оплате"),p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv+this.state.allPrice," ",p.createElement(le,{width:"20",viewBox:"0 0 600 200"}))),p.createElement("div",null,p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:this.startOrder.bind(this)},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Оформить заказ")))))),p.createElement(I.Z,{open:this.state.errorOpen,onClose:function(){return e.setState({errorOpen:!1})},className:"DialogErr"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},this.state.error.title),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({errorOpen:!1})},icon:Z.NBC}),p.createElement(b.Z,null,p.createElement(N.Z,{className:"DialogErrText"},this.state.error.text)),p.createElement(A.Z,null,p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({errorOpen:!1})}},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Хорошо")))),p.createElement(I.Z,{open:this.state.chooseAddr,fullWidth:!0,onClose:function(){return e.setState({chooseAddr:!1})},className:"DialogChooseAddr"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Адрес доставки"),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({chooseAddr:!1})},icon:Z.NBC}),p.createElement(b.Z,null,p.createElement(Q.Z,{component:"fieldset"},p.createElement(J.Z,{name:"addrs",value:this.state.orderAddr?this.state.orderAddr.id:0,onChange:this.changeAddr},this.state.my_addr.map((function(e,t){return p.createElement("div",{key:t,className:"boxAddr"},p.createElement(L.Z,{value:e.id,control:p.createElement(F.Z,null),label:e.city_name+", "+e.street+" "+e.home+(0==parseInt(e.pd)?"":", Пд. "+e.pd)+(0==parseInt(e.et)?"":", Эт. "+e.et)+(0==parseInt(e.kv)?"":", Кв. "+e.kv)}),p.createElement(f.G,{icon:Z.NBC}))})))),p.createElement(E.Z,{variant:"h5",component:"span",className:"newAddrMobile",onClick:function(){e.setState({chooseAddr:!1,chooseNewAddr:!0})}},"Новый адрес"))),p.createElement(I.Z,{open:this.state.chooseNewAddr,fullWidth:!0,onClose:function(){return e.setState({chooseNewAddr:!1})},className:"DialogChooseNewAddr"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Новый адрес"),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({chooseNewAddr:!1})},icon:Z.NBC}),p.createElement(b.Z,{style:{paddingTop:0}},p.createElement("div",{className:"newAddrMobile",style:{paddingTop:0}},p.createElement(ae.ZP,{freeSolo:!0,id:"newAddrStreet",style:{width:"100%"},onBlur:this.checkNewAddr.bind(this),options:this.state.all_addr.map((function(e){return e.value})),renderInput:function(e){return p.createElement(U.Z,(0,l.Z)({},e,{label:"Улица",margin:"normal"}))}}),p.createElement(U.Z,{label:"Дом",style:{width:"100%"},value:this.state.newAddrHome,onChange:function(t){return e.setState({newAddrHome:t.target.value})},onBlur:this.checkNewAddr.bind(this)}),p.createElement(U.Z,{label:"Подъезд",style:{width:"100%"},value:this.state.newAddrPD,onChange:function(t){return e.setState({newAddrPD:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),p.createElement(U.Z,{label:"Этаж",style:{width:"100%"},value:this.state.newAddrET,onChange:function(t){return e.setState({newAddrET:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),p.createElement(U.Z,{label:"Квартира",style:{width:"100%"},value:this.state.newAddrKV,onChange:function(t){return e.setState({newAddrKV:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),p.createElement(v.Z,{disableElevation:!0,variant:"contained",className:"chooseDomTrue"},p.createElement(u.Z,{className:!0===this.state.newAddrDom?"active":"",onClick:this.changeDomTrue.bind(this,!0)},"Домофон работает"),p.createElement(u.Z,{className:!1===this.state.newAddrDom?"active":"",onClick:this.changeDomTrue.bind(this,!1)},"Домофон не работает"))),p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({chooseNewAddr:!1})}},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Использовать")))),p.createElement(I.Z,{open:this.state.choosePicDialog,fullWidth:!0,onClose:function(){return e.setState({choosePicDialog:!1})},className:"DialogChoosePicDialog"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Адрес кафе"),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({choosePicDialog:!1})},icon:Z.NBC}),p.createElement(b.Z,null,p.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},this.state.pic_point.map((function(t,a){return p.createElement("div",{className:"boxPic "+(e.state.orderPic==t.id?"active":""),id:"pic_"+t.id,key:a,onClick:e.choosePic.bind(e,t.id)},p.createElement(E.Z,{variant:"h5",component:"span"},t.raion),p.createElement(E.Z,{variant:"h5",component:"span"},t.addr,", c 10:00 до 21:30"))}))))),p.createElement(I.Z,{open:this.state.chooseTimeDialog,fullWidth:!0,onClose:this.closeTimeDialog.bind(this),className:"DialogChoosePicDialog"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Время заказа"),p.createElement(f.G,{className:"closeDialog",onClick:this.closeTimeDialog.bind(this),icon:Z.NBC}),p.createElement(b.Z,null,p.createElement("div",{style:{display:"flex",flexDirection:"column"}},p.createElement(Q.Z,{style:{width:"100%",paddingBottom:20}},p.createElement(G.Z,{htmlFor:"age-native-simple"},"День"),p.createElement(R.Z,{displayEmpty:!0,value:this.state.orderPredDay,onChange:this.changePredDay,inputProps:{id:"age-native-simple"}},p.createElement(j.Z,{value:0},"Как можно быстрее"),this.state.date_pred.map((function(e,t){return p.createElement(j.Z,{key:t,value:e.date},e.text)})))),p.createElement(Q.Z,{style:{width:"100%",paddingBottom:20,display:0==this.state.orderPredDay?"none":"inline-flex"}},p.createElement(G.Z,{htmlFor:"age-native-simple1"},"Время"),p.createElement(R.Z,{displayEmpty:!0,value:this.state.orderPredTime,onChange:this.changePredTime,inputProps:{id:"age-native-simple1"}},this.state.timePred.map((function(e,t){return p.createElement(j.Z,{key:t,value:e.value},e.text)}))))),p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({chooseTimeDialog:!1})}},p.createElement(u.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Использовать")))),p.createElement(I.Z,{onClose:function(){return e.setState({choosePayDialog:!1})},"aria-labelledby":"simple-dialog-title",open:this.state.choosePayDialog,fullWidth:!0,className:"DialogChoosePayDialog"},p.createElement(D.Z,{id:"simple-dialog-title",style:{paddingBottom:0}},"Оплата"),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({choosePayDialog:!1})},icon:Z.NBC}),p.createElement(q.Z,null,this.state.renderPay.map((function(t,a){return p.createElement(H.Z,{button:!0,onClick:e.changePayMobile.bind(e,t.type),key:a},p.createElement(W.Z,null,p.createElement(K.Z,{style:{color:"#fff",backgroundColor:"#000"}},"cash"==t.type?p.createElement(f.G,{icon:Z.aLp}):"in"==t.type?p.createElement(f.G,{icon:Z.J4t}):p.createElement(f.G,{icon:Z.Ozh}))),p.createElement(V.Z,{primary:t.title}))})))),p.createElement(I.Z,{open:this.state.orderCheckDop,fullWidth:!0,onClose:this.startOrderNext.bind(this),className:"DialogOrderCheckDopDialog"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"А как же палочки и соевый соус ?"),p.createElement(f.G,{className:"closeDialog",onClick:this.startOrderNext.bind(this),icon:Z.NBC}),p.createElement(b.Z,null,p.createElement("div",{className:"tableMobile OrderCheckDopDialog"},this.state.cartItems_dop.map((function(e,t){return p.createElement(ue,{key:t,item:e,type:"dop"})})))),p.createElement(A.Z,{style:{padding:"12px 24px",paddingBottom:24}},p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"},onClick:this.startOrderNext.bind(this)},p.createElement(u.Z,{variant:"contained",style:{width:"100%"},className:"BtnCardMain CardInCardItem"},"Продолжить")))),!0===this.state.orderCheck?p.createElement(I.Z,{open:this.state.orderCheck,fullWidth:!0,onClose:function(){return e.setState({orderCheck:!1})},className:"DialogOrderCheckDialog"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Подтверждение заказа"),p.createElement(f.G,{className:"closeDialog",onClick:function(){return e.setState({orderCheck:!1})},icon:Z.NBC}),p.createElement(b.Z,{style:{display:"flex",flexDirection:"column"}},1==parseInt(this.state.orderTimes)?null:p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Время предзаказа: ",this.state.orderPredDay+" "+this.state.orderPredTime),0==parseInt(this.state.orderType)?p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Доставим: ",this.state.orderAddr?this.state.orderAddr.city_name+", "+this.state.orderAddr.street+" "+this.state.orderAddr.home+(0==parseInt(this.state.orderAddr.pd)?"":", Пд. "+this.state.orderAddr.pd)+(0==parseInt(this.state.orderAddr.et)?"":", Эт. "+this.state.orderAddr.et)+(0==parseInt(this.state.orderAddr.kv)?"":", Кв. "+this.state.orderAddr.kv):null):p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Заберу: ",this.state.picPointInfo?this.state.picPointInfo.addr:""),0==parseInt(this.state.orderType)&&this.state.orderAddr&&1==parseInt(this.state.orderAddr.dom_true)?p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Домофон не работает"):null,this.state.orderPromo.length>0?p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Промокод: ",this.state.orderPromo):null,p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Оплачу: ",this.state.renderPay.find((function(t){return t.type==e.state.orderPay})).title),0==parseInt(this.state.orderType)&&"cash"==this.state.orderPay?this.state.orderSdacha.length>0?p.createElement(E.Z,{variant:"h5",component:"span",className:"nameSdacha orderCheckText"},"Сдача с: ",this.state.orderSdacha," ",p.createElement(le,{width:"20",viewBox:"0 0 700 300"})):p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Без сдачи"):null,p.createElement("table",{className:"tableOrderCheck"},p.createElement("tbody",null,re.Z.getItems().map((function(e,t){return parseInt(e.count)>0?p.createElement("tr",{key:t},p.createElement("td",{style:{width:"60%"}},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.name)),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.count)),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},e.all_price," ",p.createElement(le,{width:"20",viewBox:"0 0 700 300"})))):null})),this.state.cartItems_promo.map((function(e,t){return p.createElement("tr",{key:t},p.createElement("td",{style:{width:"60%"}},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.name)),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.count)),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},e.allPrice," ",p.createElement(le,{width:"20",viewBox:"0 0 700 300"}))))})),0==parseInt(this.state.orderType)?p.createElement("tr",null,p.createElement("td",{colSpan:"2"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Доставка")),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},re.Z.getSumDiv()," ",p.createElement(le,{width:"20",viewBox:"0 0 700 300"})))):null),p.createElement("tfoot",null,p.createElement("tr",null,p.createElement("td",{colSpan:"2"},p.createElement(E.Z,{variant:"h5",component:"span",className:"orderCheckText bold"},"Сумма заказа")),p.createElement("td",null,p.createElement(E.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},parseInt(re.Z.getAllPrice())+parseInt(re.Z.getSumDiv())," ",p.createElement(le,{width:"20",viewBox:"0 0 700 300"}))))))),p.createElement(A.Z,{style:{padding:"12px 24px",paddingBottom:24}},"card"==this.state.orderPay?p.createElement("a",{href:this.state.newOrderData.pay.formUrl,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"}},p.createElement(u.Z,{variant:"contained",style:{width:"100%",margin:"0px 10px"},className:"BtnCardMain CardInCardItem"},"Оплатить заказ"))):p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"},onClick:this.trueOrder.bind(this)},p.createElement(u.Z,{variant:"contained",style:{width:"100%"},className:"BtnCardMain CardInCardItem"},"Подтвердить заказ")))):null)}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),page:"cart"};return se()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:ce.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),a}(p.Component)}}]);
//# sourceMappingURL=72.60507815ea2179b4c198.js.map