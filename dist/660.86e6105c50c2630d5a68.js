(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[660],{7660:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Item:()=>D});var n=a(6610),i=a(5991),s=a(3349),l=a(379),r=a(6070),m=a(7608),c=a(6156),o=a(2122),p=a(1253),h=a(7294),d=a(1749),u=a(282),v=a(4837),g=a(2318),E=a(7625),y=a(1436),f=a(2613),Z=a(8949),b=a(6282),w=a(4593),x=a(9669),N=a.n(x),_=a(1276),I=a(5697),k=a.n(I),C=a(5258),M=a(65),T=a(1423);var P=a(7563);function B(e){return h.createElement("svg",{width:e.width?e.width:"50",height:"20",viewBox:e.viewBox?e.viewBox:"0 0 1500 300",xmlns:"http://www.w3.org/2000/svg"},h.createElement("g",null,h.createElement("path",{id:"svg_1",d:"m219.27,252.76c63.98,-2.85 99.22,-39.48 99.22,-103.13c0,-37.42 -12.62,-65.49 -37.52,-83.44c-22.29,-16.07 -48.63,-19.21 -62.35,-19.65c-28.61,-0.92 -107.02,-0.04 -110.34,0c-5.75,0.07 -10.38,4.75 -10.38,10.5l0,174.95c-9.23,-0.11 -15.07,-0.2 -15.31,-0.21c-0.06,0 -0.11,0 -0.17,0c-5.72,0 -10.41,4.59 -10.5,10.34c-0.09,5.8 4.54,10.57 10.34,10.66c0.95,0.01 6.78,0.1 15.64,0.21l0,26.12l-15.48,0c-5.8,0 -10.5,4.7 -10.5,10.5s4.7,10.5 10.5,10.5l15.48,0l0,74.89c0,5.8 4.7,10.5 10.5,10.5s10.5,-4.7 10.5,-10.5l0,-74.9l109.39,0c5.8,0 10.5,-4.7 10.5,-10.5s-4.7,-10.5 -10.5,-10.5l-109.39,0l0,-25.88c32.67,0.31 78.53,0.51 100.37,-0.46zm-100.37,-185.33c22.81,-0.21 76.99,-0.61 99.05,0.1c23.92,0.77 79.55,10.31 79.55,82.1c0,52.17 -26.63,79.82 -79.16,82.16c-21.17,0.94 -66.91,0.74 -99.44,0.43l0,-164.79z"})))}function S(e){var t=e.children,a=e.value,n=e.index,i=(0,p.Z)(e,["children","value","index"]);return h.createElement("div",(0,o.Z)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),a===n&&h.createElement("div",null,t))}function R(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function O(e){return e.split("/")[3]}S.propTypes={children:k().node,index:k().any.isRequired,value:k().any.isRequired};var D=function(e){(0,l.Z)(x,e);var t,a,p=(t=x,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(a){var i=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function x(e){var t;return(0,n.Z)(this,x),t=p.call(this,e),(0,c.Z)((0,s.Z)(t),"_isMounted",!1),(0,c.Z)((0,s.Z)(t),"swiper",null),(0,c.Z)((0,s.Z)(t),"startMove",0),(0,c.Z)((0,s.Z)(t),"changeTab",(function(e,a){t.setState({itemTab:a})})),console.log(t.props.item),t.state={item:t.props.item?t.props.item:[],is_load:!1,count:0,city_name:t.props.item?"":e.match.params.cityName,itemLink:t.props.item?"":e.match.params.itemLink,title:"",description:"",itemTab:0},t.props.item||b.Z.setCity(e.match.params.cityName),t}return(0,i.Z)(x,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,(0,Z.EH)((function(){if(e._isMounted){var t=b.Z.getAllItems().find((function(t){return t.link==e.state.itemLink}));if(t){e.setState({item:t}),0==t.items.length&&3!==parseInt(t.type)&&4!==parseInt(t.type)&&t.items.push({kkal:t.kkal,protein:t.protein,fat:t.fat,carbohydrates:t.carbohydrates,name:""}),e.setState({is_load:!0});var a=b.Z.getItems().filter((function(e){return e.item_id==e.id}))[0];e.setState({count:a?a.count:0})}}})),this.props.item){x.fetchData("/"+this.state.city_name+"/menu/"+this.state.itemLink).then((function(t){e.setState({title:t.page.title,description:t.page.description})})),0==this.state.item.items.length&&3!==parseInt(this.state.item.type)&&4!==parseInt(this.state.item.type)&&this.state.item.items.push({kkal:this.state.item.kkal,protein:this.state.item.protein,fat:this.state.item.fat,carbohydrates:this.state.item.carbohydrates,name:""}),this.setState({is_load:!0});var t=b.Z.getItems().find((function(t){return t.item_id==e.state.item.id}));this.setState({count:t?t.count:0})}this.props.item||(document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),b.Z.setPage("item"))}},{key:"add",value:function(){var e=b.Z.AddItem(this.state.item.id);this.setState({count:e})}},{key:"minus",value:function(){var e=b.Z.MinusItem(this.state.item.id);this.setState({count:e})}},{key:"render",value:function(){return this.state.is_load?h.createElement("div",null,h.createElement(w.q,null,h.createElement("title",null,this.state.title),h.createElement("meta",{name:"description",content:this.state.description})),h.createElement(f.Z,{xsDown:!0},h.createElement(d.Z,{container:!0,className:"MainItem mainContainer",style:{paddingLeft:"6%",paddingRight:"6%"}},h.createElement(d.Z,{item:!0,xs:6,style:{paddingRight:12,display:"flex",alignItems:"center",paddingTop:60}},h.createElement("picture",null,h.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+this.state.item.img_new+"600х400.webp?"+this.state.item.img_new_update,type:"image/webp"}),h.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.item.img_new+"600х400.jpg?"+this.state.item.img_new_update,alt:this.state.item.name,title:this.state.item.name,style:{minHeight:150}}))),h.createElement(d.Z,{item:!0,xs:6,style:{paddingLeft:12,position:"relative"}},h.createElement(g.Z,{variant:"h5",component:"h1"},this.state.item.name),h.createElement(g.Z,{variant:"h5",className:"OtherMiniPopover",component:"span"},this.state.item.info_weight),h.createElement(C.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0,paddingTop:10},elevation:0},h.createElement(M.Z,{"aria-label":"simple tabs example",className:"itemTabs",value:this.state.itemTab,onChange:this.changeTab.bind(this),style:{justifyContent:"center"}},h.createElement(T.Z,(0,o.Z)({label:"Состав"},R(0),{disableRipple:!0})),h.createElement(T.Z,(0,o.Z)({label:"Пищевая ценность"},R(1),{disableRipple:!0})),0==this.state.item.allergens.length?null:h.createElement(T.Z,(0,o.Z)({label:"Аллергены"},R(2),{disableRipple:!0})))),h.createElement(S,{value:this.state.itemTab,index:1,style:{width:"100%",marginTop:10,marginBottom:15}},h.createElement("div",{style:{maxHeight:250,overflow:"auto"},className:1==this.state.item.items.length?"MainItemPopover tab MainItemPopoverOne":"MainItemPopover tab MainItemPopoverLot"},h.createElement("table",null,h.createElement("tbody",null,h.createElement("tr",null,h.createElement("td",null,h.createElement(g.Z,{variant:"h5",className:"OtherMiniPopover",component:"span"},"Пищевая ценность на 100 г"))),this.state.item.items.map((function(e,t){return h.createElement("tr",{key:t},h.createElement("td",null,h.createElement("div",{className:"NamePopover"},h.createElement(g.Z,{variant:"h5",component:"span"},e.name)),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Белки:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.protein," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Жиры:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.fat," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Углеводы:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.carbohydrates," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Энерг. ценность:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.kkal," ккал"))))})))))),h.createElement(S,{value:this.state.itemTab,index:0,style:{marginTop:10,marginBottom:15}},this.state.item.items.length>1?h.createElement("div",{style:{maxHeight:300,overflowY:"auto",overflowX:"hidden"}},this.state.item.items.map((function(e,t){return h.createElement("div",{key:t,style:{display:"flex",flexDirection:"row",alignItems:"center"}},h.createElement("picture",{style:{height:"auto",width:100,display:"table"}},h.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+e.img_new+"300х200.webp?"+e.img_new_update,type:"image/webp"}),h.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+e.img_new+"300х200.jpg?"+e.img_new_update,alt:e.name,title:e.name,style:{height:"auto",width:65}})),h.createElement("div",{className:"itemMiniText"},h.createElement(g.Z,{variant:"h5",component:"span",className:"dopItemName"},e.name),h.createElement(g.Z,{variant:"h5",component:"span",className:"ItemDesc"},e.tmp_desc)))}))):h.createElement(g.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc"},this.state.item.tmp_desc)),h.createElement(S,{value:this.state.itemTab,index:2},"Аллергены"),h.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",position:"absolute",bottom:-30,width:"65%"}},h.createElement("div",{className:"newBTN",onClick:this.add.bind(this)},h.createElement(g.Z,{variant:"h5",component:"span",className:"ItemPriceValue",style:{paddingLeft:5,paddingBottom:2}},0==parseInt(this.state.count)?parseInt(this.state.item.price):parseInt(this.state.item.price)*parseInt(this.state.count)),h.createElement(B,{viewBox:"0 0 600 300",width:"20"}),h.createElement(_.Z,{color:"inherit"})),h.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count",style:{border:"none"}},h.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},h.createElement(E.G,{icon:y.Kl4,style:{fontSize:"1rem"}})),h.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},h.createElement(g.Z,{component:"span",className:"CardCountItem",style:{fontSize:"1.2rem"}},this.state.count)),h.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},h.createElement(E.G,{icon:y.r8p,style:{fontSize:"1rem"}}))))))),h.createElement(f.Z,{smUp:!0},h.createElement(d.Z,{container:!0,className:"MainItem mainContainer",style:{paddingLeft:"4%",paddingRight:"4%",height:"100vh"}},h.createElement(d.Z,{item:!0,xs:12,style:{paddingRight:12}},h.createElement("picture",{id:"forSwiper"},h.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+this.state.item.img_new+"600х400.webp?"+this.state.item.img_new_update,type:"image/webp"}),h.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.item.img_new+"600х400.jpg?"+this.state.item.img_new_update,alt:this.state.item.name,title:this.state.item.name,style:{height:"auto",width:"100%",paddingTop:20}})),h.createElement(g.Z,{variant:"h5",component:"h1",style:{textAlign:"center"}},this.state.item.name)),h.createElement(d.Z,{item:!0,xs:12,style:{position:"relative"}},h.createElement(C.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},h.createElement(M.Z,{"aria-label":"simple tabs example",className:"itemTabs",value:this.state.itemTab,onChange:this.changeTab.bind(this),style:{justifyContent:"center"}},h.createElement(T.Z,(0,o.Z)({label:"Состав"},R(0),{disableRipple:!0})),h.createElement(T.Z,(0,o.Z)({label:"Пищевая ценность"},R(1),{disableRipple:!0})),0==this.state.item.allergens.length?null:h.createElement(T.Z,(0,o.Z)({label:"Аллергены"},R(2),{disableRipple:!0})))),h.createElement(S,{value:this.state.itemTab,index:1,style:{width:"100%",marginTop:10,marginBottom:15,minHeight:"30vh"}},h.createElement("div",{style:{maxHeight:"30vh",height:"100%",overflow:"auto"},className:1==this.state.item.items.length?"MainItemPopover tab MainItemPopoverOne":"MainItemPopover tab MainItemPopoverLot"},h.createElement("table",null,h.createElement("tbody",null,this.state.item.info_weight.length>0?h.createElement("tr",null,h.createElement("td",null,h.createElement(g.Z,{variant:"h5",className:"OtherMiniPopover",component:"span"},"Вес: ",this.state.item.info_weight))):null,h.createElement("tr",null,h.createElement("td",null,h.createElement(g.Z,{variant:"h5",className:"OtherMiniPopover",component:"span"},"Пищевая ценность на 100 г"))),this.state.item.items.map((function(e,t){return h.createElement("tr",{key:t},h.createElement("td",null,h.createElement("div",{className:"NamePopover"},h.createElement(g.Z,{variant:"h5",component:"span"},e.name)),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Белки:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.protein," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Жиры:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.fat," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Углеводы:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.carbohydrates," г")),h.createElement("div",{className:"OtherPopover"},h.createElement(g.Z,{variant:"h5",component:"span"},"Энерг. ценность:"),h.createElement(g.Z,{variant:"h5",component:"span"},e.kkal," ккал"))))})))))),h.createElement(S,{value:this.state.itemTab,index:0,style:{marginTop:10,marginBottom:15,minHeight:"30vh"}},this.state.item.items.length>1?h.createElement("div",{style:{maxHeight:"30vh",height:"100%",overflowY:"auto",overflowX:"hidden",position:"relative"}},this.state.item.items.map((function(e,t){return h.createElement("div",{key:t,style:{display:"flex",flexDirection:"row",alignItems:"center",margin:"10px 0px"}},h.createElement("picture",{style:{height:"auto",width:70,display:"table"}},h.createElement("source",{srcSet:"https://storage.yandexcloud.net/site-img/"+e.img_new+"300х200.webp?"+e.img_new_update,type:"image/webp"}),h.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+e.img_new+"300х200.jpg?"+e.img_new_update,alt:e.name,title:e.name,style:{height:"auto",width:"100%"}})),h.createElement("div",{className:"itemMiniText",style:{overflow:"hidden",flexWrap:"wrap",paddingRight:15}},h.createElement(g.Z,{variant:"h5",component:"span",className:"dopItemName",style:{width:"100%"}},e.name),h.createElement(g.Z,{variant:"h5",component:"span",className:"ItemDesc",style:{width:"100%",wordWrap:"normal"}},e.tmp_desc)))}))):h.createElement("div",{style:{maxHeight:"30vh",height:"100%",overflow:"auto"}},h.createElement(g.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc"},this.state.item.tmp_desc))),h.createElement(S,{value:this.state.itemTab,index:2},"Аллергены"),h.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},h.createElement("div",{className:"newBTN",onClick:this.add.bind(this)},h.createElement(g.Z,{variant:"h5",component:"span",className:"ItemPriceValue",style:{paddingLeft:5}},0==parseInt(this.state.count)?parseInt(this.state.item.price):parseInt(this.state.item.price)*parseInt(this.state.count)),h.createElement(B,{viewBox:"0 0 600 300",width:"20"}),h.createElement(_.Z,{color:"inherit"})),h.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count",style:{border:"none"}},h.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},h.createElement(E.G,{icon:y.Kl4,style:{fontSize:"1rem"}})),h.createElement(u.Z,{variant:"contained",className:"BtnCardMain"},h.createElement(g.Z,{component:"span",className:"CardCountItem"},this.state.count)),h.createElement(u.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},h.createElement(E.G,{icon:y.r8p,style:{fontSize:"1rem"}})))))))):h.createElement(d.Z,{container:!0,spacing:3,className:"MainItem mainContainer"},h.createElement(d.Z,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},h.createElement("div",{style:{width:200,height:30,backgroundColor:"#e5e5e5"}})),h.createElement(d.Z,{item:!0,xs:6},h.createElement("div",{style:{width:400,height:400,backgroundColor:"#e5e5e5"}})),h.createElement(d.Z,{item:!0,xs:6},h.createElement("div",{style:{width:500,height:60,backgroundColor:"#e5e5e5"}}),h.createElement("div",{style:{width:500,height:30,backgroundColor:"#e5e5e5"}}),h.createElement("div",{style:{width:500,height:30,backgroundColor:"#e5e5e5"}})))}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),item:O(e),page:"item"};return N()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:P.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page,cats:t.cats,allItems:t.allItems}}})).catch((function(e){console.log(e)}))}}]),x}(h.Component)}}]);
//# sourceMappingURL=660.86e6105c50c2630d5a68.js.map