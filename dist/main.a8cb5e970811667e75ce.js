(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[179],{9430:(e,t,n)=>{"use strict";n.d(t,{g:()=>T});var r=n(6610),i=n(5991),o=n(3349),a=n(379),s=n(6070),c=n(7608),l=n(6156),u=n(7294),m=n(5977),p=n(3727),h=n(684),d=n(1749),f=n(2318),y=n(2613),v=n(150),_=n(6282),g=n(8949),I=n(7625),b=n(1417);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var E=(0,h.ZP)({resolved:{},chunkName:function(){return"home"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(660),n.e(177)]).then(n.bind(n,7227))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 7227}}),x=((0,h.ZP)({resolved:{},chunkName:function(){return"item"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(660),n.e(178)]).then(n.bind(n,7660))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 7660}}),(0,h.ZP)({resolved:{},chunkName:function(){return"contact"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(631)]).then(n.bind(n,6068))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 6068}})),N=(0,h.ZP)({resolved:{},chunkName:function(){return"actii"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(158)]).then(n.bind(n,7173))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 7173}}),Z=(0,h.ZP)({resolved:{},chunkName:function(){return"profile"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(845)]).then(n.bind(n,3858))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 3858}}),S=(0,h.ZP)({resolved:{},chunkName:function(){return"cart"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(511)]).then(n.bind(n,1072))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 1072}}),A=(0,h.ZP)({resolved:{},chunkName:function(){return"pageAbout"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(147)]).then(n.bind(n,6546))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 6546}}),P=(0,h.ZP)({resolved:{},chunkName:function(){return"pageJob"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(831)]).then(n.bind(n,8716))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 8716}}),C=(0,h.ZP)({resolved:{},chunkName:function(){return"pageInstPay"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(284)]).then(n.bind(n,3407))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 3407}}),w=(0,h.ZP)({resolved:{},chunkName:function(){return"pageOferta"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(669)]).then(n.bind(n,4025))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 4025}}),O=(0,h.ZP)({resolved:{},chunkName:function(){return"pagePolitika"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(761)]).then(n.bind(n,2815))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 2815}}),D=(0,h.ZP)({resolved:{},chunkName:function(){return"header"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(216),n.e(19)]).then(n.bind(n,3107))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function(e){var t=this.resolve(e);return n(t)},resolve:function(){return 3107}}),z=n(7563),q={itemsStore:_.Z};function L(e){var t=e.code,n=e.children;return u.createElement(m.AW,{render:function(e){var r=e.staticContext;return r&&(r.status=t),n}})}function R(){return u.createElement(L,{code:404},u.createElement(d.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},u.createElement(d.Z,{item:!0,xs:12},u.createElement(f.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}var J=function(e){(0,a.Z)(n,e);var t=k(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"componentDidMount",(function(){(0,g.EH)((function(){i.setState({cityName:_.Z.getCity()}),i.loadPageInfo()}))})),i.state={soc_link:null,cityName:i.props.cityName,is_load:!1},i}return(0,i.Z)(n,[{key:"loadPageInfo",value:function(){var e=this;_.Z.getCity()&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z.stringify({type:"get_page_info",city_id:_.Z.getCity(),page:"info"})}).then((function(e){return e.json()})).then((function(t){e.setState({soc_link:t.soc_link,is_load:!0})})).catch((function(e){}))}},{key:"render",value:function(){return u.createElement("footer",{className:"footer"},u.createElement(d.Z,{container:!0,className:"mainContainer"},u.createElement(d.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12,className:"copy"},u.createElement(f.Z,{variant:"body1"},"© Жако 2017 - ",(new Date).getFullYear())),u.createElement(d.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},u.createElement(p.OL,{to:"/"+this.state.cityName+"/about",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"О Компании")),u.createElement(p.OL,{to:"/"+this.state.cityName+"/jobs",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"Вакансии")),u.createElement(p.OL,{to:"/"+this.state.cityName+"/publichnaya-oferta",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"Публичная оферта"))),u.createElement(d.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},u.createElement(p.OL,{to:"/"+this.state.cityName+"/politika-konfidencialnosti",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"Политика конфиденциальности")),u.createElement(p.OL,{to:"/"+this.state.cityName+"/contact",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"Доставка и контакты")),u.createElement(p.OL,{to:"/"+this.state.cityName+"/instpayorders",style:{textDecoration:"none"}},u.createElement(f.Z,{variant:"body1"},"Правила оплаты товаров"))),this.state.is_load?u.createElement(d.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12,className:"socIcons"},this.state.soc_link&&this.state.soc_link.link_fb?u.createElement(p.OL,{to:{pathname:this.state.soc_link.link_fb},target:"_blank",style:{textDecoration:"none"}},u.createElement(I.G,{icon:b.AYu,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_inst?u.createElement(p.OL,{to:{pathname:this.state.soc_link.link_inst},target:"_blank",style:{textDecoration:"none"}},u.createElement(I.G,{icon:b.Zzi,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_ok?u.createElement(p.OL,{to:{pathname:this.state.soc_link.link_ok},target:"_blank",style:{textDecoration:"none"}},u.createElement(I.G,{icon:b.eSE,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_vk?u.createElement(p.OL,{to:{pathname:this.state.soc_link.link_vk},target:"_blank",style:{textDecoration:"none"}},u.createElement(I.G,{icon:b.iD2,style:{fontSize:"2rem",padding:10}})):null,u.createElement(p.OL,{to:{pathname:"https://t.me/jacofood"},target:"_blank",style:{textDecoration:"none"}},u.createElement(I.G,{icon:b.IKq,style:{fontSize:"2rem",padding:10}}))):null))}}]),n}(u.Component),T=function(e){(0,a.Z)(n,e);var t=k(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"componentDidMount",(function(){(0,g.EH)((function(){i.setState({activePage:_.Z.getPage()}),i.setState({cityName:_.Z.getCity()})}))})),console.log(i.props),console.log(e),i.state={categoryItems:[],cartItems:[],activePage:"",is_load:!1,openCity:!1,cityName:"",testData:[1,2,3,4,5,6,7,8,9],cityList:[],openLogin:!1,userLogin:"",userLoginFormat:"",userCode:"",stage_1:!0,stage_2:!1,timerSMS:59,errPhone:"",errSMS:"",userName:"",soc_link:null},i}return(0,i.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.activePage!==t.activePage||this.state.cityName!==t.cityName}},{key:"render",value:function(){return u.createElement(v.zt,q,u.createElement("div",{className:"home"},u.createElement(D,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link}),u.createElement(m.rs,null,u.createElement(m.AW,{path:"/:cityName/contact",exact:!0,component:x}),u.createElement(m.AW,{path:"/:cityName/actii",exact:!0,component:N}),u.createElement(m.AW,{path:"/:cityName/menu",exact:!0},u.createElement(E,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),u.createElement(m.AW,{path:"/:cityName",exact:!0},u.createElement(E,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),u.createElement(m.AW,{path:"/:cityName/item/:id",exact:!0},u.createElement(E,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),u.createElement(m.AW,{exact:!0,path:"/:cityName/profile/",component:Z}),u.createElement(m.AW,{path:"/:cityName/menu/:itemLink",exact:!0},u.createElement(E,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),u.createElement(m.AW,{path:"/:cityName/cart",exact:!0,component:S}),u.createElement(m.AW,{path:"/:cityName/about",exact:!0,component:A}),u.createElement(m.AW,{path:"/:cityName/jobs",exact:!0,component:P}),u.createElement(m.AW,{path:"/:cityName/instpayorders",exact:!0,component:C}),u.createElement(m.AW,{path:"/:cityName/publichnaya-oferta",exact:!0,component:w}),u.createElement(m.AW,{path:"/:cityName/politika-konfidencialnosti",exact:!0,component:O}),u.createElement(m.AW,{path:"/"},u.createElement(m.l_,{push:!0,to:"/togliatti"})),u.createElement(m.AW,{component:R})),"cart"==this.state.activePage?u.createElement(y.Z,{lgUp:!0},u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:171,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:168,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:165,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:162,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:159,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:156,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:153,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:150,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:147,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:144,zIndex:0,backgroundColor:"#bababa",opacity:.1}})):u.createElement(y.Z,{lgUp:!0},u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:72,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:69,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:66,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:63,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:60,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:57,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:54,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:51,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:48,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),u.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:45,zIndex:0,backgroundColor:"#bababa",opacity:.1}})),u.createElement(J,{cityName:this.props.globalState.city})))}}]),n}(u.Component)},5404:(e,t,n)=>{"use strict";var r=n(7294),i=n(3935),o=n(3727),a=n(684),s=n(9430);(0,a.TA)((function(){i.hydrate(r.createElement(o.VK,null,r.createElement(s.g,{globalState:GLOBAL_STATE})),document.getElementById("app"))}))},6282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(5061),i=n(6610),o=n(5991),a=n(6156),s=n(8949),c=n(381),l=n.n(c),u=n(7563),m=new(function(){function e(){var t=this;if((0,i.Z)(this,e),(0,a.Z)(this,"items",""),(0,a.Z)(this,"itemsPromo",""),(0,a.Z)(this,"allItems",""),(0,a.Z)(this,"allItemsCat",""),(0,a.Z)(this,"allItemsCatNew",""),(0,a.Z)(this,"banners",""),(0,a.Z)(this,"AllPrice",0),(0,a.Z)(this,"sum_div",0),(0,a.Z)(this,"cityName",""),(0,a.Z)(this,"cityNameRU",""),(0,a.Z)(this,"promo",null),(0,a.Z)(this,"userToken",null),(0,a.Z)(this,"userName",""),(0,a.Z)(this,"activePage",""),(0,a.Z)(this,"need_dops",""),(0,a.Z)(this,"free_items",""),(0,a.Z)(this,"cart_data",""),(0,a.Z)(this,"setSumDiv",(function(e){t.sum_div=parseInt(e)})),(0,a.Z)(this,"setDops",(function(e){t.need_dops=JSON.stringify(e)})),(0,a.Z)(this,"setFreeItems",(function(e){t.free_items=JSON.stringify(e)})),(0,a.Z)(this,"setCityRU",(function(e){t.cityNameRU=e})),(0,a.Z)(this,"setCity",(function(e){t.cityName=e})),(0,a.Z)(this,"setAllPrice",(function(e){t.AllPrice=e})),(0,a.Z)(this,"setPage",(function(e){t.activePage=e})),(0,a.Z)(this,"setToken",(function(e,n){t.userToken=e,t.setUserName(n),"undefined"!=typeof window&&localStorage.setItem("token",e)})),(0,a.Z)(this,"setPromo",(function(e,n){t.promo=e,localStorage.setItem("promo_name",n)})),(0,a.Z)(this,"setBanners",(function(e){t.banners=JSON.stringify(e)})),(0,a.Z)(this,"setItemsPromo",(function(e){t.itemsPromo=JSON.stringify(e)})),(0,a.Z)(this,"setAllItemsCat",(function(e){t.allItemsCat=JSON.stringify(e)})),(0,a.Z)(this,"setAllItemsCatNew",(function(e){t.allItemsCatNew=JSON.stringify(e)})),(0,a.Z)(this,"setItems",(function(e){var n=0,r=0,i=t.getItemsPromo();if(r=e.reduce((function(e,t){return e+parseInt(t.all_price)}),n),n=0,r+=i.reduce((function(e,t){return e+parseInt(t.all_price)}),n),t.setAllPrice(r),t.items=JSON.stringify(e),"undefined"!=typeof window){var o=e.filter((function(e){return e.count>0}));o=JSON.stringify(o),localStorage.setItem("my_cart",o)}})),(0,a.Z)(this,"saveCartData",(function(e){var n=JSON.stringify(e);t.cart_data=n,"undefined"!=typeof window&&localStorage.setItem("cartData",n)})),(0,a.Z)(this,"setAllItems",(function(e){t.allItems=JSON.stringify(e)})),"undefined"!=typeof window){if(localStorage.getItem("my_cart")){var n=JSON.parse(localStorage.getItem("my_cart")),r=[];n.forEach((function(e){r.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(e.one_price),all_price:parseInt(e.one_price)*parseInt(e.count)})})),this.setItems(r)}localStorage.getItem("token")&&this.setToken(localStorage.getItem("token")),localStorage.getItem("cartData")&&(this.cartData=localStorage.getItem("cartData")),localStorage.getItem("promo_name")&&setTimeout((function(){t.getInfoPromo(localStorage.getItem("promo_name"))}),300)}(0,s.ky)(this)}return(0,o.Z)(e,[{key:"getSumDiv",value:function(){return this.sum_div}},{key:"getDops",value:function(){return 0==this.need_dops.length?[]:JSON.parse(this.need_dops,!0)}},{key:"getFreeItems",value:function(){return 0==this.free_items.length?[]:JSON.parse(this.free_items,!0)}},{key:"getCityRU",value:function(){return this.cityNameRU&&this.cityNameRU.length>0?this.cityNameRU:"Город"}},{key:"getCity",value:function(){return this.cityName}},{key:"getAllPrice",value:function(){return this.AllPrice}},{key:"getPage",value:function(){return this.activePage}},{key:"getUserName",value:function(){return this.userName&&this.userName.length>0?this.userName:""}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getToken",value:function(){return this.userToken}},{key:"getInfoPromo",value:function(e){fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u.stringify({type:"get_promo_web",city_id:m.getCity(),promo_name:e})}).then((function(e){return e.json()})).then((function(t){m.setPromo(JSON.stringify(t),e),!1===m.checkPromo().st&&localStorage.removeItem("promo_name")}))}},{key:"getPromo",value:function(){return JSON.parse(this.promo,!0)}},{key:"checkPromo",value:function(){var e=m.getCartData();m.setItemsPromo([]);var t=0,n=0,r=e.orderTimes&&1!=parseInt(e.orderTimes)?e.orderPredDay+" "+e.orderPredTime:0,i=this.getPromo(),o=this.getItems(),a=this.getAllItems(),s=[];o.forEach((function(e,t){s.push({name:e.name,item_id:e.item_id,count:e.count,one_price:e.one_price,all_price:parseInt(e.one_price)*parseInt(e.count)})})),o=s,this.setItems(o);var c=[];n=o.reduce((function(e,t){return e+parseInt(t.all_price)}),t);var u,p,h=0,d=0,f=0;(e.orderType||0==e.orderType)&&(h=null!==(u=parseInt(e.orderType))&&void 0!==u?u:0,d=e.orderAddr?parseInt(e.orderAddr.point_id):0,f=null!==(p=parseInt(e.orderPic))&&void 0!==p?p:0);var y="",v="",_="";if(0==r?(y=l()(new Date).format("YYYY-MM-DD"),v=l()(new Date).format("H:mm"),_=parseInt(l()(new Date).format("E"))):(y=l()(r).format("YYYY-MM-DD"),v=l()(r).format("H:mm"),_=parseInt(l()(r).format("E"))),i){if(!i.status_promo)return{st:!1,text:i.promo_text.false};if(i.limits.date.min&&i.limits.date.max&&!(y>=i.limits.date.min&&y<=i.limits.date.max))return{st:!1,text:i.promo_text.false};if(0!=i.limits.time.min&&0!=i.limits.time.max&&!(v>=i.limits.time.min&&v<=i.limits.time.max))return{st:!1,text:i.promo_text.false};if(0!=i.limits.point_id&&!(0==h&&d==i.limits.point_id||1==h&&f==i.limits.point_id))return{st:!1,text:"Адрес для доставки или самовывоза указан некорректно. Проверьте правильность введённых данных."};if(!(0==i.limits.summ.min&&0==i.limits.summ.max||n>=i.limits.summ.min&&(i.limits.summ.max>=n||0==i.limits.summ.max)))return{st:!1,text:"Общая сумма вашего заказа превышает допустимую стоимость для применения промокода."};if(i.limits.dows&&0==parseInt(i.limits.dows[_]))return{st:!1,text:"Указанный вами день недели недоступен для применения промокода. Пожалуйста, выберите другую дату."};if(i.limits.type_order&&!(1==parseInt(i.limits.type_order)||3==parseInt(i.limits.type_order)&&0==h||2==parseInt(i.limits.type_order)&&1==h))return{st:!1,text:"Тип заказа не применим для данного промокода. Пожалуйста, отредактируйте заказ."};if(i.limits.only_kassa&&1==parseInt(i.limits.only_kassa))return{st:!1,text:"Указанный вами промокод действителен только при оплате на кассе. Пожалуйста, посетите для оформления заказа ближайшее к вам кафе."};if(i.limits.items.length>0){var g=0;if(i.limits.items.map((function(e){s.find((function(t){return t.item_id==e}))&&g++})),i.limits.items.length!=g)return{st:!1,text:i.promo_text.false}}var I=0,b=0,k=null;return 1==parseInt(i.promo_action)?(1==parseInt(i.sale.cat_sale)&&(b=parseInt(i.sale.count_sale),o.forEach((function(e,t){k=a.find((function(t){return t.id==e.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&i.sale.sale_action.forEach((function(n){parseInt(e.item_id)==parseInt(n)&&(1==parseInt(i.sale.type_price)?b>0&&((I=parseInt(e.one_price)*parseInt(e.count)-parseInt(b))<=0&&(I=1),b-=parseInt(e.one_price)*parseInt(e.count),o[t].all_price=I):(I=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(b),o[t].all_price=parseInt(I)))}))}))),2==parseInt(i.sale.cat_sale)&&(b=parseInt(i.sale.count_sale),o.forEach((function(e,t){k=a.find((function(t){return t.id==e.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&i.sale.sale_action.forEach((function(n){parseInt(k.cat_id)==parseInt(n)&&(1==parseInt(i.sale.type_price)?b>0&&((I=parseInt(e.one_price)*parseInt(e.count)-parseInt(b))<=0&&(I=1),b-=parseInt(e.one_price)*parseInt(e.count),o[t].all_price=I):(I=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(b),o[t].all_price=parseInt(I)))}))}))),3==parseInt(i.sale.cat_sale)&&(b=parseInt(i.sale.count_sale),o.forEach((function(e,t){k=a.find((function(t){return t.id==e.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&(1==parseInt(i.sale.type_price)?b>0&&((I=parseInt(e.one_price)*parseInt(e.count)-parseInt(b))<=0&&(I=1),b-=parseInt(e.one_price)*parseInt(e.count),o[t].all_price=I):(I=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(b),o[t].all_price=parseInt(I)))}))),t=0,n=0,n=o.reduce((function(e,t){return e+t.all_price}),t),m.setAllPrice(n),{st:!0,text:i.promo_text.true}):(2==parseInt(i.promo_action)&&(i.items_add.forEach((function(e){k=a.find((function(t){return t.id==e.item_id})),c.push({item_id:e.item_id,count:e.count,one_price:k.price,all_price:e.price})})),t=0,n=0,n=o.reduce((function(e,t){return e+parseInt(t.all_price)}),t),t=0,n+=c.reduce((function(e,t){return e+parseInt(t.all_price)}),t),m.setItemsPromo(c),m.setAllPrice(n)),3==parseInt(i.promo_action)&&i.items_on_price.length>0&&(o.forEach((function(e,t){i.items_on_price.forEach((function(n){parseInt(e.item_id)==parseInt(n.id)&&(o[t].new_one_price=parseInt(n.price),o[t].all_price=parseInt(n.price)*parseInt(e.count))}))})),t=0,n=0,n=o.reduce((function(e,t){return e+parseInt(t.all_price)}),t),m.setAllPrice(n)),this.setItems(o),{st:!0,text:i.promo_text.true})}return{st:!1,text:i.promo_text.false,test:i}}},{key:"getBanners",value:function(){return 0==this.banners.length?[]:JSON.parse(this.banners,!0)}},{key:"getItemsPromo",value:function(){return 0==this.itemsPromo.length?[]:JSON.parse(this.itemsPromo,!0)}},{key:"getAllItemsCat",value:function(){return 0==this.allItemsCat.length?[]:JSON.parse(this.allItemsCat,!0)}},{key:"getAllItemsCatNew",value:function(){return 0==this.allItemsCatNew.length?[]:JSON.parse(this.allItemsCatNew,!0)}},{key:"getCartData",value:function(){if("undefined"!=typeof window)return localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]}},{key:"getItems",value:function(){return 0==this.items.length?[]:JSON.parse(this.items,!0)}},{key:"getAllItems",value:function(){return 0==this.allItems.length?[]:JSON.parse(this.allItems,!0)}},{key:"AddItem",value:function(e){var t=m.getItems(),n=m.getAllItems(),r=m.getPromo();if(!(n.length>0))return 0;var i=t.find((function(t){return t.item_id==e})),o=0;i&&(o=parseInt(i.count));var a=n.find((function(t){return t.id==e}));if(a){var s=o+1,c=parseInt(a.price),l=m.check_max_count(parseInt(e));return parseInt(l)>=s?(t.some((function(t){return t.item_id==e}))?t.forEach((function(n,r){n.item_id==e&&(t[r].count=s,t[r].all_price=s*c)})):t.push({name:a.name,item_id:e,count:s,one_price:c,all_price:s*c}),m.setItems(t),r&&m.checkPromo(),s):s-1}}},{key:"MinusItem",value:function(e){var t=m.getItems(),n=m.getAllItems(),r=m.getPromo();if(n.length>0){var i=t.find((function(t){return t.item_id==e}));if(!i)return 0;var o=n.find((function(t){return t.id==e})),a=parseInt(i.count)-1,s=parseInt(o.price);return a<=0&&(a=0),a>=0&&(t.map((function(n,r){n.item_id==e&&(t[r].count=a,t[r].all_price=a*s)})),m.setItems(t)),r&&m.checkPromo(),a}return 0}},{key:"check_need_dops",value:function(){var e=m.getItems(),t=m.getAllItems();if(!t||0==t.length)return[];var n=0,i=0,o=m.getDops();if(0==o.length)return[];e.forEach((function(e){var r=t.find((function(t){return t.id==e.item_id}));if(!r)return[];14==parseInt(r.cat_id)?n+=parseInt(e.count):14!==parseInt(r.cat_id)&&5!==parseInt(r.cat_id)&&6!==parseInt(r.cat_id)&&7!==parseInt(r.cat_id)&&(i+=parseInt(e.count))}));var a=[];i>0&&0==n&&(a=o.rolls),0==i&&n>0&&(a=o.pizza),i>0&&n>0&&(a=[].concat((0,r.Z)(o.rolls),(0,r.Z)(o.pizza))),0==i&&0==n&&(a=[].concat((0,r.Z)(o.rolls),(0,r.Z)(o.pizza)));var s=[],c=[];return e.forEach((function(e){var n=t.find((function(t){return t.id==e.item_id}));if(!n)return[];7==parseInt(n.cat_id)&&s.push(n)})),s.forEach((function(e){var t=!1;a.forEach((function(n){parseInt(n.id)==parseInt(e.id)&&(t=!0)})),t||c.push(e)})),a=[].concat((0,r.Z)(a),c)}},{key:"check_max_count",value:function(e){var t=[],n=[],i=m.getItems(),o=m.getFreeItems();if(!o)return 99;i.forEach((function(e,r){o.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),n=(0,r.Z)(new Set(n));var a=[];n.forEach((function(e,n){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var n=!1;a.forEach((function(r,i){parseInt(r.item_id)==parseInt(e)&&(n=!0,a[i].count+=t.count_in_cart*t.max_count)})),n||a.push({item_id:parseInt(e),count:t.count_in_cart*t.max_count})}}))}));var s=99;return a.forEach((function(t){parseInt(t.item_id)==parseInt(e)&&(s=parseInt(t.count))})),s}}]),e}());const p=m},8293:(e,t,n)=>{var r={"./ru":1793,"./ru.js":1793};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=8293}},e=>{"use strict";e.O(0,[216],(()=>(5404,e(e.s=5404)))),e.O()}]);
//# sourceMappingURL=main.a8cb5e970811667e75ce.js.map