(()=>{var e,t={4424:(e,t,a)=>{"use strict";var n=a(9297),r=a.n(n),i=a(3935),o=a(3727),s=a(6610),c=a(5991),l=a(3349),m=a(379),d=a(6070),p=a(7608),u=a(6156),h=a(5977),f=a(2122),y=a(1749),v=a(8463),g=a(1907),E=a(9912),_=a(951),Z=a(282),b=a(4837),C=a(2318),I=a(7625),k=a(1436),S=a(6261),N=a(9669),P=a.n(N),x=a(2921),w=a(8949),T=a(381),D=a.n(T),M=a(7563),B=new(function(){function e(){var t=this;if((0,s.Z)(this,e),(0,u.Z)(this,"items",""),(0,u.Z)(this,"itemsPromo",""),(0,u.Z)(this,"allItems",""),(0,u.Z)(this,"allItemsCat",""),(0,u.Z)(this,"banners",""),(0,u.Z)(this,"AllPrice",0),(0,u.Z)(this,"sum_div",0),(0,u.Z)(this,"cityName",""),(0,u.Z)(this,"cityNameRU",""),(0,u.Z)(this,"promo",null),(0,u.Z)(this,"userToken",null),(0,u.Z)(this,"userName",""),(0,u.Z)(this,"activePage",""),(0,u.Z)(this,"need_dops",""),(0,u.Z)(this,"free_items",""),(0,u.Z)(this,"cart_data",""),(0,u.Z)(this,"setSumDiv",(function(e){t.sum_div=parseInt(e)})),(0,u.Z)(this,"setDops",(function(e){t.need_dops=JSON.stringify(e)})),(0,u.Z)(this,"setFreeItems",(function(e){t.free_items=JSON.stringify(e)})),(0,u.Z)(this,"setCityRU",(function(e){t.cityNameRU=e})),(0,u.Z)(this,"setCity",(function(e){t.cityName=e})),(0,u.Z)(this,"setAllPrice",(function(e){t.AllPrice=e})),(0,u.Z)(this,"setPage",(function(e){t.activePage=e})),(0,u.Z)(this,"setToken",(function(e,a){t.userToken=e,t.userName=a,"undefined"!=typeof window&&localStorage.setItem("token",e)})),(0,u.Z)(this,"setPromo",(function(e,a){t.promo=e,localStorage.setItem("promo_name",a)})),(0,u.Z)(this,"setBanners",(function(e){t.banners=JSON.stringify(e)})),(0,u.Z)(this,"setItemsPromo",(function(e){t.itemsPromo=JSON.stringify(e)})),(0,u.Z)(this,"setAllItemsCat",(function(e){t.allItemsCat=JSON.stringify(e)})),(0,u.Z)(this,"setItems",(function(e){var a=0,n=0,r=t.getItemsPromo();if(n=e.reduce((function(e,t){return e+parseInt(t.all_price)}),a),a=0,n+=r.reduce((function(e,t){return e+parseInt(t.all_price)}),a),t.setAllPrice(n),t.items=JSON.stringify(e),"undefined"!=typeof window){var i=e.filter((function(e){return e.count>0}));i=JSON.stringify(i),localStorage.setItem("my_cart",i)}})),(0,u.Z)(this,"saveCartData",(function(e){var a=JSON.stringify(e);t.cart_data=a,"undefined"!=typeof window&&localStorage.setItem("cartData",a)})),(0,u.Z)(this,"setAllItems",(function(e){t.allItems=JSON.stringify(e)})),"undefined"!=typeof window){if(localStorage.getItem("my_cart")){var a=JSON.parse(localStorage.getItem("my_cart")),n=[];a.forEach((function(e){n.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(e.one_price),all_price:parseInt(e.one_price)*parseInt(e.count)})})),this.setItems(n)}localStorage.getItem("token")&&this.setToken(localStorage.getItem("token")),localStorage.getItem("cartData")&&(this.cartData=localStorage.getItem("cartData")),localStorage.getItem("promo_name")&&setTimeout((function(){t.getInfoPromo(localStorage.getItem("promo_name"))}),300)}(0,w.ky)(this)}return(0,c.Z)(e,[{key:"fetchData",value:function(){return console.log("Post.fetchData()"),{title:"my title",description:"my description",body:"my body"}}},{key:"getSumDiv",value:function(){return this.sum_div}},{key:"getDops",value:function(){return 0==this.need_dops.length?[]:JSON.parse(this.need_dops,!0)}},{key:"getFreeItems",value:function(){return 0==this.free_items.length?[]:JSON.parse(this.free_items,!0)}},{key:"getCityRU",value:function(){return this.cityNameRU}},{key:"getCity",value:function(){return this.cityName}},{key:"getAllPrice",value:function(){return this.AllPrice}},{key:"getPage",value:function(){return this.activePage}},{key:"getToken",value:function(){return this.userToken}},{key:"getInfoPromo",value:function(e){fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:M.stringify({type:"get_promo_web",city_id:B.getCity(),promo_name:e})}).then((function(e){return e.json()})).then((function(t){B.setPromo(JSON.stringify(t),e),!1===B.checkPromo().st&&localStorage.removeItem("promo_name")}))}},{key:"getPromo",value:function(){return JSON.parse(this.promo,!0)}},{key:"checkPromo",value:function(){var e=B.getCartData();B.setItemsPromo([]);var t=0,a=0,n=e.orderTimes&&1!=parseInt(e.orderTimes)?e.orderPredDay+" "+e.orderPredTime:0,r=this.getPromo(),i=this.getItems(),o=this.getAllItems(),s=[];i.forEach((function(e,t){s.push({name:e.name,item_id:e.item_id,count:e.count,one_price:e.one_price,all_price:parseInt(e.one_price)*parseInt(e.count)})})),i=s,this.setItems(i);var c=[];(a=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),e.orderType)&&(parseInt(e.orderType),e.orderAddr&&parseInt(e.orderAddr.point_id),parseInt(e.orderPic));var l=D()(n).format("YYYY-MM-DD"),m=D()(n).format("H:mm"),d=parseInt(D()(n).format("E"));if(0==n?(l=D()(new Date).format("YYYY-MM-DD"),m=D()(new Date).format("H:mm"),d=parseInt(D()(new Date).format("E"))):(l=D()(n).format("YYYY-MM-DD"),m=D()(n).format("H:mm"),d=parseInt(D()(n).format("E"))),r){if(!r.status_promo)return{st:!1,text:r.promo_text.false};if(r.limits.date.min&&r.limits.date.max&&!(l>=r.limits.date.min&&l<=r.limits.date.max))return{st:!1,text:"Данный промокод не распространяется на указанный вами день. Попробуйте изменить дату заказа."};if(0!=r.limits.time.min&&0!=r.limits.time.max&&!(m>=r.limits.time.min&&m<=r.limits.time.max))return{st:!1,text:"Введённый вами промокод не может быть применён на указанное время. Попробуйте изменить время заказа."};if(0!=r.limits.point_id&&!(0==type_order&&point_id_dev==r.limits.point_id||1==type_order&&point_id_pic==r.limits.point_id))return{st:!1,text:"Адрес для доставки или самовывоза указан некорректно. Проверьте правильность введённых данных."};if(!(0==r.limits.summ.min&&0==r.limits.summ.max||a>=r.limits.summ.min&&(r.limits.summ.max>=a||0==r.limits.summ.max)))return{st:!1,text:"Общая сумма вашего заказа превышает допустимую стоимость для применения промокода."};if(r.limits.dows&&0==parseInt(r.limits.dows[d]))return{st:!1,text:"Указанный вами день недели недоступен для применения промокода. Пожалуйста, выберите другую дату."};if(r.limits.type_order&&!(1==parseInt(r.limits.type_order)||3==parseInt(r.limits.type_order)&&0==type_order||2==parseInt(r.limits.type_order)&&1==type_order))return{st:!1,text:"Тип заказа не применим для данного промокода. Пожалуйста, отредактируйте заказ."};if(r.limits.only_kassa&&1==parseInt(r.limits.only_kassa))return{st:!1,text:"Указанный вами промокод действителен только при оплате на кассе. Пожалуйста, посетите для оформления заказа ближайшее к вам кафе."};if(r.limits.items.length>0){var p=0;if(r.limits.items.map((function(e){s.find((function(t){return t.item_id==e}))&&p++})),r.limits.items.length!=p)return{st:!1,text:r.promo_text.false}}var u=0,h=0,f=null;return 1==parseInt(r.promo_action)?(1==parseInt(r.sale.cat_sale)&&(h=parseInt(r.sale.count_sale),i.forEach((function(e,t){f=o.filter((function(t){return t.id==e.item_id}))[0],3!=parseInt(f.type)&&4!=parseInt(f.type)&&r.sale.sale_action.forEach((function(a){parseInt(e.item_id)==parseInt(a)&&(1==parseInt(r.sale.type_price)?h>0&&((u=parseInt(e.one_price)*parseInt(e.count)-parseInt(h))<=0&&(u=1),h-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=u):(u=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(h),i[t].all_price=parseInt(u)))}))}))),2==parseInt(r.sale.cat_sale)&&(h=parseInt(r.sale.count_sale),i.forEach((function(e,t){f=cart.allItems[e.item_id],3!=parseInt(f.type)&&4!=parseInt(f.type)&&r.sale.sale_action.forEach((function(a){parseInt(f.cat_id)==parseInt(a)&&(1==parseInt(r.sale.type_price)?h>0&&((u=parseInt(e.one_price)*parseInt(e.count)-parseInt(h))<=0&&(u=1),h-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=u):(u=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(h),i[t].all_price=parseInt(u)))}))}))),3==parseInt(r.sale.cat_sale)&&(h=parseInt(r.sale.count_sale),i.forEach((function(e,t){f=cart.allItems[e.item_id],3!=parseInt(f.type)&&4!=parseInt(f.type)&&(1==parseInt(r.sale.type_price)?h>0&&((u=parseInt(e.one_price)*parseInt(e.count)-parseInt(h))<=0&&(u=1),h-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=u):(u=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(h),i[t].all_price=parseInt(u)))}))),t=0,a=0,a=i.reduce((function(e,t){return e+t.all_price}),t),B.setAllPrice(a),{st:!0}):(2==parseInt(r.promo_action)&&(r.items_add.forEach((function(e){f=o.filter((function(t){return t.id==e.item_id}))[0],c.push({item_id:e.item_id,count:e.count,one_price:f.price,all_price:e.price})})),t=0,a=0,a=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),t=0,a+=c.reduce((function(e,t){return e+parseInt(t.all_price)}),t),console.log("need",a),B.setItemsPromo(c),B.setAllPrice(a)),3==parseInt(r.promo_action)&&r.items_on_price.length>0&&(i.forEach((function(e,t){r.items_on_price.forEach((function(a){parseInt(e.item_id)==parseInt(a.id)&&(i[t].new_one_price=parseInt(a.price),i[t].all_price=parseInt(a.price)*parseInt(e.count))}))})),t=0,a=0,a=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),B.setAllPrice(a)),this.setItems(i),{st:!0,text:r.promo_text.true})}return{st:!1,text:r.promo_text.false,test:r}}},{key:"getBanners",value:function(){return 0==this.banners.length?[]:JSON.parse(this.banners,!0)}},{key:"getItemsPromo",value:function(){return 0==this.itemsPromo.length?[]:JSON.parse(this.itemsPromo,!0)}},{key:"getAllItemsCat",value:function(){return 0==this.allItemsCat.length?[]:JSON.parse(this.allItemsCat,!0)}},{key:"getCartData",value:function(){if("undefined"!=typeof window)return localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]}},{key:"getItems",value:function(){return 0==this.items.length?[]:JSON.parse(this.items,!0)}},{key:"getAllItems",value:function(){return 0==this.allItems.length?[]:JSON.parse(this.allItems,!0)}},{key:"AddItem",value:function(e){var t=B.getItems(),a=B.getAllItems(),n=B.getPromo();if(!(a.length>0))return 0;var r=t.filter((function(t){return t.item_id==e}));r.length>0?r=r[0]:r.count=0;var i=a.filter((function(t){return t.id==e}))[0];if(i){var o=parseInt(r.count)+1,s=i.price,c=B.check_max_count(parseInt(e));return parseInt(c)>=o?(t.some((function(t){return t.item_id==e}))?t.forEach((function(a,n){a.item_id==e&&(t[n].count=o,t[n].all_price=o*s)})):t.push({name:i.name,item_id:e,count:o,one_price:s,all_price:o*s}),B.setItems(t),n&&B.checkPromo(),o):o-1}}},{key:"MinusItem",value:function(e){var t=B.getItems(),a=B.getAllItems(),n=B.getPromo();if(a.length>0){var r=t.find((function(t){return t.item_id==e}));if(!r)return 0;var i=a.find((function(t){return t.id==e})),o=parseInt(r.count)-1,s=i.price;return o>=0&&(o<0&&(o=0),t.map((function(a,n){a.item_id==e&&(t[n].count=o,t[n].all_price=o*s)})),B.setItems(t)),n&&B.checkPromo(),o}return 0}},{key:"check_need_dops",value:function(){var e=B.getItems(),t=B.getAllItems();if(!t||0==t.length)return[];var a=0,n=0,r=B.getDops();if(0==r.length)return[];e.forEach((function(e){var r=t.filter((function(t){return t.id==e.item_id}))[0];if(!r)return[];14==parseInt(r.cat_id)?a+=parseInt(e.count):14!==parseInt(r.cat_id)&&5!==parseInt(r.cat_id)&&6!==parseInt(r.cat_id)&&7!==parseInt(r.cat_id)&&(n+=parseInt(e.count))}));var i=[];n>0&&0==a&&(i=r.rolls),0==n&&a>0&&(i=r.pizza),n>0&&a>0&&(i=[].concat((0,x.Z)(r.rolls),(0,x.Z)(r.pizza))),0==n&&0==a&&(i=[].concat((0,x.Z)(r.rolls),(0,x.Z)(r.pizza)));var o=[],s=[];return e.forEach((function(e){var a=t.filter((function(t){return t.id==e.item_id}))[0];if(!a)return[];7==parseInt(a.cat_id)&&o.push(a)})),o.forEach((function(e){var t=!1;i.forEach((function(a){parseInt(a.id)==parseInt(e.id)&&(t=!0)})),t||s.push(e)})),i=[].concat((0,x.Z)(i),s)}},{key:"check_max_count",value:function(e){var t=[],a=[],n=B.getItems(),r=B.getFreeItems();if(!r)return 99;n.forEach((function(e,n){r.forEach((function(n){parseInt(e.item_id)==parseInt(n.this_item_id)&&(n.count_in_cart=parseInt(e.count),t.push(n),a.push(parseInt(n.item_id)))}))})),a=(0,x.Z)(new Set(a));var i=[];a.forEach((function(e,a){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var a=!1;i.forEach((function(n,r){parseInt(n.item_id)==parseInt(e)&&(a=!0,i[r].count+=t.count_in_cart*t.max_count)})),a||i.push({item_id:parseInt(e),count:t.count_in_cart*t.max_count})}}))}));var o=99;return i.forEach((function(t){parseInt(t.item_id)==parseInt(e)&&(o=parseInt(t.count))})),o}}]),e}());const A=B;var O=a(8623),G=a(5258),L=a(8358),R=a(2285),z=a(2613),j=a(7737),U=a.n(j),W=a(8481),F=a(7812),q=a(8432);const J=react-helmet;var H=a(7563);function K(e){return e.split("/")[3]}function Y(e){var t=r().useState(null),a=(0,W.Z)(t,2),n=a[0],i=a[1],o=Boolean(n),s=o?"ItemInfoPopover":void 0;return 0==e.items.length?null:r().createElement("div",null,r().createElement(F.Z,{"aria-describedby":s,edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){i(e.currentTarget)}},r().createElement(I.G,{icon:k.sqG,style:{fontSize:"1.2rem"}})),r().createElement(q.ZP,{id:s,open:o,anchorEl:n,onClose:function(){i(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r().createElement("div",{className:1==e.items.length?"MainItemPopover MainItemPopoverOne":"MainItemPopover MainItemPopoverLot"},r().createElement("table",null,r().createElement("tbody",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(C.Z,{variant:"h5",className:"OtherMiniPopover",component:"span"},"Пищевая ценность на 100 г"))),e.items.map((function(e,t){return r().createElement("tr",{key:t},r().createElement("td",null,r().createElement("div",{className:"NamePopover"},r().createElement(C.Z,{variant:"h5",component:"span"},e.name)),r().createElement("div",{className:"OtherPopover"},r().createElement(C.Z,{variant:"h5",component:"span"},"Белки:"),r().createElement(C.Z,{variant:"h5",component:"span"},e.protein," г")),r().createElement("div",{className:"OtherPopover"},r().createElement(C.Z,{variant:"h5",component:"span"},"Жиры:"),r().createElement(C.Z,{variant:"h5",component:"span"},e.fat," г")),r().createElement("div",{className:"OtherPopover"},r().createElement(C.Z,{variant:"h5",component:"span"},"Углеводы:"),r().createElement(C.Z,{variant:"h5",component:"span"},e.carbohydrates," г")),r().createElement("div",{className:"OtherPopover"},r().createElement(C.Z,{variant:"h5",component:"span"},"Энерг. ценность:"),r().createElement(C.Z,{variant:"h5",component:"span"},e.kkal," ккал"))))})))))))}var V=function(e){(0,m.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,s.Z)(this,i),t=n.call(this,e),(0,u.Z)((0,l.Z)(t),"_isMounted",!1),t.state={item:t.props.item?t.props.item:[],is_load:!1,count:0,city_name:e.match.params.cityName,itemLink:e.match.params.itemLink,title:"",description:""},A.setCity(e.match.params.cityName),t}return(0,c.Z)(i,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,(0,w.EH)((function(){if(e._isMounted){var t=A.getAllItems().find((function(t){return t.link==e.state.itemLink}));if(t){e.setState({item:t}),0==t.items.length&&3!==parseInt(t.type)&&4!==parseInt(t.type)&&t.items.push({kkal:t.kkal,protein:t.protein,fat:t.fat,carbohydrates:t.carbohydrates,name:""}),e.setState({is_load:!0});var a=A.getItems().filter((function(e){return e.item_id==e.id}))[0];e.setState({count:a?a.count:0})}}})),this.props.item){i.fetchData("/"+this.state.city_name+"/menu/"+this.state.itemLink).then((function(t){e.setState({title:t.page.title,description:t.page.description})})),0==this.state.item.items.length&&3!==parseInt(this.state.item.type)&&4!==parseInt(this.state.item.type)&&this.state.item.items.push({kkal:this.state.item.kkal,protein:this.state.item.protein,fat:this.state.item.fat,carbohydrates:this.state.item.carbohydrates,name:""}),this.setState({is_load:!0});var t=A.getItems().find((function(t){return t.item_id==e.state.item.id}));this.setState({count:t?t.count:0})}this.props.item||(document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),A.setPage("item"))}},{key:"add",value:function(){var e=A.AddItem(this.state.item.id);this.setState({count:e})}},{key:"minus",value:function(){var e=A.MinusItem(this.state.item.id);this.setState({count:e})}},{key:"render",value:function(){return this.state.is_load?r().createElement("div",null,r().createElement(J.Helmet,null,r().createElement("title",null,this.state.title),r().createElement("meta",{name:"description",content:this.state.description})),r().createElement(z.Z,{xsDown:!0},r().createElement(y.Z,{container:!0,className:"MainItem mainContainer"},r().createElement(y.Z,{item:!0,xs:12,style:{paddingBottom:15}},r().createElement(C.Z,{variant:"h5",component:"h1"},this.state.item.name)),r().createElement(y.Z,{item:!0,xs:6,style:{paddingRight:12}},r().createElement("img",{src:"https://newjacofood.ru/src/img/items/"+this.state.item.img_full,alt:this.state.item.name})),r().createElement(y.Z,{item:!0,xs:6,style:{paddingLeft:12}},r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc"},"Состав: "+this.state.item.tmp_desc),this.state.item.info_weight.length>0?r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc ItemOther"},"Вес: "+this.state.item.info_weight," ",r().createElement(Y,{items:this.state.item.items})):null,r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc ItemPrice"},"Цена: "+this.state.item.price," ",r().createElement(I.G,{icon:k.ED2})),0==this.state.count?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.add.bind(this)},"В корзину")):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}})))))),r().createElement(z.Z,{smUp:!0},r().createElement(y.Z,{container:!0,className:"MainItem_mobile"},r().createElement(y.Z,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},r().createElement("img",{src:"https://newjacofood.ru/src/img/items/"+this.state.item.img_full,alt:this.state.item.name})),r().createElement(y.Z,{item:!0,xs:12,className:"MainLine"},r().createElement(C.Z,{variant:"h5",component:"h1"},this.state.item.name),r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc ItemPrice"},this.state.item.price," ",r().createElement(I.G,{icon:k.ED2}))),r().createElement(y.Z,{item:!0,xs:12,className:"SecondLine"},r().createElement(C.Z,{variant:"h5",component:"span",className:"ItemDesc ItemOther"},this.state.item.info_weight),r().createElement(Y,{items:this.state.item.items})),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"ItemDesc"},"Состав: "+this.state.item.tmp_desc)),r().createElement(y.Z,{item:!0,xs:12,className:"BtnLine"},0==this.state.count?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.add.bind(this)},"В корзину")):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}}))))))):r().createElement(y.Z,{container:!0,spacing:3,className:"MainItem mainContainer"},r().createElement(y.Z,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},r().createElement("div",{style:{width:200,height:30,backgroundColor:"#e5e5e5"}})),r().createElement(y.Z,{item:!0,xs:6},r().createElement("div",{style:{width:400,height:400,backgroundColor:"#e5e5e5"}})),r().createElement(y.Z,{item:!0,xs:6},r().createElement("div",{style:{width:500,height:60,backgroundColor:"#e5e5e5"}}),r().createElement("div",{style:{width:500,height:30,backgroundColor:"#e5e5e5"}}),r().createElement("div",{style:{width:500,height:30,backgroundColor:"#e5e5e5"}})))}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),item:K(e),page:"item"};return P()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:H.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),i}(r().Component);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var X=S.W_,$=S.OK,ee=a(7563),te=function(e){return e.preventDefault()},ae=function(e){(0,m.Z)(a,e);var t=Q(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"_isMounted",!1),n.state={item:n.props.data,count:0},n}return(0,c.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=A.getItems().find((function(t){return t.item_id==e.state.item.id}));t&&this.setState({count:t.count}),(0,w.EH)((function(){if(e._isMounted){var t=A.getItems().find((function(t){return t.item_id==e.state.item.id}));t?e.setState({count:t.count}):e.setState({count:0})}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"add",value:function(){this._isMounted&&A.AddItem(this.state.item.id)}},{key:"minus",value:function(){this._isMounted&&A.MinusItem(this.state.item.id)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.count!==t.count}},{key:"render",value:function(){var e=this;return"pc"==this.props.type?r().createElement(v.Z,{elevation:0,className:"CardItem"},r().createElement(E.Z,null,r().createElement(o.OL,{to:"/"+A.getCity()+"/menu/"+this.state.item.link},r().createElement(_.Z,{component:"img",alt:this.state.item.name,image:"https://newjacofood.ru/src/img/items/"+this.state.item.img_full+"?"+this.state.item.img_full_date_update,title:this.state.item.name,style:{minHeight:150}}),r().createElement(E.Z,{style:{padding:"1.2vw"}},r().createElement(C.Z,{className:"CardNameItem",gutterBottom:!0,variant:"h5",component:"span"},this.state.item.name),r().createElement(C.Z,{className:"CardInfoItem",component:"p"},this.state.item.tmp_desc)))),r().createElement(g.Z,{className:"CardAction"},r().createElement(C.Z,{gutterBottom:!0,className:"CardInfoWeiItem",component:"span"},this.state.item.info_weight),r().createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginLeft:0,width:"100%"}},r().createElement("div",null,r().createElement(C.Z,{className:"CardPriceItem",variant:"h5",component:"span"},this.state.item.price," ",r().createElement(I.G,{icon:k.ED2}))),0==this.state.count?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.add.bind(this)},"В корзину")):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{className:"CardCountItem",component:"span"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}})))))):"mobile"==this.props.type?r().createElement(y.Z,{item:!0,container:!0,xs:12,className:"CardItem_mobile"},r().createElement(y.Z,{item:!0,xs:5,sm:5,md:5,xl:5,onClick:function(){return e.props.openItem(e.state.item.id)}},r().createElement(_.Z,{component:"img",alt:this.state.item.name,image:"https://jacofood.ru/src/img_app/"+this.state.item.img_app+"?"+this.state.item.img_app_update,title:this.state.item.name})),r().createElement(y.Z,{item:!0,xs:7,sm:7,md:7,xl:7,className:"SecondBox"},r().createElement(C.Z,{className:"CardNameItem",gutterBottom:!0,variant:"h5",component:"span",onClick:function(){return e.props.openItem(e.state.item.id)}},this.state.item.name),r().createElement(C.Z,{className:"CardInfoItem",component:"p",onClick:function(){return e.props.openItem(e.state.item.id)}},this.state.item.tmp_desc),r().createElement("div",null,r().createElement(C.Z,{gutterBottom:!0,className:"CardPriceItem",variant:"h5",component:"span"},this.state.item.price," ",r().createElement(I.G,{icon:k.ED2})),0==this.state.count?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.add.bind(this)},"В корзину")):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{className:"CardCountItem",component:"span"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}})))))):void 0}}]),a}(r().Component),ne=r().forwardRef((function(e,t){return r().createElement(R.Z,(0,f.Z)({direction:"up",ref:t},e))})),re=function(e){(0,m.Z)(a,e);var t=Q(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){"undefined"!=typeof window&&setTimeout((function(){if(localStorage.getItem("goTo")){var e=localStorage.getItem("goTo");localStorage.removeItem("goTo"),$.scrollTo("myScrollToElement",{duration:800,delay:500,smooth:"easeInOutQuart",offset:document.getElementById("cat"+e).getBoundingClientRect().y-150})}}),2e3),a.fetchData("/"+n.state.city_name).then((function(e){console.log(e),n.setState({page:e.page})})),A.setPage("home"),window.scrollTo(0,0),(0,w.EH)((function(){n.setState({allItems:A.getAllItemsCat()});var e=[],t=[];A.getBanners().map((function(a,n){a.aktia_id&&parseInt(a.aktia_id)>0?(e.push(r().createElement(o.OL,{to:"/"+A.getCity()+"/actii#act"+a.aktia_id,exact:!0},r().createElement("img",{style:{minHeight:380},src:"https://jacofood.ru/src/img/banners/"+a.b_img_full+"?date=2021_03_12_13_56_39",onDragStart:te}))),t.push(r().createElement(o.OL,{to:"/"+A.getCity()+"/actii#act"+a.aktia_id,exact:!0},r().createElement("img",{src:"https://jacofood.ru/src/img/banners/"+a.img_app+"?date=2021_03_12_13_56_39",onDragStart:te})))):(e.push(r().createElement("img",{style:{minHeight:380},src:"https://jacofood.ru/src/img/banners/"+a.b_img_full+"?date=2021_03_12_13_56_39",onDragStart:te})),t.push(r().createElement("img",{src:"https://jacofood.ru/src/img/banners/"+a.img_app+"?date=2021_03_12_13_56_39",onDragStart:te})))})),n.setState({banners_pc:e,banners_mobile:t})}))})),n.state={allItems:[],is_load:!0,testData:[1,2,3,4,5,6,7,8,9],openItem:null,openModal:!1,banners_pc:[],banners_mobile:[],city_name:e.match.params.cityName,page:null},A.setCity(e.match.params.cityName),n}return(0,c.Z)(a,[{key:"openItem",value:function(e){var t=A.getAllItems().filter((function(t){return t.id==e}))[0];this.setState({openItem:t,openModal:!0})}},{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"handleClose",value:function(){this.setState({openModal:!1,openItem:null})}},{key:"render",value:function(){var e=this;return 0==A.getAllItemsCat().length?r().createElement(X,{name:"myScrollToElement"},r().createElement(y.Z,{container:!0,spacing:2,style:{margin:0,padding:"0px 10px",paddingTop:64,flexWrap:"wrap"},className:"MainItems mainContainer"},this.state.testData.map((function(e,t){return[r().createElement("div",{key:t},r().createElement(z.Z,{xsDown:!0},r().createElement(y.Z,{item:!0,xs:12,sm:4,md:3,xl:3,style:{padding:"16px 8px"}},r().createElement("div",{style:{width:260,height:170,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:120,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:260,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:260,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:260,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}))),r().createElement(z.Z,{smUp:!0},r().createElement(y.Z,{item:!0,xs:12,sm:4,md:3,xl:3,style:{padding:"16px 8px",display:"flex",flexDirection:"row"}},r().createElement("div",{style:{width:200,height:170,backgroundColor:"#e5e5e5"}}),r().createElement("div",{style:{marginLeft:15}},r().createElement("div",{style:{width:100,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:150,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:150,height:20,backgroundColor:"#e5e5e5",marginBottom:10}}),r().createElement("div",{style:{width:150,height:20,backgroundColor:"#e5e5e5",marginBottom:10}})))))]})))):r().createElement(X,{name:"myScrollToElement",className:"Category"},r().createElement(z.Z,{xsDown:!0},r().createElement(U(),{mouseTracking:!0,infinite:!0,items:this.state.banners_pc})),r().createElement(z.Z,{smUp:!0},r().createElement(U(),{mouseTracking:!0,disableButtonsControls:!0,infinite:!0,items:this.state.banners_mobile})),A.getAllItemsCat().map((function(t,a){return r().createElement(y.Z,{container:!0,spacing:2,style:{margin:0,padding:"0px 10px",flexWrap:"wrap",width:"100%"},className:"MainItems mainContainer",key:a,name:"cat"+t.id,id:"cat"+t.id},t.items.map((function(t,a){return r().createElement(y.Z,{item:!0,xs:12,sm:4,md:3,xl:3,key:a,style:{padding:"16px 8px",display:"flex"}},r().createElement(z.Z,{xsDown:!0},r().createElement(ae,{data:t,type:"pc",openItem:e.openItem.bind(e)})),r().createElement(z.Z,{smUp:!0},r().createElement(ae,{data:t,type:"mobile",openItem:e.openItem.bind(e)})))})))})),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h2"},this.state.page&&this.state.page.page_h?this.state.page.page_h:"")),this.state.page&&this.state.page.content?r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer dopText",dangerouslySetInnerHTML:{__html:this.state.page.content}}):null,this.state.openItem?r().createElement(O.Z,{fullScreen:!0,open:this.state.openModal,className:"ItemDialog",onClose:this.handleClose.bind(this),TransitionComponent:ne},r().createElement(G.Z,{style:{position:"relative",backgroundColor:"#fff",height:50}},r().createElement(L.Z,{style:{display:"flex",justifyContent:"space-between",height:50,minHeight:50}},r().createElement("img",{alt:"Жако доставка роллов и пиццы",src:"https://jacochef.ru/src/img/Bely_fon_logo.png",style:{height:33}}),r().createElement(Z.Z,{autoFocus:!0,color:"inherit",onClick:this.handleClose.bind(this)},r().createElement(I.G,{icon:k.NBC,style:{fontSize:"2.2rem",color:"#000"}})))),r().createElement("div",null,r().createElement(V,{itemId:this.state.openItem.id,item:this.state.openItem}))):null)}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),page:""};return P()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:ee.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),a}(r().Component),ie=a(7708),oe=a(1201),se=a(743),ce=a(4566);var le=a(7563);function me(e){var t=r().useState(!1),a=(0,W.Z)(t,2),n=a[0],i=a[1],o=e.points;return r().createElement("div",{className:"Accordion"},o.map((function(e,t){return r().createElement(ie.Z,{key:t,expanded:n==="panel"+t,onChange:(a="panel"+t,function(e,t){i(!!t&&a)})},r().createElement(se.Z,{expandIcon:r().createElement(ce.Z,null),"aria-controls":"panel"+t+"bh-content",id:"panel"+t+"bh-header"},r().createElement(C.Z,{variant:"h5",component:"span"},e.raion,": ",e.addr)),r().createElement(oe.Z,{className:"AccordionDesc",style:{flexDirection:"column",padding:0}},r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"b"},"Название организации: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.organization)),r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"b"},"ИНН / КПП: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.inn," / ",e.kpp)),r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"b"},"ОГРН: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.ogrn)),r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"b"},"Фактический адрес: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.full_addr)),r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"b"},"Телефон: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.phone))));var a})))}var de=function(e){(0,m.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,s.Z)(this,i),t=n.call(this,e),(0,u.Z)((0,l.Z)(t),"componentDidMount",(function(){document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),A.setPage("contact"),t.dynamicallyLoadScript(),i.fetchData("/"+t.state.city_name).then((function(e){t.setState({title:e.page.title,description:e.page.description})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:le.stringify({type:"get_addr_zone_web",city_id:t.state.city_name})}).then((function(e){return e.json()})).then((function(e){var a=[];e.map((function(e){e.zone_origin.length>0&&a.push(JSON.parse(e.zone_origin))})),t.setState({points:e,is_load:!0}),setTimeout((function(){t.loadMap(e,a)}),500)})).catch((function(e){}))})),t.state={points:[],title:"",description:"",city_name:e.match.params.cityName,is_load:!1},A.setCity(e.match.params.cityName),t}return(0,c.Z)(i,[{key:"dynamicallyLoadScript",value:function(){var e=document.createElement("script");e.src="https://api-maps.yandex.ru/2.1/?apikey=ae2bad1f-486e-442b-a9f7-d84fff6296db&lang=ru_RU",document.head.appendChild(e)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;i.fetchData("/"+this.props.match.params.cityName).then((function(t){e.setState({title:t.page.title,description:t.page.description})}))}},{key:"loadMap",value:function(e,t){var a;ymaps.ready((function(){a=new ymaps.Map("ForMap",{center:[e[0].xy_center_map.latitude,e[0].xy_center_map.longitude],zoom:10.8});var n=ymaps.templateLayoutFactory.createClass("<div class='my-hint'><b>{{ properties.address }}</b><br />График работы: c 10:00 до 21:30</div>");t.map((function(t,r){a.geoObjects.add(new ymaps.Polygon([t],{address:e[r].addr},{hintLayout:n,fillColor:"rgba(187, 0, 37, 0)",strokeColor:"rgb(187, 0, 37)",strokeWidth:5}))})),e.map((function(e){a.geoObjects.add(new ymaps.Placemark([e.xy_point.latitude,e.xy_point.longitude],{address:e.addr},{hintLayout:n,iconLayout:"default#image",iconImageHref:"https://jacofood.ru/src/img/other/Favikon.png",iconImageSize:[30,30],iconImageOffset:[-12,-24],iconContentOffset:[15,15]}))}))}))}},{key:"render",value:function(){return r().createElement(y.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3"},r().createElement(J.Helmet,null,r().createElement("title",null,this.state.title),r().createElement("meta",{name:"description",content:this.state.description})),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h1"},"Контакты")),r().createElement(y.Z,{item:!0,lg:4,md:4,xl:4,sm:12,xs:12,className:"mainContainer"},this.state.points[0]?r().createElement(C.Z,{variant:"h5",component:"span",className:"p20"},"Стоимость доставки: ",this.state.points[0].sum_div," руб."):null,r().createElement(C.Z,{variant:"h5",component:"h2"},"Режим работы"),r().createElement(C.Z,{variant:"h5",component:"span",className:"p20"},"Работаем ежедневно с 10:00 до 21:30"),r().createElement(C.Z,{variant:"h5",component:"h2"},"Телефон контакт-центра:"),this.state.points[0]?r().createElement(C.Z,{variant:"h5",component:"a",className:"p20",href:"tel:"+this.state.points[0].phone_new},this.state.points[0].phone):null,r().createElement(C.Z,{variant:"h5",component:"h2"},"Адреса кафе:"),r().createElement(me,{points:this.state.points})),r().createElement(y.Z,{item:!0,lg:8,md:8,xl:8,sm:12,xs:12,id:"ForMap"}))}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),page:"contacts"};return P()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:le.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),i}(r().Component),pe=a(6083),ue=a(9525),he=a(6856);var fe=a(7563),ye=function(e){(0,m.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,s.Z)(this,i),t=n.call(this,e),(0,u.Z)((0,l.Z)(t),"componentDidMount",(function(){document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),A.setPage("actii"),i.fetchData("/"+t.state.city_name).then((function(e){t.setState({title:e.page.title,description:e.page.description})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:fe.stringify({type:"get_my_actii_web",city_id:t.state.city_name})}).then((function(e){return e.json()})).then((function(e){t.setState({actii:e.actii,is_load:!0}),setTimeout((function(){var a=window.location.hash;if(a.length>0){var n=a.split("#act")[1],r=e.actii.filter((function(e){return e.id==n}))[0];t.openDialog(r),window.location.hash=""}}),300)})).catch((function(e){}))})),t.state={actii:[],is_load:!1,showItem:null,openDialog:!1,title:"",description:"",city_name:e.match.params.cityName},A.setCity(e.match.params.cityName),t}return(0,c.Z)(i,[{key:"closeDialog",value:function(){this.setState({showItem:null,openDialog:!1})}},{key:"openDialog",value:function(e){this.setState({showItem:e,openDialog:!0})}},{key:"render",value:function(){var e=this;return r().createElement(y.Z,{container:!0,className:"Actii mainContainer MuiGrid-spacing-xs-3"},r().createElement(J.Helmet,null,r().createElement("title",null,this.state.title),r().createElement("meta",{name:"description",content:this.state.description})),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h1"},"Акции")),r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer"},this.state.actii.map((function(t,a){return r().createElement(y.Z,{item:!0,xs:12,sm:6,md:4,xl:3,key:a},r().createElement("img",{src:"https://newjacofood.ru/src/img/aktii/"+t.img_min,alt:t.promo_title,style:{width:"100%"},onClick:e.openDialog.bind(e,t)}))}))),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h2"},this.state.page&&this.state.page.page_h?this.state.page.page_h:"")),this.state.page&&this.state.page.content?r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer dopText",dangerouslySetInnerHTML:{__html:this.state.page.content}}):null,this.state.showItem?r().createElement(O.Z,{onClose:this.closeDialog.bind(this),"aria-labelledby":"customized-dialog-title",className:"modalActii",open:this.state.openDialog},r().createElement(pe.Z,{disableTypography:!0,style:{margin:0,padding:8}},r().createElement(C.Z,{variant:"h6"},this.state.showItem.promo_title),r().createElement(F.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0},onClick:this.closeDialog.bind(this)},r().createElement(I.G,{icon:k.NBC,style:{fontSize:"1.8rem",color:"#e5e5e5"}}))),r().createElement(ue.Z,{className:"modalActiiContent"},r().createElement("div",{dangerouslySetInnerHTML:{__html:this.state.showItem.text}})),this.state.showItem.promo.length>0?r().createElement(he.Z,{style:{justifyContent:"center",padding:"15px 0px"}},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Применить промокод"))):null):null)}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),page:"akcii"};return P()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:fe.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),i}(r().Component),ve=a(1253),ge=a(9529),Ee=a(1959),_e=a(366),Ze=a(8286),be=a(5697),Ce=a.n(be),Ie=a(65),ke=a(1423),Se=a(6562),Ne=a(553),Pe=a(4436),xe=a(3258),we=a(6394),Te=a(5639),De=a(4769),Me=a(6912);var Be=a(7563);function Ae(e){var t=e.children,a=e.value,n=e.index,i=(0,ve.Z)(e,["children","value","index"]);return r().createElement("div",(0,f.Z)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),a===n&&r().createElement("div",{style:{width:"100%"}},t))}function Oe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Ge(){var e=(0,h.UO)().cityName;return A.setCity(e),r().createElement(Le,{cityName:e})}Ae.propTypes={children:Ce().node,index:Ce().any.isRequired,value:Ce().any.isRequired};var Le=function(e){(0,m.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,s.Z)(this,i),t=n.call(this,e),(0,u.Z)((0,l.Z)(t),"componentDidMount",(function(){document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),A.setPage("actii");for(var e=[],a=1;a<=31;a++)e.push(a);fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"get_user_web",city_id:t.state.city_name,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(a){console.log(a),t.setState({info:a,is_load:!0,arr_day:e,userMail:a.user.mail,spam:a.user.spam,userName:a.user.name})})).catch((function(e){}))})),(0,u.Z)((0,l.Z)(t),"changeTab",(function(e,a){t.setState({valueTab:a})})),(0,u.Z)((0,l.Z)(t),"changeM",(function(e){t.setState({changeM:e.target.value})})),(0,u.Z)((0,l.Z)(t),"changeDay",(function(e){t.setState({changeDay:e.target.value})})),(0,u.Z)((0,l.Z)(t),"changeMail",(function(e){t.setState({userMail:e.target.value})})),(0,u.Z)((0,l.Z)(t),"changeCheck",(function(e){var a=e.target.checked;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"save_profile_spam",my_spam:a?1:0,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(e){t.setState({openMSG:!0,statusMSG:!0,textMSG:"Данные успешно обновлены",spam:a?1:0})}))})),(0,u.Z)((0,l.Z)(t),"changeName",(function(e){t.setState({userName:e.target.value})})),t.state={actii:[],is_load:!1,openDialog:!1,city_name:t.props.cityName,valueTab:1,info:{},arr_day:[],arr_m:[{name:"Января",value:1},{name:"Февраля",value:2},{name:"Марта",value:3},{name:"Апреля",value:4},{name:"Мая",value:5},{name:"Июня",value:6},{name:"Июля",value:7},{name:"Августа",value:8},{name:"Сентября",value:9},{name:"Октября",value:10},{name:"Ноября",value:11},{name:"Декабря",value:12}],changeDay:"",changeM:"",userMail:"",openMSG:!1,statusMSG:!1,textMSG:"",spam:0,userName:""},t}return(0,c.Z)(i,[{key:"closeDialog",value:function(){this.setState({showItem:null,openDialog:!1})}},{key:"openDialog",value:function(e){this.setState({showItem:e,openDialog:!0})}},{key:"closeAlert",value:function(){this.setState({openMSG:!1})}},{key:"saveMail",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"save_profile_mail_web",my_mail:this.state.userMail,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){setTimeout((function(){t.st?e.setState({openMSG:!0,statusMSG:!0,textMSG:"Данные успешно обновлены"}):e.setState({openMSG:!0,statusMSG:!1,textMSG:t.text})}),300)}))}},{key:"saveDay",value:function(){var e=this,t=this.state.changeDay,a=this.state.changeM;if(""!=t&""!=a){var n="";this.state.arr_m.map((function(e,t){parseInt(e.value)==parseInt(a)&&(n=e.name)})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"save_profile_date",my_date:t+" "+n,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){t.st&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"get_user_web",city_id:e.state.city_name,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){e.setState({info:t})})).catch((function(e){})),setTimeout((function(){t.st?e.setState({openMSG:!0,statusMSG:!0,textMSG:"Данные успешно обновлены"}):e.setState({openMSG:!0,statusMSG:!1,textMSG:t.text})}),300)}))}}},{key:"activePromo",value:function(e){var t=this;A.setPromo(JSON.stringify(e));var a=A.checkPromo();setTimeout((function(){a.st?t.setState({openMSG:!0,statusMSG:!0,textMSG:"Промокод применен"}):t.setState({openMSG:!0,statusMSG:!1,textMSG:a.text})}),300)}},{key:"saveName",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Be.stringify({type:"save_profile_name",my_name:this.state.userName,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){setTimeout((function(){t.st?e.setState({openMSG:!0,statusMSG:!0,textMSG:"Данные успешно обновлены"}):e.setState({openMSG:!0,statusMSG:!1,textMSG:t.text})}),300)}))}},{key:"render",value:function(){var e=this;return r().createElement(y.Z,{container:!0,className:"Profile mainContainer MuiGrid-spacing-xs-3"},r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h1"},"Личный кабинет")),r().createElement(Me.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.openMSG,autoHideDuration:3e3,onClose:this.closeAlert.bind(this),message:this.state.textMSG,style:{backgroundColor:this.state.statusMSG?"green":"#BB0025",borderRadius:4},action:r().createElement(r().Fragment,null,r().createElement(F.Z,{size:"small","aria-label":"close",color:"inherit",onClick:this.closeAlert.bind(this)},r().createElement(_e.Z,{fontSize:"small"})))}),r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer",style:{paddingTop:0}},r().createElement(G.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},r().createElement(Ie.Z,{value:this.state.valueTab,onChange:this.changeTab.bind(this),"aria-label":"simple tabs example",style:{justifyContent:"center"}},r().createElement(ke.Z,(0,f.Z)({label:"Промокоды"},Oe(0),{disableRipple:!0})),r().createElement(ke.Z,(0,f.Z)({label:"Заказы"},Oe(1),{disableRipple:!0})),r().createElement(ke.Z,(0,f.Z)({label:"Редактирование"},Oe(2),{disableRipple:!0})))),r().createElement(Ae,{value:this.state.valueTab,index:0,style:{width:"100%"}},r().createElement("div",{style:{padding:12}},this.state.info.promo?r().createElement(z.Z,{mdDown:!0},r().createElement("table",{style:{width:"100%"},className:"TablePromo"},r().createElement("thead",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод дает:")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Действует до")))),r().createElement("tbody",null,this.state.info.promo.promo.map((function(t,a){return r().createElement("tr",{key:a},r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",onClick:e.activePromo.bind(e,t.info)},t.promo_name)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},t.promo_text)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},t.date_end)))}))))):null,this.state.info.promo?r().createElement(z.Z,{lgUp:!0},r().createElement("table",{style:{width:"100%"},className:"TablePromoMobile"},r().createElement("tbody",null,this.state.info.promo.promo.map((function(e,t){return r().createElement("tr",{key:t},r().createElement("td",null,r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.promo_name)),r().createElement("div",{style:{width:"100%",paddingTop:10}},r().createElement(C.Z,{variant:"h5",component:"span"},"Действует до: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.date_end)),r().createElement("div",{style:{width:"100%",paddingTop:10,textAlign:"justify"}},r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод дает: "),r().createElement(C.Z,{variant:"h5",component:"span"},e.promo_text)),r().createElement("div",{style:{width:"100%",paddingTop:10}},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"}},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",style:{width:"100%"}},"Активирывать промокод")))))}))))):null)),r().createElement(Ae,{value:this.state.valueTab,index:1,style:{width:"100%"}},this.state.info.orders?r().createElement("table",{className:"TableOrders"},r().createElement("thead",null,r().createElement("tr",null,r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"№")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Дата")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},"Сумма")),r().createElement("td",null))),r().createElement("tbody",null,this.state.info.orders.my_orders.map((function(e,t){return r().createElement("tr",{key:t},r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},e.order_id)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},e.date_time_new)),r().createElement("td",null,r().createElement(C.Z,{className:"CardPriceItem",variant:"h5",component:"span"},e.sum," ",r().createElement(ge.Z,{fontSize:"small"}))),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span"},1==parseInt(e.is_delete)?r().createElement(_e.Z,null):r().createElement(Ee.Z,null))))})))):null),r().createElement(Ae,{value:this.state.valueTab,index:2,style:{width:"100%"}},this.state.info.user?r().createElement("div",{className:"TableInfo"},r().createElement("form",{noValidate:!0,autoComplete:"off"},r().createElement(Ze.Z,{label:"Имя",value:this.state.userName,className:"input",onChange:this.changeName.bind(this),onBlur:this.saveName.bind(this)}),r().createElement(Ze.Z,{InputProps:{readOnly:!0},label:"Номер телефона",value:this.state.info.user.login,className:"input"})),r().createElement("form",{noValidate:!0,autoComplete:"off"},""!=this.state.info.user.date_bir?r().createElement(Ze.Z,{label:"Дата рождения",className:"input",InputProps:{readOnly:!0},value:this.state.info.user.date_bir}):r().createElement("div",{className:"input"},r().createElement(we.Z,{className:"otherLabel"},"Дата рождения"),r().createElement(Pe.Z,{className:"ChangeDay"},r().createElement(De.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",displayEmpty:!0,value:this.state.changeDay,onChange:this.changeDay.bind(this),onBlur:this.saveDay.bind(this)},r().createElement(Te.Z,{className:"menuItem",value:""},"День"),this.state.arr_day.map((function(e,t){return r().createElement(Te.Z,{key:t,className:"menuItem",value:e},e)})))),r().createElement(Pe.Z,{className:"ChangeM"},r().createElement(De.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",displayEmpty:!0,value:this.state.changeM,onChange:this.changeM.bind(this),onBlur:this.saveDay.bind(this)},r().createElement(Te.Z,{className:"menuItem",value:""},"Месяц"),this.state.arr_m.map((function(e,t){return r().createElement(Te.Z,{key:t,className:"menuItem",value:e.value},e.name)}))))),r().createElement(Ze.Z,{label:"Почта",className:"input",value:this.state.userMail,onChange:this.changeMail.bind(this),onBlur:this.saveMail.bind(this)})),r().createElement(Se.Z,{row:!0,className:"input checkbox"},r().createElement(Ne.Z,{onChange:this.changeCheck.bind(this),control:r().createElement(xe.Z,{checked:1==parseInt(this.state.spam),name:"checkedC"}),label:"Получать сообщения с акциями"}))):null)),this.state.showItem?r().createElement(O.Z,{onClose:this.closeDialog.bind(this),"aria-labelledby":"customized-dialog-title",className:"modalProfile",open:this.state.openDialog},r().createElement(pe.Z,{disableTypography:!0,style:{margin:0,padding:8}},r().createElement(C.Z,{variant:"h6"},this.state.showItem.promo_title),r().createElement(F.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0,color:"#000"},onClick:this.closeDialog.bind(this)},r().createElement(_e.Z,null))),r().createElement(ue.Z,{className:"modalProfileContent"},r().createElement("div",{dangerouslySetInnerHTML:{__html:this.state.showItem.text}})),this.state.showItem.promo.length>0?r().createElement(he.Z,{style:{justifyContent:"center",padding:"15px 0px"}},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Применить промокод"))):null):null)}}]),i}(r().Component),Re=a(9895),ze=a(4741),je=a(5517),Ue=a(5037),We=a(7212),Fe=a(6718),qe=a(3901),Je=a(2822),He=a(998),Ke=a(6353),Ye=a(5757),Ve=a(74),Qe=a(2541),Xe=a(6019),$e=a(8799),et=a(5007);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var at=a(7563);function nt(e){var t=e.children,a=e.value,n=e.index,i=(0,ve.Z)(e,["children","value","index"]);return r().createElement("div",(0,f.Z)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),a===n&&r().createElement("div",null,t))}function rt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}nt.propTypes={children:Ce().node,index:Ce().any.isRequired,value:Ce().any.isRequired};var it=function(e){(0,m.Z)(a,e);var t=tt(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"_isMounted",!1),n.state={item:n.props.item,type:n.props.type,count:0,onePrice:0,new_onePrice:-1,allPrice:0},n}return(0,c.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=A.getItems(),a=(A.getItemsPromo(),t.find((function(t){return t.item_id==e.state.item.id})));a&&this.setState({count:a.count,onePrice:a.one_price,allPrice:a.all_price}),(0,w.EH)((function(){if(!0===e._isMounted){var t=A.getItems(),a=A.getItemsPromo();if(a&&a.length>0){var n=a.find((function(t){return t.item_id==e.state.item.id}));n&&e.setState({count:n.count,onePrice:n.one_price,allPrice:n.all_price})}var r=t.find((function(t){return t.item_id==e.state.item.id}));"promo"!=e.state.type&&(r?e.setState({count:r.count,onePrice:r.one_price,allPrice:r.all_price,new_onePrice:r.new_one_price?r.new_one_price:-1}):e.setState({count:0,onePrice:0,allPrice:0,new_onePrice:-1}))}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"add",value:function(e){A.AddItem(e)}},{key:"minus",value:function(e){A.MinusItem(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.count!==t.count||this.state.onePrice!==t.onePrice||this.state.allPrice!==t.allPrice||this.state.item.name!==e.item.name}},{key:"render",value:function(){return parseInt(this.state.count)>0||7==parseInt(this.state.item.cat_id)?r().createElement("tr",null,r().createElement("td",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"}},r().createElement("img",{src:"https://newjacofood.ru/src/img/items/"+this.state.item.img+"?"+this.state.item.imgUpdate}),"promo"==this.state.type?r().createElement(I.G,{icon:k.Cly,className:"promoIcon"}):null,r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"nameItem"},this.state.item.name),r().createElement(C.Z,{variant:"h5",component:"span",className:"descItem"},this.state.item.desc))),r().createElement("td",null,"promo"!=this.state.type?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this,this.state.item.id)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this,this.state.item.id)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}}))):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count promo"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}})))),r().createElement("td",null,-1!=this.state.new_onePrice?r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePriceOld"},parseInt(this.state.count)*parseInt(this.state.onePrice)):null,r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.allPrice," ",r().createElement(I.G,{icon:k.ED2})))):null}}]),a}(r().Component),ot=function(e){(0,m.Z)(a,e);var t=tt(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"_isMounted",!1),n.state={item:n.props.item,type:n.props.type,count:0,onePrice:0,allPrice:0,new_onePrice:-1},n}return(0,c.Z)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=A.getItems().find((function(t){return t.item_id==e.state.item.id}));t&&this.setState({count:t.count,onePrice:t.one_price,allPrice:t.all_price}),(0,w.EH)((function(){if(!0===e._isMounted){var t=A.getItems(),a=A.getItemsPromo();if(a&&a.length>0){var n=a.find((function(t){return t.item_id==e.state.item.id}));n&&e.setState({count:n.count,onePrice:n.one_price,allPrice:n.all_price})}var r=t.find((function(t){return t.item_id==e.state.item.id}));"promo"!=e.state.type&&(r?e.setState({count:r.count,onePrice:r.one_price,allPrice:r.all_price,new_onePrice:r.new_one_price?r.new_one_price:-1}):e.setState({count:0,onePrice:0,allPrice:0,new_onePrice:-1}))}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"add",value:function(e){A.AddItem(e)}},{key:"minus",value:function(e){A.MinusItem(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.count!==t.count||this.state.onePrice!==t.onePrice||this.state.allPrice!==t.allPrice||this.state.item.name!==e.item.name}},{key:"render",value:function(){return this.state.count>0||7==parseInt(this.state.item.cat_id)?r().createElement("div",{className:"boxItem"},r().createElement("img",{src:"https://newjacofood.ru/src/img/items/"+this.state.item.img+"?"+this.state.item.imgUpdate}),"promo"==this.state.type?r().createElement(I.G,{icon:k.Cly,className:"promoIcon"}):null,r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"span"},this.state.item.name),r().createElement("div",null,"promo"!=this.state.type?r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.minus.bind(this,this.state.item.id)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:this.add.bind(this,this.state.item.id)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}}))):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"count promo"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},this.state.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}}))),-1!=this.state.new_onePrice?r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePriceOld"},parseInt(this.state.count)*parseInt(this.state.onePrice)):null,r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice"},this.state.allPrice," ",r().createElement(I.G,{icon:k.ED2}))))):null}}]),a}(r().Component),st=function(e){(0,m.Z)(a,e);var t=tt(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"_isMounted",!1),(0,u.Z)((0,l.Z)(n),"clickOrderStart",!1),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){n._isMounted=!0,document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),window.scrollTo(0,0),A.setPage("cart"),n.loadData(),a.fetchData("/"+n.state.city_name).then((function(e){n.setState({title:e.page.title,description:e.page.description})}));var e=A.getItems(),t=A.getAllItems(),r=(A.getItemsPromo(),[]);if(e.length>0&&t.length>0){e.map((function(e){var a=t.filter((function(t){return t.id==e.item_id}))[0];a&&r.push({id:e.item_id,cat_id:a.cat_id,name:e.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img,imgUpdate:a.img_date_update})}));var i=r.filter((function(e){return 7!==parseInt(e.cat_id)})),o=r.filter((function(e){return 7==parseInt(e.cat_id)})),s=A.check_need_dops();n.setState({cartItems_main:i,cartItems_dop:o,cartItems_need_dop:s,sumDiv:A.getSumDiv(),allPrice:A.getAllPrice()})}(0,w.EH)((function(){if(!0===n._isMounted){var e=A.getItems(),t=A.getAllItems(),a=A.check_need_dops(),r=A.getItemsPromo(),i=[],o=[];e.map((function(e){var a=t.filter((function(t){return t.id==e.item_id}))[0];a&&i.push({id:e.item_id,cat_id:a.cat_id,name:e.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img,imgUpdate:a.img_date_update})}));var s=i.filter((function(e){return 7!==parseInt(e.cat_id)})),c=(i.filter((function(e){return 7==parseInt(e.cat_id)})),[]);a.map((function(e){var t=i.filter((function(t){return parseInt(t.id)==parseInt(e.id)}))[0];t?c.push({id:e.id,cat_id:e.cat_id,name:e.name,desc:e.tmp_desc,count:t.count,allPrice:t.allPrice,img:e.img,imgUpdate:e.img_date_update}):c.push({id:e.id,cat_id:e.cat_id,name:e.name,desc:e.tmp_desc,count:0,allPrice:0,img:e.img,imgUpdate:e.img_date_update})})),r.map((function(e){var a=t.find((function(t){return t.id==e.item_id}));a&&o.push({id:e.item_id,cat_id:a.cat_id,name:a.name,desc:a.tmp_desc,count:e.count,allPrice:e.all_price,img:a.img,imgUpdate:a.img_date_update})})),n.setState({cartItems_dop:[]}),n.setState({cartItems_dop:c}),n.setState({cartItems_main:s,cartItems_need_dop:a,cartItems_promo:o,sumDiv:A.getSumDiv(),allPrice:A.getAllPrice()})}}))})),(0,u.Z)((0,l.Z)(n),"changeTab",(function(e,t){if(n.setState({orderType:t}),0==t){var a=n.state.orderAddr,r=A.getAllPrice();a?1==parseInt(a.free_drive)?parseInt(r)>0?A.setSumDiv(0):A.setSumDiv(1):A.setSumDiv(parseInt(a.sum_div)):A.setSumDiv(0)}else A.setSumDiv(0);var i=n.state.orderTimes,o="cash";0==t?1==i?(n.setState({renderPay:thisitem&&1==parseInt(thisitem.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}),o="cash"):(n.setState({renderPay:n.state.pays.dev_mini}),o="cash"):(n.setState({renderPay:n.state.pays.pic}),o="in"),n.setState({orderPay:o}),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changeAddr",(function(e){var t=n.state.my_addr.find((function(t){return t.id==e.target.value})),a=A.getAllPrice();1==parseInt(t.free_drive)?parseInt(a)>0?A.setSumDiv(0):A.setSumDiv(1):A.setSumDiv(parseInt(t.sum_div));var r=n.state.orderTimes;0==n.state.orderType?1==r?n.setState({renderPay:t&&1==parseInt(t.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.pic}),n.setState({orderAddr:t,chooseAddr:!1,newAddrInfo:null,newAddrPD:"",newAddrET:"",newAddrKV:""}),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changeComment",(function(e){e.target.value.length<=50&&n.setState({orderComment:e.target.value}),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changePay",(function(e){n.setState({orderPay:e.target.value}),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changeTimes",(function(e){var t=e.target.value,a="cash";0==n.state.orderType?1==t?(n.setState({renderPay:n.state.orderAddr&&1==parseInt(n.state.orderAddr.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}),a="cash"):(n.setState({renderPay:n.state.pays.dev_mini}),a="cash"):(n.setState({renderPay:n.state.pays.pic}),a="in"),n.setState({orderTimes:t,orderPay:a}),n.loadTimePred(),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changeSdacha",(function(e){n.setState({orderSdacha:e.target.value}),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changePredDay",(function(e){0!==e.target.value?(n.setState({orderPredDay:e.target.value,orderTimes:"2"}),0==n.state.orderType?n.setState({renderPay:n.state.pays.dev_mini,orderPay:"cash"}):n.setState({renderPay:n.state.pays.pic,orderPay:"in"}),setTimeout((function(){n.loadTimePred()}),300)):(n.setState({orderPredDay:0,orderTimes:"1"}),0==n.state.orderType?n.setState({renderPay:n.state.orderAddr&&1==parseInt(n.state.orderAddr.pay_active)?n.state.pays.dev:n.state.pays.dev_mini}):n.setState({renderPay:n.state.pays.pic,orderPay:"in"})),n.saveData()})),(0,u.Z)((0,l.Z)(n),"changePredTime",(function(e){n.setState({orderPredTime:e.target.value}),n.saveData()})),n.state={is_load:!1,city_name:e.match.params.cityName,title:"",description:"",chooseAddr:!1,choosePicDialog:!1,chooseTimeDialog:!1,choosePayDialog:!1,chooseNewAddr:!1,orderCheckDop:!1,sumDiv:0,allPrice:0,pic_point:[],my_addr:[],all_addr:[],date_pred:[],picPointInfo:null,pays:{dev:[{type:"cash",title:"Наличными курьеру"},{type:"card",title:"Онлайн"}],dev_mini:[{type:"cash",title:"Наличными курьеру"}],pic:[{type:"in",title:"В кафе"}]},renderPay:[{type:"cash",title:"Наличными курьеру"},{type:"card",title:"Онлайн"}],cartItems_main:[],cartItems_dop:[],cartItems_need_dop:[],cartItems_promo:[],timePred:[],error:{title:"",text:""},errorOpen:!1,orderCheck:!1,newAddrInfo:null,newAddrPD:"",newAddrET:"",newAddrKV:"",orderType:0,orderAddr:null,orderPic:0,orderComment:"",orderPay:"cash",orderTimes:"1",orderPredDay:"",orderPredTime:"",orderSdacha:"",orderPromo:"",orderPromoText:""},A.setCity(e.match.params.cityName),n}return(0,c.Z)(a,[{key:"loadData",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:at.stringify({type:"get_by_mi_web",city_id:this.state.city_name,user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({pic_point:t.get_addr_pic.points,my_addr:t.get_my_addr,all_addr:t.get_addr,date_pred:t.date_pred}),setTimeout((function(){var t=A.getCartData();if(t.orderType||0==t.orderType){if(e.setState({orderType:t.orderType,orderAddr:t.orderAddr&&-1==t.orderAddr.id?null:t.orderAddr,orderPic:t.orderPic,orderComment:t.orderComment,orderTimes:t.orderTimes,orderPredDay:t.orderPredDay,orderPredTime:t.orderPredTime,orderPay:t.orderPay,orderSdacha:t.orderSdacha}),2==parseInt(t.orderTimes)&&""!=t.orderPredDay&&(t.orderAddr&&-1!==t.orderAddr.id||parseInt(t.orderPic)>0)&&setTimeout((function(){e.loadTimePred()}),300),setTimeout((function(){1==parseInt(t.orderType)&&parseInt(t.orderPic)>0&&e.choosePic(t.orderPic)}),300),0==t.orderType&&t.orderAddr&&t.orderAddr.id&&-1!==t.orderAddr.id){var a=A.getAllPrice();1==parseInt(t.orderAddr.free_drive)?parseInt(a)>0?A.setSumDiv(0):A.setSumDiv(1):A.setSumDiv(parseInt(t.orderAddr.sum_div))}setTimeout((function(){var a=t.orderTimes;0==t.orderType?1==a?e.setState({renderPay:t.orderAddr&&1==parseInt(t.orderAddr.pay_active)?e.state.pays.dev:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.dev_mini}):e.setState({renderPay:e.state.pays.pic})}),300)}"undefined"!=typeof window&&setTimeout((function(){localStorage.getItem("promo_name")&&(e.setState({orderPromo:localStorage.getItem("promo_name")}),setTimeout((function(){e.checkPromo()}),300))}),1e3)}),300)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"choosePic",value:function(e){document.querySelector(".boxPic.active")&&document.querySelector(".boxPic.active").classList.remove("active"),document.querySelector("#pic_"+e)&&document.querySelector("#pic_"+e).classList.add("active");var t=this.state.pic_point.filter((function(t){return t.id==e}))[0];this.setState({orderPic:e,picPointInfo:t,choosePicDialog:!1}),this.saveData()}},{key:"changePayMobile",value:function(e){this.setState({orderPay:e,choosePayDialog:!1}),this.saveData()}},{key:"checkPromo",value:function(){var e=this;fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:at.stringify({type:"get_promo_web",city_id:A.getCity(),promo_name:this.state.orderPromo})}).then((function(e){return e.json()})).then((function(t){console.log(t),A.setPromo(JSON.stringify(t),e.state.orderPromo);var a=A.checkPromo();console.log(a),!1===a.st&&localStorage.removeItem("promo_name"),e.setState({orderPromoText:a.text})}))}},{key:"saveData",value:function(){var e=this;setTimeout((function(){var t={orderType:e.state.orderType,orderAddr:e.state.orderAddr,orderPic:e.state.orderPic,orderComment:e.state.orderComment,orderTimes:e.state.orderTimes,orderPredDay:e.state.orderPredDay,orderPredTime:e.state.orderPredTime,orderPay:e.state.orderPay,orderSdacha:e.state.orderSdacha};A.saveCartData(t)}),500)}},{key:"saveDataCustomAddr",value:function(){var e=this;setTimeout((function(){var t={orderType:e.state.orderType,orderAddr:{id:-1,city_name:A.getCityRU(),street:e.state.newAddrInfo?e.state.newAddrInfo.street:"",home:e.state.newAddrInfo?e.state.newAddrInfo.home:"",kv:e.state.newAddrKV,pd:e.state.newAddrPD,et:e.state.newAddrET,dom_true:0,free_drive:e.state.newAddrInfo?e.state.newAddrInfo.free_drive:0,sum_div:e.state.newAddrInfo?e.state.newAddrInfo.sum_div:0,point_id:e.state.newAddrInfo?e.state.newAddrInfo.point_id:0,xy:e.state.newAddrInfo?e.state.newAddrInfo.xy:"",pay_active:e.state.newAddrInfo?e.state.newAddrInfo.pay_active:0},orderPic:e.state.orderPic,orderComment:e.state.orderComment,orderTimes:e.state.orderTimes,orderPredDay:e.state.orderPredDay,orderPredTime:e.state.orderPredTime,orderPay:e.state.orderPay,orderSdacha:e.state.orderSdacha};t.orderAddr.street.length>0&&t.orderAddr.home.length>0&&e.setState({orderAddr:t.orderAddr}),A.saveCartData(t)}),500)}},{key:"loadTimePred",value:function(){var e,t,a=this,n=[],r=A.getItems();this.state.orderType+1!=1||this.state.orderAddr&&this.state.orderAddr.point_id?(r.forEach((function(e){n.push({item_id:e.item_id,count:e.count})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:at.stringify({type:"get_times_pred_web",point_id:this.state.orderType+1==1?null!==(e=this.state.orderAddr.point_id)&&void 0!==e?e:0:null!==(t=this.state.orderPic)&&void 0!==t?t:0,type_order:this.state.orderType+1,date:this.state.orderPredDay,cart:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.st?a.setState({timePred:e.data}):a.setState({error:{title:"Предупреждение",text:e.text},errorOpen:!0})}))):this.setState({error:{title:"Предупреждение",text:"Адрес доставки или точка самовывоза не выбрана"},errorOpen:!0,orderTimes:"1"})}},{key:"startOrder",value:function(){var e=this;if(0==this.clickOrderStart){this.clickOrderStart=!0;var t=[],a=A.getItems(),n=A.getAllItems();a.forEach((function(e){e.count>0&&t.push({name:e.name,count:e.count,price:e.all_price,id:e.item_id,cat_id:n.find((function(t){return t.id==e.item_id})).cat_id})}));var r=!1,i=!1,o=!1;if(t.forEach((function(e){(3==parseInt(e.cat_id)||4==parseInt(e.cat_id)||9==parseInt(e.cat_id)||10==parseInt(e.cat_id)||12==parseInt(e.cat_id)||13==parseInt(e.cat_id))&&parseInt(e.count)>0&&(r=!0),17==parseInt(e.item_id)&&parseInt(e.count)>0&&(i=!0),19==parseInt(e.item_id)&&parseInt(e.count)>0&&(o=!0)})),r&&0==i||r&&0==o)return this.setState({orderCheckDop:!0}),void setTimeout((function(){e.clickOrderStart=!1}),300);this.startOrderNext()}}},{key:"startOrderNext",value:function(){var e=this;if(0==this.clickOrderStart){this.clickOrderStart=!0,this.setState({orderCheckDop:!1});var t=this.state.renderPay.find((function(t){return t.type==e.state.orderPay})),a=[];A.getItems().forEach((function(e){e.count>0&&a.push({name:e.name,count:e.count,price:e.all_price,id:e.item_id})})),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:at.stringify({type:"createOrder_web",city_id:this.state.city_name,user_id:A.getToken(),timePred:JSON.stringify({value:1==parseInt(this.state.orderTimes)?0:this.state.orderPredDay+" "+this.state.orderPredTime}),typeOrder:this.state.orderType,addrPic:this.state.orderPic,comment:this.state.orderComment,addrDev:this.state.orderAddr?JSON.stringify(this.state.orderAddr):"",pay:t.title,payFull:JSON.stringify(t),cart:JSON.stringify(a),promo_name:this.state.orderPromo})}).then((function(e){return e.json()})).then((function(t){console.log(t),setTimeout((function(){e.clickOrderStart=!1}),300),t.st?e.setState({orderCheck:!0}):e.setState({error:{title:"Предупреждение",text:t.text_err},errorOpen:!0})}))}}},{key:"checkNewAddr",value:function(){var e=this,t=document.querySelector("#newAddrStreet").value;t.length>0&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:at.stringify({type:"save_new_addr_web",city_id:this.state.city_name,user_id:A.getToken(),street:t})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.st?""==t.data.home?e.setState({error:{title:"Предупреждение",text:"Номер дома не указан"},errorOpen:!0}):(e.setState({newAddrInfo:t.data}),e.saveDataCustomAddr()):e.setState({error:{title:"Предупреждение",text:t.text},errorOpen:!0})}))}},{key:"render",value:function(){var e=this,t=this.state.renderPay.find((function(t){return t.type==e.state.orderPay}));return r().createElement(y.Z,{container:!0,className:"Cart mainContainer MuiGrid-spacing-xs-3"},r().createElement(J.Helmet,null,r().createElement("title",null,this.state.title),r().createElement("meta",{name:"description",content:this.state.description})),r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h1"},"Корзина")),r().createElement(z.Z,{xsDown:!0},r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer",style:{paddingTop:0}},r().createElement(G.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},r().createElement(Ie.Z,{value:this.state.orderType,onChange:this.changeTab.bind(this),"aria-label":"simple tabs example",style:{justifyContent:"center"}},r().createElement(ke.Z,(0,f.Z)({label:"Доставка"},rt(0),{disableRipple:!0})),r().createElement(ke.Z,(0,f.Z)({label:"Самовывоз"},rt(1),{disableRipple:!0})))),r().createElement(nt,{value:this.state.orderType,index:0,style:{width:"100%"}},r().createElement(Pe.Z,{component:"fieldset"},r().createElement(Qe.Z,{name:"addrs",value:this.state.orderAddr?this.state.orderAddr.id:0,onChange:this.changeAddr},this.state.my_addr.map((function(e,t){return r().createElement("div",{key:t,className:"boxAddr"},r().createElement(Ne.Z,{value:e.id,control:r().createElement(Ve.Z,null),label:e.city_name+", "+e.street+" "+e.home+", Пд. "+e.pd+", Эт. "+e.et+", Кв. "+e.kv}),r().createElement(I.G,{icon:k.NBC}))})))),r().createElement(ie.Z,null,r().createElement(se.Z,{"aria-controls":"panel1a-content",id:"panel1a-header"},r().createElement(C.Z,{variant:"h5",component:"span",className:"newAddr"},"Новый адрес")),r().createElement(oe.Z,{className:"newAddr"},r().createElement("div",null,r().createElement(et.ZP,{freeSolo:!0,id:"newAddrStreet",style:{width:"100%"},onBlur:this.checkNewAddr.bind(this),options:this.state.all_addr.map((function(e){return e.value})),renderInput:function(e){return r().createElement(Ze.Z,(0,f.Z)({},e,{label:"Адрес",margin:"normal",variant:"outlined"}))}})),r().createElement("div",null,r().createElement(Ze.Z,{label:"Подъезд",variant:"outlined",value:this.state.newAddrPD,onChange:function(t){return e.setState({newAddrPD:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),r().createElement(Ze.Z,{label:"Этаж",variant:"outlined",value:this.state.newAddrET,onChange:function(t){return e.setState({newAddrET:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),r().createElement(Ze.Z,{label:"Квартира",variant:"outlined",value:this.state.newAddrKV,onChange:function(t){return e.setState({newAddrKV:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}))))),r().createElement(nt,{value:this.state.orderType,index:1},r().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},this.state.pic_point.map((function(t,a){return r().createElement("div",{className:"boxPic",id:"pic_"+t.id,key:a,onClick:e.choosePic.bind(e,t.id)},r().createElement(C.Z,{variant:"h5",component:"span"},t.raion),r().createElement(C.Z,{variant:"h5",component:"span"},t.addr,", c 10:00 до 21:30"))})))),0==this.state.orderType?r().createElement("div",null,r().createElement("form",{noValidate:!0,autoComplete:"off"},r().createElement(Ze.Z,{style:{width:"100%"},id:"outlined-multiline-flexible",label:"Комментарий курьеру",multiline:!0,rowsMax:2,value:this.state.orderComment,onChange:this.changeComment,variant:"outlined"}))):null,r().createElement("div",null,r().createElement(Pe.Z,{component:"fieldset"},r().createElement(Xe.Z,{component:"legend"},"Оплата"),r().createElement(Qe.Z,{"aria-label":"pays",name:"pays",value:this.state.orderPay,onChange:this.changePay},this.state.renderPay.map((function(e,t){return r().createElement(Ne.Z,{key:t,value:e.type,control:r().createElement(Ve.Z,null),label:e.title})}))))),r().createElement("div",null,r().createElement(Pe.Z,{component:"fieldset"},r().createElement(Xe.Z,{component:"legend"},"Когда приготовить?"),r().createElement(Qe.Z,{"aria-label":"times",name:"times",value:this.state.orderTimes,onChange:this.changeTimes},r().createElement(Ne.Z,{value:"1",control:r().createElement(Ve.Z,null),label:"Как можно быстрее"}),r().createElement(Ne.Z,{value:"2",control:r().createElement(Ve.Z,null),label:"Предзаказ"})))),2==this.state.orderTimes?r().createElement("div",null,r().createElement(Pe.Z,{style:{width:"30%"}},r().createElement(we.Z,{htmlFor:"age-native-simple"},"День"),r().createElement(De.Z,{displayEmpty:!0,value:this.state.orderPredDay,onChange:this.changePredDay,inputProps:{id:"age-native-simple"}},this.state.date_pred.map((function(e,t){return r().createElement(Te.Z,{key:t,value:e.date},e.text)})))),r().createElement(Pe.Z,{style:{width:"20%"}},r().createElement(we.Z,{htmlFor:"age-native-simple1"},"Время"),r().createElement(De.Z,{displayEmpty:!0,value:this.state.orderPredTime,onChange:this.changePredTime,inputProps:{id:"age-native-simple1"}},this.state.timePred.map((function(e,t){return r().createElement(Te.Z,{key:t,value:e.value},e.text)}))))):null,r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"h2"},"Моя корзина")),r().createElement("div",null,r().createElement("table",{className:"tableCart"},r().createElement("tbody",null,this.state.cartItems_main.map((function(e,t){return r().createElement(it,{key:t,item:e,type:"item"})})),this.state.cartItems_promo.map((function(e,t){return r().createElement(it,{key:t,item:e,type:"promo"})})),r().createElement("tr",{className:"rowAboutDop"},r().createElement("td",{colSpan:"3"},r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Соевый соус, имбирь и васаби приобретаются отдельно!"),r().createElement("br",null),r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Не забудь добавить нужные позиции в корзину."))),this.state.cartItems_dop.map((function(e,t){return r().createElement(it,{key:t,item:e,type:"dop"})}))),r().createElement("tfoot",null,r().createElement("tr",null,r().createElement("td",{colSpan:"2"},r().createElement(C.Z,{component:"span"},"Доставка:")),r().createElement("td",null,r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv," ",r().createElement(I.G,{icon:k.ED2})))),r().createElement("tr",null,r().createElement("td",{colSpan:"2"},r().createElement(C.Z,{component:"span"},"Итого:")),r().createElement("td",null,r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv+this.state.allPrice," ",r().createElement(I.G,{icon:k.ED2}))))))),0==this.state.orderType?r().createElement("div",{className:"orderSdacha"},r().createElement("div",null,r().createElement(Pe.Z,null,r().createElement(we.Z,{htmlFor:"standard-adornment-weight"},"Подготовить сдачу с"),r().createElement($e.Z,{type:"number",id:"standard-adornment-weight",value:this.state.orderSdacha,onChange:this.changeSdacha,endAdornment:r().createElement(I.G,{icon:k.ED2})})))):null,r().createElement("div",{className:"promoOrder"},r().createElement("div",null,r().createElement(Re.Z,{component:"div",className:"SpacePromo"},r().createElement(ze.Z,{onBlur:this.checkPromo.bind(this),value:this.state.orderPromo,onChange:function(t){return e.setState({orderPromo:t.target.value})},placeholder:"Промокод"}),r().createElement(je.Z,{orientation:"vertical"}),r().createElement(F.Z,{color:"primary","aria-label":"directions",onClick:this.checkPromo.bind(this)},r().createElement(Ue.Z,null))),this.state.orderPromoText.length>0?r().createElement("div",{className:"DescPromo"},r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод дает: ",this.state.orderPromoText)):null),r().createElement("div",null,r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:this.startOrder.bind(this)},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Оформить заказ")))))),r().createElement(z.Z,{smUp:!0},r().createElement(y.Z,{item:!0,container:!0,spacing:3,md:10,sm:12,xs:12,xl:10,className:"mainContainer mobile"},r().createElement(G.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000",zIndex:0},elevation:0},r().createElement(Ie.Z,{value:this.state.orderType,onChange:this.changeTab.bind(this),"aria-label":"simple tabs example",style:{justifyContent:"center"}},r().createElement(ke.Z,(0,f.Z)({label:"Доставка"},rt(0),{style:{width:"50%"},disableRipple:!0})),r().createElement(ke.Z,(0,f.Z)({label:"Самовывоз"},rt(1),{style:{width:"50%"},disableRipple:!0})))),r().createElement(nt,{value:this.state.orderType,index:0,style:{width:"100%"}},r().createElement("div",{className:"boxMobile",onClick:function(){return e.setState({chooseAddr:!0})}},r().createElement(C.Z,{variant:"h5",component:"span"},"Адрес: ",this.state.orderAddr?this.state.orderAddr.city_name+", "+this.state.orderAddr.street+" "+this.state.orderAddr.home+", Пд. "+this.state.orderAddr.pd+", Эт. "+this.state.orderAddr.et+", Кв. "+this.state.orderAddr.kv:""))),r().createElement(nt,{value:this.state.orderType,index:1,style:{width:"100%"}},r().createElement("div",{className:"boxMobile",onClick:function(){return e.setState({choosePicDialog:!0})}},r().createElement(C.Z,{variant:"h5",component:"span"},"Адрес: ",this.state.orderPic>0?this.state.pic_point.find((function(t){return t.id==e.state.orderPic})).addr:""))),r().createElement("div",{className:"boxMobile",onClick:function(){return e.setState({chooseTimeDialog:!0})}},r().createElement(C.Z,{variant:"h5",component:"span"},"Приготовим: ",1==this.state.orderTimes?"как можно быстрее":this.state.orderPredDay+" "+this.state.orderPredTime)),r().createElement("div",{className:"boxMobile",onClick:function(){return e.setState({choosePayDialog:!0})}},r().createElement(C.Z,{variant:"h5",component:"span"},"Оплачу: ",t?t.title:"")),r().createElement("div",{style:{marginTop:15}},r().createElement(Re.Z,{component:"div",className:"SpacePromo"},r().createElement(ze.Z,{onBlur:this.checkPromo.bind(this),value:this.state.orderPromo,onChange:function(t){return e.setState({orderPromo:t.target.value})},placeholder:"Промокод"}),r().createElement(je.Z,{orientation:"vertical"}),r().createElement(F.Z,{color:"primary","aria-label":"directions",onClick:this.checkPromo.bind(this)},r().createElement(Ue.Z,null))),this.state.orderPromoText.length>0?r().createElement("div",{className:"DescPromo"},r().createElement(C.Z,{variant:"h5",component:"span"},"Промокод дает: ",this.state.orderPromoText)):null),0==this.state.orderType?r().createElement("div",{className:"boxMobile_ area",style:{paddingTop:20}},r().createElement("form",{noValidate:!0,autoComplete:"off"},r().createElement(Ze.Z,{style:{width:"100%"},id:"outlined-multiline-flexible",label:"Комментарий курьеру",multiline:!0,rowsMax:2,value:this.state.orderComment,onChange:this.changeComment,variant:"outlined"}))):null,0==this.state.orderType&&"cash"==this.state.orderPay?r().createElement("div",{className:"boxMobile_ area"},r().createElement(Pe.Z,{variant:"outlined"},r().createElement(we.Z,{htmlFor:"outlined-adornment-password"},"Подготовить сдачу с"),r().createElement(Fe.Z,{id:"outlined-adornment-password",type:"number",value:this.state.orderSdacha,onChange:this.changeSdacha,endAdornment:r().createElement(I.G,{icon:k.ED2}),label:"Подготовить сдачу с"}))):null,r().createElement("div",null,r().createElement("div",{className:"tableMobile"},this.state.cartItems_main.map((function(e,t){return r().createElement(ot,{key:t,item:e,type:"item"})})),this.state.cartItems_promo.map((function(e,t){return r().createElement(ot,{key:t,item:e,type:"promo"})})),r().createElement("div",{className:"boxItem rowAboutDop"},r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Соевый соус, имбирь и васаби приобретаются отдельно!"),r().createElement("br",null),r().createElement(C.Z,{gutterBottom:!0,variant:"h5",component:"span",className:""},"Не забудьте добавить нужные позиции в корзину.")),this.state.cartItems_dop.map((function(e,t){return r().createElement(ot,{key:t,item:e,type:"dop"})})))),r().createElement("div",{className:"bottomOrder"},r().createElement("div",null,r().createElement(C.Z,{variant:"h5",component:"span"},"К оплате"),r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice"},this.state.sumDiv+this.state.allPrice," ",r().createElement(I.G,{icon:k.ED2}))),r().createElement("div",null,r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:this.startOrder.bind(this)},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Оформить заказ")))))),r().createElement(O.Z,{open:this.state.errorOpen,onClose:function(){return e.setState({errorOpen:!1})},className:"DialogErr"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},this.state.error.title),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({errorOpen:!1})},icon:k.NBC}),r().createElement(ue.Z,null,r().createElement(We.Z,{className:"DialogErrText"},this.state.error.text)),r().createElement(he.Z,null,r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({errorOpen:!1})}},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Хорошо")))),r().createElement(O.Z,{open:this.state.chooseAddr,fullWidth:!0,onClose:function(){return e.setState({chooseAddr:!1})},className:"DialogChooseAddr"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Адрес доставки"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({chooseAddr:!1})},icon:k.NBC}),r().createElement(ue.Z,null,r().createElement(Pe.Z,{component:"fieldset"},r().createElement(Qe.Z,{name:"addrs",value:this.state.orderAddr?this.state.orderAddr.id:0,onChange:this.changeAddr},this.state.my_addr.map((function(e,t){return r().createElement("div",{key:t,className:"boxAddr"},r().createElement(Ne.Z,{value:e.id,control:r().createElement(Ve.Z,null),label:e.city_name+", "+e.street+" "+e.home+", Пд. "+e.pd+", Эт. "+e.et+", Кв. "+e.kv}),r().createElement(I.G,{icon:k.NBC}))})))),r().createElement(C.Z,{variant:"h5",component:"span",className:"newAddrMobile",onClick:function(){e.setState({chooseAddr:!1,chooseNewAddr:!0})}},"Новый адрес"))),r().createElement(O.Z,{open:this.state.chooseNewAddr,fullWidth:!0,onClose:function(){return e.setState({chooseNewAddr:!1})},className:"DialogChooseNewAddr"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Новый адрес"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({chooseNewAddr:!1})},icon:k.NBC}),r().createElement(ue.Z,null,r().createElement("div",{className:"newAddrMobile"},r().createElement(et.ZP,{freeSolo:!0,id:"newAddrStreet",style:{width:"100%"},onBlur:this.checkNewAddr.bind(this),options:this.state.all_addr.map((function(e){return e.value})),renderInput:function(e){return r().createElement(Ze.Z,(0,f.Z)({},e,{label:"Адрес",margin:"normal"}))}}),r().createElement(Ze.Z,{label:"Подъезд",style:{width:"100%"},value:this.state.newAddrPD,onChange:function(t){return e.setState({newAddrPD:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),r().createElement(Ze.Z,{label:"Этаж",style:{width:"100%"},value:this.state.newAddrET,onChange:function(t){return e.setState({newAddrET:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)}),r().createElement(Ze.Z,{label:"Квартира",style:{width:"100%"},value:this.state.newAddrKV,onChange:function(t){return e.setState({newAddrKV:t.target.value})},onBlur:this.saveDataCustomAddr.bind(this)})),r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({chooseNewAddr:!1})}},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Использовать")))),r().createElement(O.Z,{open:this.state.choosePicDialog,fullWidth:!0,onClose:function(){return e.setState({choosePicDialog:!1})},className:"DialogChoosePicDialog"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Адрес кафе"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({choosePicDialog:!1})},icon:k.NBC}),r().createElement(ue.Z,null,r().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},this.state.pic_point.map((function(t,a){return r().createElement("div",{className:"boxPic "+(e.state.orderPic==t.id?"active":""),id:"pic_"+t.id,key:a,onClick:e.choosePic.bind(e,t.id)},r().createElement(C.Z,{variant:"h5",component:"span"},t.raion),r().createElement(C.Z,{variant:"h5",component:"span"},t.addr,", c 10:00 до 21:30"))}))))),r().createElement(O.Z,{open:this.state.chooseTimeDialog,fullWidth:!0,onClose:function(){return e.setState({chooseTimeDialog:!1})},className:"DialogChoosePicDialog"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Время заказа"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({chooseTimeDialog:!1})},icon:k.NBC}),r().createElement(ue.Z,null,r().createElement("div",{style:{display:"flex",flexDirection:"column"}},r().createElement(Pe.Z,{style:{width:"100%",paddingBottom:20}},r().createElement(we.Z,{htmlFor:"age-native-simple"},"День"),r().createElement(De.Z,{displayEmpty:!0,value:this.state.orderPredDay,onChange:this.changePredDay,inputProps:{id:"age-native-simple"}},r().createElement(Te.Z,{value:0},"Как можно быстрее"),this.state.date_pred.map((function(e,t){return r().createElement(Te.Z,{key:t,value:e.date},e.text)})))),r().createElement(Pe.Z,{style:{width:"100%",paddingBottom:20,display:0==this.state.orderPredDay?"none":"inline-flex"}},r().createElement(we.Z,{htmlFor:"age-native-simple1"},"Время"),r().createElement(De.Z,{displayEmpty:!0,value:this.state.orderPredTime,onChange:this.changePredTime,inputProps:{id:"age-native-simple1"}},this.state.timePred.map((function(e,t){return r().createElement(Te.Z,{key:t,value:e.value},e.text)}))))),r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",onClick:function(){return e.setState({chooseTimeDialog:!1})}},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"Использовать")))),r().createElement(O.Z,{onClose:function(){return e.setState({choosePayDialog:!1})},"aria-labelledby":"simple-dialog-title",open:this.state.choosePayDialog,fullWidth:!0,className:"DialogChoosePayDialog"},r().createElement(pe.Z,{id:"simple-dialog-title",style:{paddingBottom:0}},"Оплата"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({choosePayDialog:!1})},icon:k.NBC}),r().createElement(Je.Z,null,this.state.renderPay.map((function(t,a){return r().createElement(He.Z,{button:!0,onClick:e.changePayMobile.bind(e,t.type),key:a},r().createElement(Ke.Z,null,r().createElement(qe.Z,{style:{color:"#fff",backgroundColor:"#000"}},"cash"==t.type?r().createElement(I.G,{icon:k.aLp}):"in"==t.type?r().createElement(I.G,{icon:k.J4t}):r().createElement(I.G,{icon:k.Ozh}))),r().createElement(Ye.Z,{primary:t.title}))})))),r().createElement(O.Z,{open:this.state.orderCheckDop,fullWidth:!0,onClose:this.startOrderNext.bind(this),className:"DialogOrderCheckDopDialog"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"А как же палочки и соевый соус ?"),r().createElement(I.G,{className:"closeDialog",onClick:this.startOrderNext.bind(this),icon:k.NBC}),r().createElement(ue.Z,null,r().createElement("div",{className:"tableMobile OrderCheckDopDialog"},this.state.cartItems_dop.map((function(e,t){return r().createElement(ot,{key:t,item:e,type:"dop"})})))),r().createElement(he.Z,{style:{padding:"12px 24px",paddingBottom:24}},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"},onClick:this.startOrderNext.bind(this)},r().createElement(Z.Z,{variant:"contained",style:{width:"100%"},className:"BtnCardMain CardInCardItem"},"Продолжить")))),!0===this.state.orderCheck?r().createElement(O.Z,{open:this.state.orderCheck,fullWidth:!0,onClose:function(){return e.setState({orderCheck:!1})},className:"DialogOrderCheckDialog"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckTitle"},"Подтверждение заказа"),r().createElement(I.G,{className:"closeDialog",onClick:function(){return e.setState({orderCheck:!1})},icon:k.NBC}),r().createElement(ue.Z,{style:{display:"flex",flexDirection:"column"}},1==parseInt(this.state.orderTimes)?null:r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Время предзаказа: ",this.state.orderPredDay+" "+this.state.orderPredTime),0==parseInt(this.state.orderType)?r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Доставим: ",this.state.orderAddr?this.state.orderAddr.city_name+", "+this.state.orderAddr.street+" "+this.state.orderAddr.home+", Пд.:"+this.state.orderAddr.pd+", Эт.:"+this.state.orderAddr.et+", Кв.:"+this.state.orderAddr.kv:null):r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Заберу: ",this.state.picPointInfo?this.state.picPointInfo.addr:""),0==parseInt(this.state.orderType)&&this.state.orderAddr&&1==parseInt(this.state.orderAddr.dom_true)?r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Домофон не работает"):null,this.state.orderPromo.length>0?r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Промокод: ",this.state.orderPromo):null,r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Оплачу: ",this.state.renderPay.find((function(t){return t.type==e.state.orderPay})).title),0==parseInt(this.state.orderType)&&"cash"==this.state.orderPay?this.state.orderSdacha.length>0?r().createElement(C.Z,{variant:"h5",component:"span",className:"nameSdacha orderCheckText"},"Сдача с: ",this.state.orderSdacha," ",r().createElement(I.G,{icon:k.ED2})):r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Без сдачи"):null,r().createElement("table",{className:"tableOrderCheck"},r().createElement("tbody",null,A.getItems().map((function(e,t){return parseInt(e.count)>0?r().createElement("tr",{key:t},r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.name)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.count)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},e.all_price," ",r().createElement(I.G,{icon:k.ED2})))):null})),this.state.cartItems_promo.map((function(e,t){return r().createElement("tr",{key:t},r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.name)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},e.count)),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},e.allPrice," ",r().createElement(I.G,{icon:k.ED2}))))})),0==parseInt(this.state.orderType)?r().createElement("tr",null,r().createElement("td",{colSpan:"2"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText"},"Доставка")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},A.getSumDiv()," ",r().createElement(I.G,{icon:k.ED2})))):null),r().createElement("tfoot",null,r().createElement("tr",null,r().createElement("td",{colSpan:"2"},r().createElement(C.Z,{variant:"h5",component:"span",className:"orderCheckText bold"},"Сумма заказа")),r().createElement("td",null,r().createElement(C.Z,{variant:"h5",component:"span",className:"namePrice orderCheckText"},parseInt(A.getAllPrice())+parseInt(A.getSumDiv())," ",r().createElement(I.G,{icon:k.ED2}))))))),r().createElement(he.Z,{style:{padding:"12px 24px",paddingBottom:24}},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder",style:{width:"100%"},onClick:function(){return e.setState({orderCheck:!1})}},r().createElement(Z.Z,{variant:"contained",style:{width:"100%"},className:"BtnCardMain CardInCardItem"},"Подтвердить заказ")))):null)}}],[{key:"fetchData",value:function(e){var t,a={type:"get_page_info",city_id:(t=e,t.split("/")[1]),page:"cart"};return P()({method:"POST",url:"https://jacofood.ru/src/php/test_app.php",headers:{"content-type":"application/x-www-form-urlencoded"},data:at.stringify(a)}).then((function(e){if(200===e.status){var t=e.data;return{title:t.page.title,description:t.page.description,page:t.page}}})).catch((function(e){console.log(e)}))}}]),a}(r().Component),ct=a(1276),lt=a(9039),mt=a(6627),dt=a.n(mt),pt=a(9009);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var ht=a(7563),ft=function(e){(0,m.Z)(a,e);var t=ut(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){var e=A.getItems();if(e.length>0){var t=[];e.map((function(e){e.count>0&&t.push(e)})),n.setState({cartItems:e})}(0,w.EH)((function(){var e=A.getItems(),t=[];e.map((function(e){e.count>0&&t.push(e)})),n.setState({cartItems:t}),A.getSumDiv()}))})),(0,u.Z)((0,l.Z)(n),"handleClick",(function(e){"cart"!==A.getPage()?n.setState({anchorEl:e.currentTarget}):n.handleClose()})),(0,u.Z)((0,l.Z)(n),"handleClose",(function(){n.setState({anchorEl:null})})),n.state={anchorEl:null,cartItems:[],allPrice:0,promoName:"",promoText:""},n}return(0,c.Z)(a,[{key:"add",value:function(e){A.AddItem(e)}},{key:"minus",value:function(e){A.MinusItem(e)}},{key:"checkPromo",value:function(){var e=this,t=this.state.promoName;if(""==t);else{1,fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ht.stringify({type:"get_promo",point_id:1,city_id:A.getCity(),promo_name:t})}).then((function(e){return e.json()})).then((function(a){A.setPromo(JSON.stringify(a),t);var n=A.checkPromo();e.setState({promoText:n.text})}))}}},{key:"render",value:function(){var e=this,t=Boolean(this.state.anchorEl),a=t?"simple-popover":void 0;return r().createElement("div",null,r().createElement(F.Z,{className:"ShopIconBTN","aria-describedby":a,color:"inherit","aria-label":"menu",onClick:this.handleClick.bind(this)},r().createElement(pt.Z,{badgeContent:A.getAllPrice()+A.getSumDiv(),max:5e5,color:"primary"},r().createElement(ct.Z,null))),r().createElement(q.ZP,{id:a,open:t,anchorEl:this.state.anchorEl,onClose:this.handleClose.bind(this),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r().createElement("div",{style:{width:400,padding:16}},r().createElement("table",{className:"TableMini"},r().createElement("tbody",null,this.state.cartItems.map((function(t,a){return r().createElement("tr",{key:a},r().createElement("td",{className:"TableMiniName"},t.name),r().createElement("td",null,r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderWOBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:e.minus.bind(e,t.item_id)},r().createElement(I.G,{icon:k.Kl4,style:{fontSize:"1rem"}})),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain"},r().createElement(C.Z,{component:"span",className:"CardCountItem"},t.count)),r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain",onClick:e.add.bind(e,t.item_id)},r().createElement(I.G,{icon:k.r8p,style:{fontSize:"1rem"}})))),r().createElement("td",{style:{width:"30%"}},r().createElement("div",{className:"TableMiniPrice"},t.all_price," ",r().createElement(I.G,{icon:k.ED2}))))}))),r().createElement("tfoot",null,r().createElement("tr",{style:{height:35}},r().createElement("td",{className:"TableMiniFullName"},"Сумма:"),r().createElement("td",{className:"",style:{width:"30%",textAlign:"center"}},r().createElement("div",{className:"TableMiniPrice",style:{marginRight:21}},A.getAllPrice()+A.getSumDiv()," ",r().createElement(I.G,{icon:k.ED2})))))),r().createElement(Re.Z,{component:"div",className:"SpacePromo"},r().createElement(ze.Z,{onBlur:this.checkPromo.bind(this),value:this.state.promoName,onChange:function(t){return e.setState({promoName:t.target.value})},placeholder:"Промокод"}),r().createElement(je.Z,{orientation:"vertical"}),r().createElement(F.Z,{color:"primary","aria-label":"directions",onClick:this.checkPromo.bind(this)},r().createElement(Ue.Z,null))),this.state.promoText.length>0?r().createElement("div",{className:"DescPromo"},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},"Промокод дает: ",this.state.promoText)):null,r().createElement("div",{className:"InCart"},null!==A.getToken()?r().createElement(o.OL,{to:"/"+A.getCity()+"/cart",exact:!0,style:{textDecoration:"none"},onClick:this.handleClose.bind(this)},r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem"},"В корзину"))):r().createElement(b.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorder"},r().createElement(Z.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.props.openLogin},"Войти"))))))}}]),a}(r().Component),yt=function(e){(0,m.Z)(a,e);var t=ut(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){(0,w.EH)((function(){n.setState({activePage:A.getPage()}),n.setState({cityName:A.getCity()})})),n.load()})),(0,u.Z)((0,l.Z)(n),"handleKeyPress",(function(e){"Enter"===e.key&&n.sendSMS()})),n.state={categoryItems:[],cartItems:[],activePage:"",is_load:!1,openCity:!1,cityName:"",testData:[1,2,3,4,5,6,7,8,9],cityList:[],openLogin:!1,userLogin:"",userLoginFormat:"",userCode:"",stage_1:!0,stage_2:!1,timerSMS:59,errPhone:"",errSMS:"",userName:"",soc_link:null},n}return(0,c.Z)(a,[{key:"load",value:function(){var e=this;A.getCity()&&0==this.state.categoryItems.length&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ht.stringify({type:"get_cat_web",city_id:A.getCity(),user_id:A.getToken()})}).then((function(e){return e.json()})).then((function(t){console.log(t),A.userName=t.user_name,A.setDops(t.need_dop),A.setAllItems(t.all_items),A.setAllItemsCat(t.arr),A.setFreeItems(t.free_items),A.setBanners(t.baners),A.setCityRU(t.this_city_name_ru),e.setState({cityList:t.city_list,categoryItems:t.arr,is_load:!0})})).catch((function(e){}))}},{key:"openCity",value:function(){this.setState({openCity:!0})}},{key:"closeCity",value:function(){this.setState({openCity:!1})}},{key:"chooseCity",value:function(e){var t=window.location.href;window.location.href=t.replace(this.state.cityName,e)}},{key:"openLogin",value:function(){this.setState({openLogin:!0})}},{key:"closeLogin",value:function(){this.setState({openLogin:!1})}},{key:"sendSMS",value:function(){var e=this;this.setState({errPhone:"",errSMS:""});var t=this.state.userLogin;t=(t=(t=(t=(t=t.split(" ").join("")).split("(").join("")).split(")").join("")).split("-").join("")).slice(1),this.setState({userLoginFormat:t}),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ht.stringify({type:"create_profile",number:t})}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.st){e.setState({stage_1:!1,stage_2:!0,errPhone:""});var a=setInterval((function(){e.setState({timerSMS:e.state.timerSMS-1}),0==e.state.timerSMS&&clearInterval(a)}),1e3)}else e.setState({errPhone:t.text})}))}},{key:"repeatSMS",value:function(){var e=this;this.setState({errSMS:""}),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ht.stringify({type:"repeat_sms",number:this.state.userLoginFormat})}).then((function(e){return e.json()})).then((function(t){if(t.st){e.setState({timerSMS:59});var a=setInterval((function(){e.setState({timerSMS:e.state.timerSMS-1}),0==e.state.timerSMS&&clearInterval(a)}),1e3)}else e.setState({errSMS:t.text})}))}},{key:"checkCode",value:function(){var e=this;this.setState({errSMS:""}),fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ht.stringify({type:"check_profile",cod:this.state.userCode,number:this.state.userLoginFormat})}).then((function(e){return e.json()})).then((function(t){t.st?(A.setToken(t.token,t.name),e.closeLogin()):e.setState({errSMS:t.text})}))}},{key:"changeNumber",value:function(){this.setState({stage_1:!0,stage_2:!1,errPhone:"",errSMS:""})}},{key:"changeCode",value:function(e){var t=this;e=e.target.value,this.setState({userCode:e}),4==(parseInt(e)+"").length&&setTimeout((function(){t.checkCode()}),500)}},{key:"render",value:function(){var e=this;return this.state.is_load?r().createElement("div",null,r().createElement(G.Z,{position:"fixed",className:"header",style:{zIndex:2}},r().createElement(L.Z,{className:"sub_header"},r().createElement(y.Z,null,r().createElement(y.Z,{item:!0,style:{marginRight:15}},r().createElement(o.OL,{to:"/"+this.state.cityName+"/"},r().createElement("img",{alt:"Жако доставка роллов и пиццы",src:"https://jacochef.ru/src/img/Bely_fon_logo.png"}))),r().createElement(z.Z,{mdDown:!0},r().createElement(y.Z,{item:!0,className:"CityProfileNav"},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span",onClick:this.openCity.bind(this),style:{display:"flex",flexDirection:"row"}},A.getCityRU()," ",r().createElement(lt.Z,null)),A.getToken()?A.userName&&A.userName.length>0?r().createElement(o.OL,{to:"/"+this.state.cityName+"/profile",className:"cat"},A.userName):r().createElement(o.OL,{to:"/"+this.state.cityName+"/profile"},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},"Профиль")):r().createElement(C.Z,{className:"cat",variant:"h5",component:"span",onClick:this.openLogin.bind(this)},"Войти")),this.state.categoryItems.map((function(t,a){return r().createElement(y.Z,{item:!0,key:a},"home"==e.state.activePage?r().createElement(S.rU,{key:a,to:"cat"+t.id,spy:!0,isDynamic:!0,onSetActive:function(e){document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),document.querySelector("#link_"+t.id).classList.add("activeCat")},smooth:!0,offset:-100,activeClass:"activeCat",id:"link_"+t.id,style:{width:"max-content",display:"flex",whiteSpace:"nowrap",padding:"4px 8px"}},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},t.name)):r().createElement(o.OL,{to:"/"+e.state.cityName+"/",className:"catLink",style:{padding:"4px 8px"},onClick:function(){"undefined"==typeof window||localStorage.setItem("goTo",t.id)}},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},t.name)))})),r().createElement(y.Z,{item:!0},r().createElement(o.OL,{style:{padding:"4px 8px"},to:"/"+this.state.cityName+"/actii",className:"catLink"},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},"Акции"))),r().createElement(y.Z,{item:!0},r().createElement(o.OL,{style:{padding:"4px 8px"},to:"/"+this.state.cityName+"/contact",className:"catLink"},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},"Контакты"))),r().createElement(y.Z,{item:!0},r().createElement(ft,{openLogin:this.openLogin.bind(this)})))),r().createElement(z.Z,{lgUp:!0},r().createElement(C.Z,{variant:"h5",component:"span",className:"thisCity",onClick:this.openCity.bind(this)},r().createElement(I.G,{icon:k.FGq})," ",A.getCityRU()))),"home"==this.state.activePage?r().createElement(y.Z,{className:"scrollCat"},r().createElement(z.Z,{lgUp:!0},this.state.categoryItems.map((function(e,t){return r().createElement(S.rU,{key:t,to:"cat"+e.id,spy:!0,onSetActive:function(t){document.querySelector(".activeCat")&&document.querySelector(".activeCat").classList.remove("activeCat"),document.querySelector("#link_"+e.id).classList.add("activeCat"),document.getElementById("link_"+e.id).scrollIntoView(!0),document.querySelector(".scrollCat").animate({scrollLeft:200},100)},smooth:!0,offset:-100,activeClass:"activeCat",id:"link_"+e.id},r().createElement(C.Z,{className:"cat",variant:"h5",component:"span"},e.name))})))):null),r().createElement(O.Z,{open:this.state.openCity,fullWidth:!0,maxWidth:"xs",onClose:this.closeCity.bind(this),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:"ModalCity"},r().createElement(pe.Z,{id:"alert-dialog-title"},"Выберите город"),r().createElement(ue.Z,{className:"ModalContent_1_1",style:{paddingBottom:24,paddingTop:0}},this.state.cityList.map((function(t,a){return r().createElement(C.Z,{key:a,variant:"h5",component:"span",className:"ModalLabel "+(e.state.cityName==t.link?"active":""),onClick:e.chooseCity.bind(e,t.link)},t.name)})))),r().createElement(O.Z,{open:this.state.openLogin,fullWidth:!0,maxWidth:"xs",onClose:this.closeLogin.bind(this),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:"ModalAuth"},r().createElement(pe.Z,{id:"alert-dialog-title"},"Вход на сайт"),r().createElement(ue.Z,{className:"ModalContent_1_1"},r().createElement("div",{className:"ModalContent_1_2"},r().createElement(C.Z,{variant:"h5",component:"span",className:"ModalLabel"},"Номер телефона"),r().createElement(dt(),{className:"InputMask",mask:"8 (999) 999-99-99",placeholder:"8 (999) 999-99-99",disabled:!this.state.stage_1,value:this.state.userLogin,onKeyPress:this.handleKeyPress,onChange:function(t){return e.state.stage_1?e.setState({userLogin:t.target.value}):{}}}),this.state.stage_2?r().createElement(C.Z,{variant:"h5",component:"span",className:"changeNumber",onClick:this.changeNumber.bind(this)},"Изменеить номер"):null,this.state.errPhone.length>0?r().createElement("div",{style:{marginTop:10,padding:16,backgroundColor:"#BB0025",borderRadius:4}},r().createElement(C.Z,{variant:"h5",component:"span",style:{fontSize:"1.1rem",color:"#fff"}},this.state.errPhone)):null),this.state.stage_2?r().createElement("div",{className:"ModalContent_1_3"},r().createElement(C.Z,{variant:"h5",component:"span",className:"ModalLabel"},"Код из смс"),r().createElement("div",{className:"ModalContent_1_2"},r().createElement(dt(),{className:"InputMask",mask:"9999",value:this.state.userCode,onChange:this.changeCode.bind(this)}),this.state.timerSMS>0?r().createElement(C.Z,{variant:"h5",component:"span",style:{fontSize:"0.8rem",paddingTop:10}},"Новое смс доступно через "+this.state.timerSMS+" сек."):r().createElement(C.Z,{variant:"h5",component:"span",style:{fontSize:"0.8rem",paddingTop:10,cursor:"pointer",width:"fit-content"},onClick:this.repeatSMS.bind(this)},"Получить новый код")),this.state.errSMS.length>0?r().createElement("div",{style:{marginTop:10,padding:16,backgroundColor:"#BB0025",borderRadius:4}},r().createElement(C.Z,{variant:"h5",component:"span",style:{fontSize:"1.1rem",color:"#fff"}},this.state.errSMS)):null):null),this.state.stage_1?r().createElement(he.Z,{style:{padding:"12px 24px"}},r().createElement(Z.Z,{onClick:this.sendSMS.bind(this),style:{backgroundColor:"#BB0025",color:"#fff",padding:"6px 30px"}},"Выслать код")):null,this.state.stage_2?r().createElement(he.Z,{style:{padding:"12px 24px"}},r().createElement(Z.Z,{onClick:this.checkCode.bind(this),style:{backgroundColor:"#BB0025",color:"#fff",padding:"6px 30px"}},"Подтвердить код")):null),"home"==this.state.activePage?r().createElement(z.Z,{lgUp:!0},r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:85,zIndex:0,backgroundColor:"#bababa",opacity:.1}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:88,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:91,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:94,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:97,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:100,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:103,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:106,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:109,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",top:112,zIndex:0,backgroundColor:"#bababa",opacity:.01}})):null):null}}],[{key:"openLoginNew",value:function(){this.setState({openLogin:!0})}}]),a}(r().Component),vt=a(150),gt=a(1417);function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var _t=a(7563),Zt={itemsStore:A},bt=function(e){(0,m.Z)(a,e);var t=Et(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){(0,w.EH)((function(){n.setState({allPrice:A.getSumDiv()+A.getAllPrice(),thisPage:A.getPage()})}))})),n.state={allPrice:0,thisPage:""},n}return(0,c.Z)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.allPrice!==t.allPrice||this.state.thisPage!==t.thisPage}},{key:"render",value:function(){var e=A.getCity();return r().createElement("div",{className:"bottomNavigate"},r().createElement(o.OL,{to:"/"+e+"/",exact:!0,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},r().createElement(I.G,{icon:k.fkH,style:{color:"home"==this.state.thisPage?"black":"gray"}})),r().createElement(o.OL,{to:"/"+e+"/actii",exact:!0,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},r().createElement(I.G,{icon:k.Cly,style:{color:"actii"==this.state.thisPage?"black":"gray"}})),A.getToken()?r().createElement(o.OL,{to:"/"+e+"/cart",exact:!0,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},r().createElement(pt.Z,{badgeContent:this.state.allPrice,max:5e5,color:"primary"},r().createElement(ct.Z,{style:{fill:"cart"==this.state.thisPage?"black":"gray"}}))):r().createElement(C.Z,{className:"MuiButtonBase-root MuiBottomNavigationAction-root",onClick:this.props.login},r().createElement(pt.Z,{badgeContent:this.state.allPrice,max:5e5,color:"primary"},r().createElement(ct.Z,{style:{fill:"cart"==this.state.thisPage?"black":"gray"}}))),r().createElement(o.OL,{to:"/"+e+"/contact",exact:!0,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},r().createElement(I.G,{icon:k.FGq,style:{color:"contact"==this.state.thisPage?"black":"gray"}})),A.getToken()?r().createElement(o.OL,{to:"/"+e+"/profile",exact:!0,className:"MuiButtonBase-root MuiBottomNavigationAction-root"},r().createElement(I.G,{icon:k.ILF,style:{color:"profile"==this.state.thisPage?"black":"gray"}})):r().createElement(C.Z,{className:"MuiButtonBase-root MuiBottomNavigationAction-root",onClick:this.props.login},r().createElement(I.G,{icon:k.ILF,style:{color:"profile"==this.state.thisPage?"black":"gray"}})))}}]),a}(r().Component);function Ct(e){var t=e.code,a=e.children;return r().createElement(h.AW,{render:function(e){var n=e.staticContext;return n&&(n.status=t),a}})}function It(){return r().createElement(Ct,{code:404},r().createElement(y.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},r().createElement(y.Z,{item:!0,xs:12},r().createElement(C.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}var kt=function(e){(0,m.Z)(a,e);var t=Et(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){(0,w.EH)((function(){n.setState({cityName:A.getCity()}),n.loadPageInfo()}))})),n.state={soc_link:null,cityName:"",is_load:!1},n}return(0,c.Z)(a,[{key:"loadPageInfo",value:function(){var e=this;A.getCity()&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:_t.stringify({type:"get_page_info",city_id:A.getCity(),page:"info"})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({soc_link:t.soc_link,is_load:!0})})).catch((function(e){}))}},{key:"render",value:function(){return r().createElement("footer",{className:"footer"},r().createElement(y.Z,{container:!0,className:"mainContainer"},r().createElement(y.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},r().createElement(C.Z,{variant:"body1"},"Жако роллы и пицца — сеть кафе"),r().createElement(C.Z,{variant:"body1"},"© Жако 2017 - ",(new Date).getFullYear())),r().createElement(y.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},r().createElement(C.Z,{variant:"body1"},"О Компании"),r().createElement(C.Z,{variant:"body1"},"Вакансии"),r().createElement(C.Z,{variant:"body1"},"Публичная оферта")),r().createElement(y.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},r().createElement(C.Z,{variant:"body1"},"Политика конфиденциальности"),r().createElement(C.Z,{variant:"body1"},"Доставка и контакты"),r().createElement(C.Z,{variant:"body1"},"Правила оплаты товаров")),this.state.is_load?r().createElement(y.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12,className:"socIcons"},this.state.soc_link&&this.state.soc_link.link_fb?r().createElement(o.OL,{to:{pathname:this.state.soc_link.link_fb},target:"_blank",style:{textDecoration:"none"}},r().createElement(I.G,{icon:gt.AYu,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_inst?r().createElement(o.OL,{to:{pathname:this.state.soc_link.link_inst},target:"_blank",style:{textDecoration:"none"}},r().createElement(I.G,{icon:gt.Zzi,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_ok?r().createElement(o.OL,{to:{pathname:this.state.soc_link.link_ok},target:"_blank",style:{textDecoration:"none"}},r().createElement(I.G,{icon:gt.eSE,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_vk?r().createElement(o.OL,{to:{pathname:this.state.soc_link.link_vk},target:"_blank",style:{textDecoration:"none"}},r().createElement(I.G,{icon:gt.iD2,style:{fontSize:"2rem",padding:10}})):null,r().createElement(o.OL,{to:{pathname:"https://t.me/jacofood"},target:"_blank",style:{textDecoration:"none"}},r().createElement(I.G,{icon:gt.IKq,style:{fontSize:"2rem",padding:10}}))):null))}}]),a}(r().Component),St=function(e){(0,m.Z)(a,e);var t=Et(a);function a(e){var n;return(0,s.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"componentDidMount",(function(){(0,w.EH)((function(){n.setState({activePage:A.getPage()}),n.setState({cityName:A.getCity()})}))})),console.log(e),n.state={categoryItems:[],cartItems:[],activePage:"",is_load:!1,openCity:!1,cityName:"",testData:[1,2,3,4,5,6,7,8,9],cityList:[],openLogin:!1,userLogin:"",userLoginFormat:"",userCode:"",stage_1:!0,stage_2:!1,timerSMS:59,errPhone:"",errSMS:"",userName:"",soc_link:null},n}return(0,c.Z)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.activePage!==t.activePage||this.state.cityName!==t.cityName}},{key:"render",value:function(){return r().createElement(vt.zt,Zt,r().createElement("div",{className:"home"},r().createElement(yt,null),r().createElement(h.rs,null,r().createElement(h.AW,{path:"/:cityName/contact",exact:!0,component:de}),r().createElement(h.AW,{path:"/:cityName/actii",exact:!0,component:ye}),r().createElement(h.AW,{path:"/:cityName/menu",exact:!0,component:re}),r().createElement(h.AW,{path:"/:cityName",exact:!0,component:re}),r().createElement(h.AW,{exact:!0,path:"/:cityName/profile/"},!A.getToken()&&this.state.cityName?r().createElement(h.l_,{push:!0,to:"/"+this.state.cityName+"/"}):r().createElement(Ge,null)),r().createElement(h.AW,{path:"/:cityName/menu/:itemLink",exact:!0,component:V}),r().createElement(h.AW,{path:"/:cityName/cart",exact:!0,component:st}),r().createElement(h.AW,{component:It})),"cart"==this.state.activePage?r().createElement(z.Z,{lgUp:!0},r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:171,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:168,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:165,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:162,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:159,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:156,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:153,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:150,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:147,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:144,zIndex:0,backgroundColor:"#bababa",opacity:.1}})):r().createElement(z.Z,{lgUp:!0},r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:72,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:69,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:66,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:63,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:60,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:57,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:54,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:51,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:48,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),r().createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:45,zIndex:0,backgroundColor:"#bababa",opacity:.1}})),r().createElement(z.Z,{lgUp:!0},r().createElement(bt,{login:yt.openLogin})),r().createElement(kt,null)))}}]),a}(r().Component);i.hydrate(r().createElement(o.VK,null,r().createElement(St,null)),document.getElementById("app"))},8293:(e,t,a)=>{var n={"./ru":238,"./ru.js":238};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=8293},9297:e=>{"use strict";e.exports=react}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var i=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,a,r,i)=>{if(!a){var o=1/0;for(l=0;l<e.length;l++){for(var[a,r,i]=e[l],s=!0,c=0;c<a.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(s=!1,i<o&&(o=i));s&&(e.splice(l--,1),t=r())}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[a,r,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[o,s,c]=a,l=0;for(r in s)n.o(s,r)&&(n.m[r]=s[r]);for(c&&c(n),t&&t(a);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[o[l]]=0;n.O()},a=self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=n.O(void 0,[736],(()=>n(4424)));r=n.O(r)})();
//# sourceMappingURL=main.js.map