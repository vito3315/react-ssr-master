(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5798:(t,e,n)=>{"use strict";var i=n(7294),a=n(3935),r=n(3727),o=n(6610),s=n(5991),c=n(3349),l=n(379),m=n(6070),p=n(7608),u=n(6156),d=n(5977),h=n(684),f=n(1749),y=n(2318),_=n(2613),g=n(150),I=n(6282),b=n(8949),v=n(7625),k=n(1417);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,p.Z)(t);if(e){var a=(0,p.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,m.Z)(this,n)}}var x=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(660),n.e(170)]).then(n.bind(n,7227))})),Z=((0,h.ZP)((function(){return Promise.all([n.e(216),n.e(660),n.e(831)]).then(n.bind(n,7660))})),(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(68)]).then(n.bind(n,6068))}))),N=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(173)]).then(n.bind(n,7173))})),S=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(858)]).then(n.bind(n,3858))})),P=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(72)]).then(n.bind(n,1072))})),C=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(546)]).then(n.bind(n,6546))})),w=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(716)]).then(n.bind(n,8716))})),O=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(407)]).then(n.bind(n,3407))})),A=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(25)]).then(n.bind(n,4025))})),D=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(815)]).then(n.bind(n,2815))})),z=(0,h.ZP)((function(){return Promise.all([n.e(216),n.e(107)]).then(n.bind(n,3107))})),J=n(7563),T={itemsStore:I.Z};function L(t){var e=t.code,n=t.children;return i.createElement(d.AW,{render:function(t){var i=t.staticContext;return i&&(i.status=e),n}})}function W(){return i.createElement(L,{code:404},i.createElement(f.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},i.createElement(f.Z,{item:!0,xs:12},i.createElement(y.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}var U=function(t){(0,l.Z)(n,t);var e=E(n);function n(t){var i;return(0,o.Z)(this,n),i=e.call(this,t),(0,u.Z)((0,c.Z)(i),"componentDidMount",(function(){(0,b.EH)((function(){i.setState({cityName:I.Z.getCity()}),i.loadPageInfo()}))})),i.state={soc_link:null,cityName:i.props.cityName,is_load:!1},i}return(0,s.Z)(n,[{key:"loadPageInfo",value:function(){var t=this;I.Z.getCity()&&fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:J.stringify({type:"get_page_info",city_id:I.Z.getCity(),page:"info"})}).then((function(t){return t.json()})).then((function(e){t.setState({soc_link:e.soc_link,is_load:!0})})).catch((function(t){}))}},{key:"render",value:function(){return i.createElement("footer",{className:"footer"},i.createElement(f.Z,{container:!0,className:"mainContainer"},i.createElement(f.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12,className:"copy"},i.createElement(y.Z,{variant:"body1"},"© Жако 2017 - ",(new Date).getFullYear())),i.createElement(f.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},i.createElement(r.OL,{to:"/"+this.state.cityName+"/about",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"О Компании")),i.createElement(r.OL,{to:"/"+this.state.cityName+"/jobs",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"Вакансии")),i.createElement(r.OL,{to:"/"+this.state.cityName+"/publichnaya-oferta",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"Публичная оферта"))),i.createElement(f.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12},i.createElement(r.OL,{to:"/"+this.state.cityName+"/politika-konfidencialnosti",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"Политика конфиденциальности")),i.createElement(r.OL,{to:"/"+this.state.cityName+"/contact",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"Доставка и контакты")),i.createElement(r.OL,{to:"/"+this.state.cityName+"/instpayorders",style:{textDecoration:"none"}},i.createElement(y.Z,{variant:"body1"},"Правила оплаты товаров"))),this.state.is_load?i.createElement(f.Z,{item:!0,lg:3,md:3,sm:3,xl:3,xs:12,className:"socIcons"},this.state.soc_link&&this.state.soc_link.link_fb?i.createElement(r.OL,{to:{pathname:this.state.soc_link.link_fb},target:"_blank",style:{textDecoration:"none"}},i.createElement(v.G,{icon:k.AYu,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_inst?i.createElement(r.OL,{to:{pathname:this.state.soc_link.link_inst},target:"_blank",style:{textDecoration:"none"}},i.createElement(v.G,{icon:k.Zzi,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_ok?i.createElement(r.OL,{to:{pathname:this.state.soc_link.link_ok},target:"_blank",style:{textDecoration:"none"}},i.createElement(v.G,{icon:k.eSE,style:{fontSize:"2rem",padding:10}})):null,this.state.soc_link&&this.state.soc_link.link_vk?i.createElement(r.OL,{to:{pathname:this.state.soc_link.link_vk},target:"_blank",style:{textDecoration:"none"}},i.createElement(v.G,{icon:k.iD2,style:{fontSize:"2rem",padding:10}})):null,i.createElement(r.OL,{to:{pathname:"https://t.me/jacofood"},target:"_blank",style:{textDecoration:"none"}},i.createElement(v.G,{icon:k.IKq,style:{fontSize:"2rem",padding:10}}))):null))}}]),n}(i.Component),R=function(t){(0,l.Z)(n,t);var e=E(n);function n(t){var i;return(0,o.Z)(this,n),i=e.call(this,t),(0,u.Z)((0,c.Z)(i),"componentDidMount",(function(){(0,b.EH)((function(){i.setState({activePage:I.Z.getPage()}),i.setState({cityName:I.Z.getCity()})}))})),console.log(i.props),console.log(t),i.state={categoryItems:[],cartItems:[],activePage:"",is_load:!1,openCity:!1,cityName:"",testData:[1,2,3,4,5,6,7,8,9],cityList:[],openLogin:!1,userLogin:"",userLoginFormat:"",userCode:"",stage_1:!0,stage_2:!1,timerSMS:59,errPhone:"",errSMS:"",userName:"",soc_link:null},i}return(0,s.Z)(n,[{key:"shouldComponentUpdate",value:function(t,e){return this.state.activePage!==e.activePage||this.state.cityName!==e.cityName}},{key:"render",value:function(){return i.createElement(g.zt,T,i.createElement("div",{className:"home"},i.createElement(z,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link}),i.createElement(d.rs,null,i.createElement(d.AW,{path:"/:cityName/contact",exact:!0,component:Z}),i.createElement(d.AW,{path:"/:cityName/actii",exact:!0,component:N}),i.createElement(d.AW,{path:"/:cityName/menu",exact:!0},i.createElement(x,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),i.createElement(d.AW,{path:"/:cityName",exact:!0},i.createElement(x,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),i.createElement(d.AW,{path:"/:cityName/item/:id",exact:!0},i.createElement(x,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),i.createElement(d.AW,{exact:!0,path:"/:cityName/profile/",component:S}),i.createElement(d.AW,{path:"/:cityName/menu/:itemLink",exact:!0},i.createElement(x,{data:this.props.globalState.data,city:this.props.globalState.city,this_link:this.props.globalState.this_link})),i.createElement(d.AW,{path:"/:cityName/cart",exact:!0,component:P}),i.createElement(d.AW,{path:"/:cityName/about",exact:!0,component:C}),i.createElement(d.AW,{path:"/:cityName/jobs",exact:!0,component:w}),i.createElement(d.AW,{path:"/:cityName/instpayorders",exact:!0,component:O}),i.createElement(d.AW,{path:"/:cityName/publichnaya-oferta",exact:!0,component:A}),i.createElement(d.AW,{path:"/:cityName/politika-konfidencialnosti",exact:!0,component:D}),i.createElement(d.AW,{path:"/"},i.createElement(d.l_,{push:!0,to:"/togliatti"})),i.createElement(d.AW,{component:W})),"cart"==this.state.activePage?i.createElement(_.Z,{lgUp:!0},i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:171,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:168,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:165,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:162,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:159,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:156,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:153,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:150,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:147,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:144,zIndex:0,backgroundColor:"#bababa",opacity:.1}})):i.createElement(_.Z,{lgUp:!0},i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:72,zIndex:0,backgroundColor:"#bababa",opacity:.01}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:69,zIndex:0,backgroundColor:"#bababa",opacity:.02}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:66,zIndex:0,backgroundColor:"#bababa",opacity:.03}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:63,zIndex:0,backgroundColor:"#bababa",opacity:.04}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:60,zIndex:0,backgroundColor:"#bababa",opacity:.05}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:57,zIndex:0,backgroundColor:"#bababa",opacity:.06}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:54,zIndex:0,backgroundColor:"#bababa",opacity:.07}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:51,zIndex:0,backgroundColor:"#bababa",opacity:.08}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:48,zIndex:0,backgroundColor:"#bababa",opacity:.09}}),i.createElement("div",{style:{width:"100%",height:3,position:"fixed",bottom:45,zIndex:0,backgroundColor:"#bababa",opacity:.1}})),i.createElement(U,{cityName:this.props.globalState.city})))}}]),n}(i.Component);a.hydrate(i.createElement(r.VK,null,i.createElement(R,{globalState:GLOBAL_STATE})),document.getElementById("app"))},6282:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(5061),a=n(6610),r=n(5991),o=n(6156),s=n(8949),c=n(381),l=n.n(c),m=n(7563),p=new(function(){function t(){var e=this;if((0,a.Z)(this,t),(0,o.Z)(this,"items",""),(0,o.Z)(this,"itemsPromo",""),(0,o.Z)(this,"allItems",""),(0,o.Z)(this,"allItemsCat",""),(0,o.Z)(this,"allItemsCatNew",""),(0,o.Z)(this,"banners",""),(0,o.Z)(this,"AllPrice",0),(0,o.Z)(this,"sum_div",0),(0,o.Z)(this,"cityName",""),(0,o.Z)(this,"cityNameRU",""),(0,o.Z)(this,"promo",null),(0,o.Z)(this,"userToken",null),(0,o.Z)(this,"userName",""),(0,o.Z)(this,"activePage",""),(0,o.Z)(this,"need_dops",""),(0,o.Z)(this,"free_items",""),(0,o.Z)(this,"cart_data",""),(0,o.Z)(this,"setSumDiv",(function(t){e.sum_div=parseInt(t)})),(0,o.Z)(this,"setDops",(function(t){e.need_dops=JSON.stringify(t)})),(0,o.Z)(this,"setFreeItems",(function(t){e.free_items=JSON.stringify(t)})),(0,o.Z)(this,"setCityRU",(function(t){e.cityNameRU=t})),(0,o.Z)(this,"setCity",(function(t){e.cityName=t})),(0,o.Z)(this,"setAllPrice",(function(t){e.AllPrice=t})),(0,o.Z)(this,"setPage",(function(t){e.activePage=t})),(0,o.Z)(this,"setToken",(function(t,n){e.userToken=t,e.setUserName(n),"undefined"!=typeof window&&localStorage.setItem("token",t)})),(0,o.Z)(this,"setPromo",(function(t,n){e.promo=t,localStorage.setItem("promo_name",n)})),(0,o.Z)(this,"setBanners",(function(t){e.banners=JSON.stringify(t)})),(0,o.Z)(this,"setItemsPromo",(function(t){e.itemsPromo=JSON.stringify(t)})),(0,o.Z)(this,"setAllItemsCat",(function(t){e.allItemsCat=JSON.stringify(t)})),(0,o.Z)(this,"setAllItemsCatNew",(function(t){e.allItemsCatNew=JSON.stringify(t)})),(0,o.Z)(this,"setItems",(function(t){var n=0,i=0,a=e.getItemsPromo();if(i=t.reduce((function(t,e){return t+parseInt(e.all_price)}),n),n=0,i+=a.reduce((function(t,e){return t+parseInt(e.all_price)}),n),e.setAllPrice(i),e.items=JSON.stringify(t),"undefined"!=typeof window){var r=t.filter((function(t){return t.count>0}));r=JSON.stringify(r),localStorage.setItem("my_cart",r)}})),(0,o.Z)(this,"saveCartData",(function(t){var n=JSON.stringify(t);e.cart_data=n,"undefined"!=typeof window&&localStorage.setItem("cartData",n)})),(0,o.Z)(this,"setAllItems",(function(t){e.allItems=JSON.stringify(t)})),"undefined"!=typeof window){if(localStorage.getItem("my_cart")){var n=JSON.parse(localStorage.getItem("my_cart")),i=[];n.forEach((function(t){i.push({name:t.name,item_id:t.item_id,count:t.count,one_price:parseInt(t.one_price),all_price:parseInt(t.one_price)*parseInt(t.count)})})),this.setItems(i)}localStorage.getItem("token")&&this.setToken(localStorage.getItem("token")),localStorage.getItem("cartData")&&(this.cartData=localStorage.getItem("cartData")),localStorage.getItem("promo_name")&&setTimeout((function(){e.getInfoPromo(localStorage.getItem("promo_name"))}),300)}(0,s.ky)(this)}return(0,r.Z)(t,[{key:"getSumDiv",value:function(){return this.sum_div}},{key:"getDops",value:function(){return 0==this.need_dops.length?[]:JSON.parse(this.need_dops,!0)}},{key:"getFreeItems",value:function(){return 0==this.free_items.length?[]:JSON.parse(this.free_items,!0)}},{key:"getCityRU",value:function(){return this.cityNameRU&&this.cityNameRU.length>0?this.cityNameRU:"Город"}},{key:"getCity",value:function(){return this.cityName}},{key:"getAllPrice",value:function(){return this.AllPrice}},{key:"getPage",value:function(){return this.activePage}},{key:"getUserName",value:function(){return this.userName&&this.userName.length>0?this.userName:""}},{key:"setUserName",value:function(t){this.userName=t}},{key:"getToken",value:function(){return this.userToken}},{key:"getInfoPromo",value:function(t){fetch("https://jacofood.ru/src/php/test_app.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:m.stringify({type:"get_promo_web",city_id:p.getCity(),promo_name:t})}).then((function(t){return t.json()})).then((function(e){p.setPromo(JSON.stringify(e),t),!1===p.checkPromo().st&&localStorage.removeItem("promo_name")}))}},{key:"getPromo",value:function(){return JSON.parse(this.promo,!0)}},{key:"checkPromo",value:function(){var t=p.getCartData();p.setItemsPromo([]);var e=0,n=0,i=t.orderTimes&&1!=parseInt(t.orderTimes)?t.orderPredDay+" "+t.orderPredTime:0,a=this.getPromo(),r=this.getItems(),o=this.getAllItems(),s=[];r.forEach((function(t,e){s.push({name:t.name,item_id:t.item_id,count:t.count,one_price:t.one_price,all_price:parseInt(t.one_price)*parseInt(t.count)})})),r=s,this.setItems(r);var c=[];n=r.reduce((function(t,e){return t+parseInt(e.all_price)}),e);var m,u,d=0,h=0,f=0;(t.orderType||0==t.orderType)&&(d=null!==(m=parseInt(t.orderType))&&void 0!==m?m:0,h=t.orderAddr?parseInt(t.orderAddr.point_id):0,f=null!==(u=parseInt(t.orderPic))&&void 0!==u?u:0);var y="",_="",g="";if(0==i?(y=l()(new Date).format("YYYY-MM-DD"),_=l()(new Date).format("H:mm"),g=parseInt(l()(new Date).format("E"))):(y=l()(i).format("YYYY-MM-DD"),_=l()(i).format("H:mm"),g=parseInt(l()(i).format("E"))),a){if(!a.status_promo)return{st:!1,text:a.promo_text.false};if(a.limits.date.min&&a.limits.date.max&&!(y>=a.limits.date.min&&y<=a.limits.date.max))return{st:!1,text:a.promo_text.false};if(0!=a.limits.time.min&&0!=a.limits.time.max&&!(_>=a.limits.time.min&&_<=a.limits.time.max))return{st:!1,text:a.promo_text.false};if(0!=a.limits.point_id&&!(0==d&&h==a.limits.point_id||1==d&&f==a.limits.point_id))return{st:!1,text:"Адрес для доставки или самовывоза указан некорректно. Проверьте правильность введённых данных."};if(!(0==a.limits.summ.min&&0==a.limits.summ.max||n>=a.limits.summ.min&&(a.limits.summ.max>=n||0==a.limits.summ.max)))return{st:!1,text:"Общая сумма вашего заказа превышает допустимую стоимость для применения промокода."};if(a.limits.dows&&0==parseInt(a.limits.dows[g]))return{st:!1,text:"Указанный вами день недели недоступен для применения промокода. Пожалуйста, выберите другую дату."};if(a.limits.type_order&&!(1==parseInt(a.limits.type_order)||3==parseInt(a.limits.type_order)&&0==d||2==parseInt(a.limits.type_order)&&1==d))return{st:!1,text:"Тип заказа не применим для данного промокода. Пожалуйста, отредактируйте заказ."};if(a.limits.only_kassa&&1==parseInt(a.limits.only_kassa))return{st:!1,text:"Указанный вами промокод действителен только при оплате на кассе. Пожалуйста, посетите для оформления заказа ближайшее к вам кафе."};if(a.limits.items.length>0){var I=0;if(a.limits.items.map((function(t){s.find((function(e){return e.item_id==t}))&&I++})),a.limits.items.length!=I)return{st:!1,text:a.promo_text.false}}var b=0,v=0,k=null;return 1==parseInt(a.promo_action)?(1==parseInt(a.sale.cat_sale)&&(v=parseInt(a.sale.count_sale),r.forEach((function(t,e){k=o.find((function(e){return e.id==t.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&a.sale.sale_action.forEach((function(n){parseInt(t.item_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?v>0&&((b=parseInt(t.one_price)*parseInt(t.count)-parseInt(v))<=0&&(b=1),v-=parseInt(t.one_price)*parseInt(t.count),r[e].all_price=b):(b=parseInt(t.all_price)-parseInt(t.all_price)/100*parseInt(v),r[e].all_price=parseInt(b)))}))}))),2==parseInt(a.sale.cat_sale)&&(v=parseInt(a.sale.count_sale),r.forEach((function(t,e){k=o.find((function(e){return e.id==t.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&a.sale.sale_action.forEach((function(n){parseInt(k.cat_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?v>0&&((b=parseInt(t.one_price)*parseInt(t.count)-parseInt(v))<=0&&(b=1),v-=parseInt(t.one_price)*parseInt(t.count),r[e].all_price=b):(b=parseInt(t.all_price)-parseInt(t.all_price)/100*parseInt(v),r[e].all_price=parseInt(b)))}))}))),3==parseInt(a.sale.cat_sale)&&(v=parseInt(a.sale.count_sale),r.forEach((function(t,e){k=o.find((function(e){return e.id==t.item_id})),3!=parseInt(k.type)&&4!=parseInt(k.type)&&(1==parseInt(a.sale.type_price)?v>0&&((b=parseInt(t.one_price)*parseInt(t.count)-parseInt(v))<=0&&(b=1),v-=parseInt(t.one_price)*parseInt(t.count),r[e].all_price=b):(b=parseInt(t.all_price)-parseInt(t.all_price)/100*parseInt(v),r[e].all_price=parseInt(b)))}))),e=0,n=0,n=r.reduce((function(t,e){return t+e.all_price}),e),p.setAllPrice(n),{st:!0,text:a.promo_text.true}):(2==parseInt(a.promo_action)&&(a.items_add.forEach((function(t){k=o.find((function(e){return e.id==t.item_id})),c.push({item_id:t.item_id,count:t.count,one_price:k.price,all_price:t.price})})),e=0,n=0,n=r.reduce((function(t,e){return t+parseInt(e.all_price)}),e),e=0,n+=c.reduce((function(t,e){return t+parseInt(e.all_price)}),e),p.setItemsPromo(c),p.setAllPrice(n)),3==parseInt(a.promo_action)&&a.items_on_price.length>0&&(r.forEach((function(t,e){a.items_on_price.forEach((function(n){parseInt(t.item_id)==parseInt(n.id)&&(r[e].new_one_price=parseInt(n.price),r[e].all_price=parseInt(n.price)*parseInt(t.count))}))})),e=0,n=0,n=r.reduce((function(t,e){return t+parseInt(e.all_price)}),e),p.setAllPrice(n)),this.setItems(r),{st:!0,text:a.promo_text.true})}return{st:!1,text:a.promo_text.false,test:a}}},{key:"getBanners",value:function(){return 0==this.banners.length?[]:JSON.parse(this.banners,!0)}},{key:"getItemsPromo",value:function(){return 0==this.itemsPromo.length?[]:JSON.parse(this.itemsPromo,!0)}},{key:"getAllItemsCat",value:function(){return 0==this.allItemsCat.length?[]:JSON.parse(this.allItemsCat,!0)}},{key:"getAllItemsCatNew",value:function(){return 0==this.allItemsCatNew.length?[]:JSON.parse(this.allItemsCatNew,!0)}},{key:"getCartData",value:function(){if("undefined"!=typeof window)return localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]}},{key:"getItems",value:function(){return 0==this.items.length?[]:JSON.parse(this.items,!0)}},{key:"getAllItems",value:function(){return 0==this.allItems.length?[]:JSON.parse(this.allItems,!0)}},{key:"AddItem",value:function(t){var e=p.getItems(),n=p.getAllItems(),i=p.getPromo();if(!(n.length>0))return 0;var a=e.find((function(e){return e.item_id==t})),r=0;a&&(r=parseInt(a.count));var o=n.find((function(e){return e.id==t}));if(o){var s=r+1,c=parseInt(o.price),l=p.check_max_count(parseInt(t));return parseInt(l)>=s?(e.some((function(e){return e.item_id==t}))?e.forEach((function(n,i){n.item_id==t&&(e[i].count=s,e[i].all_price=s*c)})):e.push({name:o.name,item_id:t,count:s,one_price:c,all_price:s*c}),p.setItems(e),i&&p.checkPromo(),s):s-1}}},{key:"MinusItem",value:function(t){var e=p.getItems(),n=p.getAllItems(),i=p.getPromo();if(n.length>0){var a=e.find((function(e){return e.item_id==t}));if(!a)return 0;var r=n.find((function(e){return e.id==t})),o=parseInt(a.count)-1,s=parseInt(r.price);return o<=0&&(o=0),o>=0&&(e.map((function(n,i){n.item_id==t&&(e[i].count=o,e[i].all_price=o*s)})),p.setItems(e)),i&&p.checkPromo(),o}return 0}},{key:"check_need_dops",value:function(){var t=p.getItems(),e=p.getAllItems();if(!e||0==e.length)return[];var n=0,a=0,r=p.getDops();if(0==r.length)return[];t.forEach((function(t){var i=e.find((function(e){return e.id==t.item_id}));if(!i)return[];14==parseInt(i.cat_id)?n+=parseInt(t.count):14!==parseInt(i.cat_id)&&5!==parseInt(i.cat_id)&&6!==parseInt(i.cat_id)&&7!==parseInt(i.cat_id)&&(a+=parseInt(t.count))}));var o=[];a>0&&0==n&&(o=r.rolls),0==a&&n>0&&(o=r.pizza),a>0&&n>0&&(o=[].concat((0,i.Z)(r.rolls),(0,i.Z)(r.pizza))),0==a&&0==n&&(o=[].concat((0,i.Z)(r.rolls),(0,i.Z)(r.pizza)));var s=[],c=[];return t.forEach((function(t){var n=e.find((function(e){return e.id==t.item_id}));if(!n)return[];7==parseInt(n.cat_id)&&s.push(n)})),s.forEach((function(t){var e=!1;o.forEach((function(n){parseInt(n.id)==parseInt(t.id)&&(e=!0)})),e||c.push(t)})),o=[].concat((0,i.Z)(o),c)}},{key:"check_max_count",value:function(t){var e=[],n=[],a=p.getItems(),r=p.getFreeItems();if(!r)return 99;a.forEach((function(t,i){r.forEach((function(i){parseInt(t.item_id)==parseInt(i.this_item_id)&&(i.count_in_cart=parseInt(t.count),e.push(i),n.push(parseInt(i.item_id)))}))})),n=(0,i.Z)(new Set(n));var o=[];n.forEach((function(t,n){e.forEach((function(e){if(parseInt(t)==parseInt(e.item_id)){var n=!1;o.forEach((function(i,a){parseInt(i.item_id)==parseInt(t)&&(n=!0,o[a].count+=e.count_in_cart*e.max_count)})),n||o.push({item_id:parseInt(t),count:e.count_in_cart*e.max_count})}}))}));var s=99;return o.forEach((function(e){parseInt(e.item_id)==parseInt(t)&&(s=parseInt(e.count))})),s}}]),t}());const u=p},8293:(t,e,n)=>{var i={"./ru":1793,"./ru.js":1793};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=8293}},t=>{"use strict";t.O(0,[216],(()=>(5798,t(t.s=5798)))),t.O()}]);
//# sourceMappingURL=main.137241c7664600b68971.js.map